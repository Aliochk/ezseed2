/** 
 * All credits to https://github.com/audiocogs/aurora.js 
 * This file contains Aurora, mp3, flac from @audiocogs
 */
(function(){function m(e,t,n,r,i){this.fromSampleRate=e;this.toSampleRate=t;this.channels=n|0;this.outputBufferSize=r;this.noReturn=!!i;this.initialize()}function T(e){this.stream=e;this.sync=false;this.freerate=0;this.this_frame=e.stream.offset;this.next_frame=e.stream.offset;this.main_data=new Uint8Array(_);this.md_len=0;for(var t in e){if(typeof e[t]==="function")this[t]=e[t].bind(e)}}function D(){this.layer=0;this.mode=0;this.mode_extension=0;this.emphasis=0;this.bitrate=0;this.samplerate=0;this.crc_check=0;this.crc_target=0;this.flags=0;this.private_bits=0}function P(){this.header=null;this.options=0;this.sbsample=H([2,36,32]);this.overlap=H([2,32,18]);this.decoders=[]}function H(e,t){if(!t)t=Float64Array;if(e.length===1){return new t(e[0])}var n=[],r=e[0];for(var i=0;i<r;i++){n[i]=H(e.slice(1),t)}return n}function B(){this.filter=H([2,2,2,16,8]);this.phase=0;this.pcm={samplerate:0,channels:0,length:0,samples:[new Float64Array(1152),new Float64Array(1152)]}}function un(){this.allocation=H([2,32],Uint8Array);this.scalefactor=H([2,32],Uint8Array)}function fn(){this.samples=new Float64Array(3);this.allocation=H([2,32],Uint8Array);this.scfsi=H([2,32],Uint8Array);this.scalefactor=H([2,32,3],Uint8Array)}function Hn(e,t,n){this.table=e;this.linbits=t;this.startbits=n}function qn(){this.main_data_begin=null;this.private_bits=null;this.gr=[new Rn,new Rn];this.scfsi=new Uint8Array(2)}function Rn(){this.ch=[new Un,new Un]}function Un(){this.part2_3_length=null;this.big_values=null;this.global_gain=null;this.scalefac_compress=null;this.flags=null;this.block_type=null;this.table_select=new Uint8Array(3);this.subblock_gain=new Uint8Array(3);this.region0_count=null;this.region1_count=null;this.scalefac=new Uint8Array(39)}function zn(){this.imdct=new Fn;this.si=new qn;this.xr=[new Float64Array(576),new Float64Array(576)];this._exponents=new Int32Array(39);this.reqcache=new Float64Array(16);this.modes=new Int16Array(39);this.output=new Float64Array(36);this.tmp=H([32,3,6]);this.tmp2=new Float64Array(32*3*6)}var e;e=this;var t;t={};var n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e},i=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++){if(t in this&&this[t]===e)return t}return-1};t.Base=function(){function t(){}var e;e=/\b_super\b/;t.extend=function(t){var n,s,o,u,a,f,l;n=function(e){function t(){a=t.__super__.constructor.apply(this,arguments);return a}r(t,e);return t}(this);if(typeof t==="function"){u=Object.keys(n.prototype);t.call(n,n);t={};f=n.prototype;for(o in f){s=f[o];if(i.call(u,o)<0){t[o]=s}}}l=n.__super__;for(o in t){s=t[o];if(typeof s==="function"&&e.test(s)){(function(e,t){return n.prototype[e]=function(){var n,r;r=this._super;this._super=l[e];n=t.apply(this,arguments);this._super=r;return n}})(o,s)}else{n.prototype[o]=s}}return n};return t}();t.Buffer=function(){function i(n){var r;if(n instanceof Uint8Array){this.data=n}else if(n instanceof ArrayBuffer||Array.isArray(n)||typeof n==="number"||t.isNode&&((r=e.Buffer)!=null?r.isBuffer(n):void 0)){this.data=new Uint8Array(n)}else if(n.buffer instanceof ArrayBuffer){this.data=new Uint8Array(n.buffer,n.byteOffset,n.length*n.BYTES_PER_ELEMENT)}else if(n instanceof t.Buffer){this.data=n.data}else{throw new Error("Constructing buffer with unknown type.")}this.length=this.data.length;this.next=null;this.prev=null}var n,r;i.allocate=function(e){return new t.Buffer(e)};i.prototype.copy=function(){return new t.Buffer(new Uint8Array(this.data))};i.prototype.slice=function(e,n){if(n==null){n=this.length}if(e===0&&n>=this.length){return new t.Buffer(this.data)}else{return new t.Buffer(this.data.subarray(e,e+n))}};n=e.BlobBuilder||e.MozBlobBuilder||e.WebKitBlobBuilder;r=e.URL||e.webkitURL||e.mozURL;i.makeBlob=function(e,t){var r;if(t==null){t="application/octet-stream"}try{return new Blob([e],{type:t})}catch(i){}if(n!=null){r=new n;r.append(e);return r.getBlob(t)}return null};i.makeBlobURL=function(e,t){return r!=null?r.createObjectURL(this.makeBlob(e,t)):void 0};i.revokeBlobURL=function(e){return r!=null?r.revokeObjectURL(e):void 0};i.prototype.toBlob=function(){return i.makeBlob(this.data.buffer)};i.prototype.toBlobURL=function(){return i.makeBlobURL(this.data.buffer)};return i}();t.BufferList=function(){function e(){this.first=null;this.last=null;this.numBuffers=0;this.availableBytes=0;this.availableBuffers=0}e.prototype.copy=function(){var e;e=new t.BufferList;e.first=this.first;e.last=this.last;e.numBuffers=this.numBuffers;e.availableBytes=this.availableBytes;e.availableBuffers=this.availableBuffers;return e};e.prototype.append=function(e){var t;e.prev=this.last;if((t=this.last)!=null){t.next=e}this.last=e;if(this.first==null){this.first=e}this.availableBytes+=e.length;this.availableBuffers++;return this.numBuffers++};e.prototype.advance=function(){if(this.first){this.availableBytes-=this.first.length;this.availableBuffers--;this.first=this.first.next;return this.first!=null}return false};e.prototype.rewind=function(){var e;if(this.first&&!this.first.prev){return false}this.first=((e=this.first)!=null?e.prev:void 0)||this.last;if(this.first){this.availableBytes+=this.first.length;this.availableBuffers++}return this.first!=null};e.prototype.reset=function(){var e;e=[];while(this.rewind()){continue}return e};return e}();var n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};t.Stream=function(){function v(e){this.list=e;this.localOffset=0;this.offset=0}var e,n,i,s,o,u,a,f,l,c,h,p,d;e=new ArrayBuffer(16);d=new Uint8Array(e);l=new Int8Array(e);h=new Uint16Array(e);a=new Int16Array(e);p=new Uint32Array(e);f=new Int32Array(e);i=new Float32Array(e);if(typeof Float64Array!=="undefined"&&Float64Array!==null){s=new Float64Array(e)}c=(new Uint16Array((new Uint8Array([18,52])).buffer))[0]===13330;t.UnderflowError=function(e){function t(){this.name="AV.UnderflowError"}r(t,e);return t}(Error);v.fromBuffer=function(e){var n;n=new t.BufferList;n.append(e);return new t.Stream(n)};v.prototype.copy=function(){var e;e=new t.Stream(this.list.copy());e.localOffset=this.localOffset;e.offset=this.offset;return e};v.prototype.available=function(e){return e<=this.list.availableBytes-this.localOffset};v.prototype.remainingBytes=function(){return this.list.availableBytes-this.localOffset};v.prototype.advance=function(e){if(!this.available(e)){throw new t.UnderflowError}this.localOffset+=e;this.offset+=e;while(this.list.first&&this.localOffset>=this.list.first.length){this.localOffset-=this.list.first.length;this.list.advance()}return this};v.prototype.rewind=function(e){if(e>this.offset){throw new t.UnderflowError}if(!this.list.first){this.list.rewind();this.localOffset=this.list.first.length}this.localOffset-=e;this.offset-=e;while(this.list.first.prev&&this.localOffset<0){this.list.rewind();this.localOffset+=this.list.first.length}return this};v.prototype.seek=function(e){if(e>this.offset){return this.advance(e-this.offset)}else if(e<this.offset){return this.rewind(this.offset-e)}};v.prototype.readUInt8=function(){var e;if(!this.available(1)){throw new t.UnderflowError}e=this.list.first.data[this.localOffset];this.localOffset+=1;this.offset+=1;if(this.localOffset===this.list.first.length){this.localOffset=0;this.list.advance()}return e};v.prototype.peekUInt8=function(e){var n;if(e==null){e=0}if(!this.available(e+1)){throw new t.UnderflowError}e=this.localOffset+e;n=this.list.first;while(n){if(n.length>e){return n.data[e]}e-=n.length;n=n.next}return 0};v.prototype.read=function(e,t){var n,r,i,s;if(t==null){t=false}if(t===c){for(n=r=0;r<e;n=r+=1){d[n]=this.readUInt8()}}else{for(n=i=s=e-1;i>=0;n=i+=-1){d[n]=this.readUInt8()}}};v.prototype.peek=function(e,t,n){var r,i,s;if(n==null){n=false}if(n===c){for(r=i=0;i<e;r=i+=1){d[r]=this.peekUInt8(t+r)}}else{for(r=s=0;s<e;r=s+=1){d[e-r-1]=this.peekUInt8(t+r)}}};v.prototype.readInt8=function(){this.read(1);return l[0]};v.prototype.peekInt8=function(e){if(e==null){e=0}this.peek(1,e);return l[0]};v.prototype.readUInt16=function(e){this.read(2,e);return h[0]};v.prototype.peekUInt16=function(e,t){if(e==null){e=0}this.peek(2,e,t);return h[0]};v.prototype.readInt16=function(e){this.read(2,e);return a[0]};v.prototype.peekInt16=function(e,t){if(e==null){e=0}this.peek(2,e,t);return a[0]};v.prototype.readUInt24=function(e){if(e){return this.readUInt16(true)+(this.readUInt8()<<16)}else{return(this.readUInt16()<<8)+this.readUInt8()}};v.prototype.peekUInt24=function(e,t){if(e==null){e=0}if(t){return this.peekUInt16(e,true)+(this.peekUInt8(e+2)<<16)}else{return(this.peekUInt16(e)<<8)+this.peekUInt8(e+2)}};v.prototype.readInt24=function(e){if(e){return this.readUInt16(true)+(this.readInt8()<<16)}else{return(this.readInt16()<<8)+this.readUInt8()}};v.prototype.peekInt24=function(e,t){if(e==null){e=0}if(t){return this.peekUInt16(e,true)+(this.peekInt8(e+2)<<16)}else{return(this.peekInt16(e)<<8)+this.peekUInt8(e+2)}};v.prototype.readUInt32=function(e){this.read(4,e);return p[0]};v.prototype.peekUInt32=function(e,t){if(e==null){e=0}this.peek(4,e,t);return p[0]};v.prototype.readInt32=function(e){this.read(4,e);return f[0]};v.prototype.peekInt32=function(e,t){if(e==null){e=0}this.peek(4,e,t);return f[0]};v.prototype.readFloat32=function(e){this.read(4,e);return i[0]};v.prototype.peekFloat32=function(e,t){if(e==null){e=0}this.peek(4,e,t);return i[0]};v.prototype.readFloat64=function(e){this.read(8,e);if(s){return s[0]}else{return o()}};o=function(){var e,t,n,r,i,s;r=p[0],n=p[1];if(!n||n===2147483648){return 0}s=1-(n>>>31)*2;e=n>>>20&2047;t=n&1048575;if(e===2047){if(t){return NaN}return s*Infinity}e-=1023;i=(t|1048576)*Math.pow(2,e-20);i+=r*Math.pow(2,e-52);return s*i};v.prototype.peekFloat64=function(e,t){if(e==null){e=0}this.peek(8,e,t);if(s){return s[0]}else{return o()}};v.prototype.readFloat80=function(e){this.read(10,e);return u()};u=function(){var e,t,n,r,i,s,o;r=p[0],i=p[1];e=d[9];t=d[8];o=1-(e>>>7)*2;n=(e&127)<<8|t;if(n===0&&i===0&&r===0){return 0}if(n===32767){if(i===0&&r===0){return o*Infinity}return NaN}n-=16383;s=i*Math.pow(2,n-31);s+=r*Math.pow(2,n-63);return o*s};v.prototype.peekFloat80=function(e,t){if(e==null){e=0}this.peek(10,e,t);return u()};v.prototype.readBuffer=function(e){var n,r,i,s;r=t.Buffer.allocate(e);i=r.data;for(n=s=0;s<e;n=s+=1){i[n]=this.readUInt8()}return r};v.prototype.peekBuffer=function(e,n){var r,i,s,o;if(e==null){e=0}i=t.Buffer.allocate(n);s=i.data;for(r=o=0;o<n;r=o+=1){s[r]=this.peekUInt8(e+r)}return i};v.prototype.readSingleBuffer=function(e){var t;t=this.list.first.slice(this.localOffset,e);this.advance(t.length);return t};v.prototype.peekSingleBuffer=function(e,t){var n;n=this.list.first.slice(this.localOffset+e,t);return n};v.prototype.readString=function(e,t){if(t==null){t="ascii"}return n.call(this,0,e,t,true)};v.prototype.peekString=function(e,t,r){if(e==null){e=0}if(r==null){r="ascii"}return n.call(this,e,t,r,false)};n=function(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m;n=n.toLowerCase();h=t===null?0:-1;if(t==null){t=Infinity}l=e+t;d="";switch(n){case"ascii":case"latin1":while(e<l&&(f=this.peekUInt8(e++))!==h){d+=String.fromCharCode(f)}break;case"utf8":case"utf-8":while(e<l&&(i=this.peekUInt8(e++))!==h){if((i&128)===0){d+=String.fromCharCode(i)}else if((i&224)===192){s=this.peekUInt8(e++)&63;d+=String.fromCharCode((i&31)<<6|s)}else if((i&240)===224){s=this.peekUInt8(e++)&63;o=this.peekUInt8(e++)&63;d+=String.fromCharCode((i&15)<<12|s<<6|o)}else if((i&248)===240){s=this.peekUInt8(e++)&63;o=this.peekUInt8(e++)&63;u=this.peekUInt8(e++)&63;p=((i&15)<<18|s<<12|o<<6|u)-65536;d+=String.fromCharCode(55296+(p>>10),56320+(p&1023))}}break;case"utf16-be":case"utf16be":case"utf16le":case"utf16-le":case"utf16bom":case"utf16-bom":switch(n){case"utf16be":case"utf16-be":c=false;break;case"utf16le":case"utf16-le":c=true;break;case"utf16bom":case"utf16-bom":if(t<2||(a=this.peekUInt16(e))===h){if(r){this.advance(e+=2)}return d}c=a===65534;e+=2}while(e<l&&(v=this.peekUInt16(e,c))!==h){e+=2;if(v<55296||v>57343){d+=String.fromCharCode(v)}else{if(v>56319){throw new Error("Invalid utf16 sequence.")}m=this.peekUInt16(e,c);if(m<56320||m>57343){throw new Error("Invalid utf16 sequence.")}d+=String.fromCharCode(v,m);e+=2}}if(v===h){e+=2}break;default:throw new Error("Unknown encoding: "+n)}if(r){this.advance(e)}return d};return v}();t.Bitstream=function(){function e(e){this.stream=e;this.bitPosition=0}e.prototype.copy=function(){var e;e=new t.Bitstream(this.stream.copy());e.bitPosition=this.bitPosition;return e};e.prototype.offset=function(){return 8*this.stream.offset+this.bitPosition};e.prototype.available=function(e){return this.stream.available((e+8-this.bitPosition)/8)};e.prototype.advance=function(e){var t;t=this.bitPosition+e;this.stream.advance(t>>3);return this.bitPosition=t&7};e.prototype.rewind=function(e){var t;t=this.bitPosition-e;this.stream.rewind(Math.abs(t>>3));return this.bitPosition=t&7};e.prototype.seek=function(e){var t;t=this.offset();if(e>t){return this.advance(e-t)}else if(e<t){return this.rewind(t-e)}};e.prototype.align=function(){if(this.bitPosition!==0){this.bitPosition=0;return this.stream.advance(1)}};e.prototype.read=function(e,t){var n,r,i,s,o,u,a;if(e===0){return 0}a=e+this.bitPosition;if(a<=8){n=(this.stream.peekUInt8()<<this.bitPosition&255)>>>8-e}else if(a<=16){n=(this.stream.peekUInt16()<<this.bitPosition&65535)>>>16-e}else if(a<=24){n=(this.stream.peekUInt24()<<this.bitPosition&16777215)>>>24-e}else if(a<=32){n=this.stream.peekUInt32()<<this.bitPosition>>>32-e}else if(a<=40){r=this.stream.peekUInt8(0)*4294967296;i=this.stream.peekUInt8(1)<<24>>>0;s=this.stream.peekUInt8(2)<<16;o=this.stream.peekUInt8(3)<<8;u=this.stream.peekUInt8(4);n=r+i+s+o+u;n%=Math.pow(2,40-this.bitPosition);n=Math.floor(n/Math.pow(2,40-this.bitPosition-e))}else{throw new Error("Too many bits!")}if(t){if(a<32){if(n>>>e-1){n=((1<<e>>>0)-n)*-1}}else{if(n/Math.pow(2,e-1)|0){n=(Math.pow(2,e)-n)*-1}}}this.advance(e);return n};e.prototype.peek=function(e,t){var n,r,i,s,o,u,a;if(e===0){return 0}a=e+this.bitPosition;if(a<=8){n=(this.stream.peekUInt8()<<this.bitPosition&255)>>>8-e}else if(a<=16){n=(this.stream.peekUInt16()<<this.bitPosition&65535)>>>16-e}else if(a<=24){n=(this.stream.peekUInt24()<<this.bitPosition&16777215)>>>24-e}else if(a<=32){n=this.stream.peekUInt32()<<this.bitPosition>>>32-e}else if(a<=40){r=this.stream.peekUInt8(0)*4294967296;i=this.stream.peekUInt8(1)<<24>>>0;s=this.stream.peekUInt8(2)<<16;o=this.stream.peekUInt8(3)<<8;u=this.stream.peekUInt8(4);n=r+i+s+o+u;n%=Math.pow(2,40-this.bitPosition);n=Math.floor(n/Math.pow(2,40-this.bitPosition-e))}else{throw new Error("Too many bits!")}if(t){if(a<32){if(n>>>e-1){n=((1<<e>>>0)-n)*-1}}else{if(n/Math.pow(2,e-1)|0){n=(Math.pow(2,e)-n)*-1}}}return n};e.prototype.readLSB=function(e,t){var n,r;if(e===0){return 0}if(e>40){throw new Error("Too many bits!")}r=e+this.bitPosition;n=this.stream.peekUInt8(0)>>>this.bitPosition;if(r>8){n|=this.stream.peekUInt8(1)<<8-this.bitPosition}if(r>16){n|=this.stream.peekUInt8(2)<<16-this.bitPosition}if(r>24){n+=this.stream.peekUInt8(3)<<24-this.bitPosition>>>0}if(r>32){n+=this.stream.peekUInt8(4)*Math.pow(2,32-this.bitPosition)}if(r>=32){n%=Math.pow(2,e)}else{n&=(1<<e)-1}if(t){if(r<32){if(n>>>e-1){n=((1<<e>>>0)-n)*-1}}else{if(n/Math.pow(2,e-1)|0){n=(Math.pow(2,e)-n)*-1}}}this.advance(e);return n};e.prototype.peekLSB=function(e,t){var n,r;if(e===0){return 0}if(e>40){throw new Error("Too many bits!")}r=e+this.bitPosition;n=this.stream.peekUInt8(0)>>>this.bitPosition;if(r>8){n|=this.stream.peekUInt8(1)<<8-this.bitPosition}if(r>16){n|=this.stream.peekUInt8(2)<<16-this.bitPosition}if(r>24){n+=this.stream.peekUInt8(3)<<24-this.bitPosition>>>0}if(r>32){n+=this.stream.peekUInt8(4)*Math.pow(2,32-this.bitPosition)}if(r>=32){n%=Math.pow(2,e)}else{n&=(1<<e)-1}if(t){if(r<32){if(n>>>e-1){n=((1<<e>>>0)-n)*-1}}else{if(n/Math.pow(2,e-1)|0){n=(Math.pow(2,e)-n)*-1}}}return n};return e}();var s,n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e},o=[].slice;t.EventEmitter=function(e){function t(){s=t.__super__.constructor.apply(this,arguments);return s}r(t,e);t.prototype.on=function(e,t){var n;if(this.events==null){this.events={}}if((n=this.events)[e]==null){n[e]=[]}return this.events[e].push(t)};t.prototype.off=function(e,t){var n,r;if(!((r=this.events)!=null?r[e]:void 0)){return}n=this.events[e].indexOf(t);if(~n){return this.events[e].splice(n,1)}};t.prototype.once=function(e,t){var n;return this.on(e,n=function(){this.off(e,n);return t.apply(this,arguments)})};t.prototype.emit=function(){var e,t,n,r,i,s,u;t=arguments[0],e=2<=arguments.length?o.call(arguments,1):[];if(!((s=this.events)!=null?s[t]:void 0)){return}u=this.events[t].slice();for(r=0,i=u.length;r<i;r++){n=u[r];n.apply(this,e)}};return t}(t.Base);var u=function(e,t){return function(){return e.apply(t,arguments)}},n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};t.BufferSource=function(n){function o(e){this.loop=u(this.loop,this);if(e instanceof t.BufferList){this.list=e}else{this.list=new t.BufferList;this.list.append(new t.Buffer(e))}this.paused=true}var i,s;r(o,n);s=e.setImmediate||function(t){return e.setTimeout(t,0)};i=e.clearImmediate||function(t){return e.clearTimeout(t)};o.prototype.start=function(){this.paused=false;return this._timer=s(this.loop)};o.prototype.loop=function(){this.emit("progress",(this.list.numBuffers-this.list.availableBuffers+1)/this.list.numBuffers*100|0);this.emit("data",this.list.first);if(this.list.advance()){return s(this.loop)}else{return this.emit("end")}};o.prototype.pause=function(){i(this._timer);return this.paused=true};o.prototype.reset=function(){this.pause();return this.list.rewind()};return o}(t.EventEmitter);var n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};t.Demuxer=function(e){function i(e,n){var r,i,s=this;r=new t.BufferList;r.append(n);this.stream=new t.Stream(r);i=false;e.on("data",function(e){i=true;r.append(e);return s.readChunk(e)});e.on("error",function(e){return s.emit("error",e)});e.on("end",function(){if(!i){s.readChunk(n)}return s.emit("end")});this.seekPoints=[];this.init()}var n;r(i,e);i.probe=function(e){return false};i.prototype.init=function(){};i.prototype.readChunk=function(e){};i.prototype.addSeekPoint=function(e,t){var n;n=this.searchTimestamp(t);return this.seekPoints.splice(n,0,{offset:e,timestamp:t})};i.prototype.searchTimestamp=function(e,t){var n,r,i,s;r=0;n=this.seekPoints.length;if(n>0&&this.seekPoints[n-1].timestamp<e){return n}while(r<n){i=r+n>>1;s=this.seekPoints[i].timestamp;if(s<e){r=i+1}else if(s>=e){n=i}}if(n>this.seekPoints.length){n=this.seekPoints.length}return n};i.prototype.seek=function(e){var t,n;if(this.format&&this.format.framesPerPacket>0&&this.format.bytesPerPacket>0){n={timestamp:e,offset:this.format.bytesPerPacket*e/this.format.framesPerPacket};return n}else{t=this.searchTimestamp(e);return this.seekPoints[t]}};n=[];i.register=function(e){return n.push(e)};i.find=function(e){var r,i,s,o;i=t.Stream.fromBuffer(e);for(s=0,o=n.length;s<o;s++){r=n[s];if(r.probe(i)){return r}}return null};return i}(t.EventEmitter);var n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};t.Decoder=function(e){function i(e,n){var r,i=this;this.demuxer=e;this.format=n;r=new t.BufferList;this.stream=new t.Stream(r);this.bitstream=new t.Bitstream(this.stream);this.receivedFinalBuffer=false;this.waiting=false;this.demuxer.on("cookie",function(e){var t;try{return i.setCookie(e)}catch(n){t=n;return i.emit("error",t)}});this.demuxer.on("data",function(e){r.append(e);if(i.waiting){return i.decode()}});this.demuxer.on("end",function(){i.receivedFinalBuffer=true;if(i.waiting){return i.decode()}});this.init()}var n;r(i,e);i.prototype.init=function(){};i.prototype.setCookie=function(e){};i.prototype.readChunk=function(){};i.prototype.decode=function(){var e,n,r;this.waiting=false;n=this.bitstream.offset();try{r=this.readChunk()}catch(i){e=i;if(!(e instanceof t.UnderflowError)){this.emit("error",e);return false}}if(r){this.emit("data",r);return true}else if(!this.receivedFinalBuffer){this.bitstream.seek(n);this.waiting=true}else{this.emit("end")}return false};i.prototype.seek=function(e){var t;t=this.demuxer.seek(e);this.stream.seek(t.offset);return t.timestamp};n={};i.register=function(e,t){return n[e]=t};i.find=function(e){return n[e]||null};return i}(t.EventEmitter);var u=function(e,t){return function(){return e.apply(t,arguments)}},n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};t.Queue=function(e){function t(e){var t=this;this.asset=e;this.write=u(this.write,this);this.readyMark=64;this.finished=false;this.buffering=true;this.ended=false;this.buffers=[];this.asset.on("data",this.write);this.asset.on("end",function(){return t.ended=true});this.asset.decodePacket()}r(t,e);t.prototype.write=function(e){if(e){this.buffers.push(e)}if(this.buffering){if(this.buffers.length>=this.readyMark||this.ended){this.buffering=false;return this.emit("ready")}else{return this.asset.decodePacket()}}};t.prototype.read=function(){if(this.buffers.length===0){return null}this.asset.decodePacket();return this.buffers.shift()};t.prototype.reset=function(){this.buffers.length=0;this.buffering=true;return this.asset.decodePacket()};return t}(t.EventEmitter);var u=function(e,t){return function(){return e.apply(t,arguments)}},n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};t.AudioDevice=function(e){function i(e,t){this.sampleRate=e;this.channels=t;this.updateTime=u(this.updateTime,this);this.playing=false;this.currentTime=0;this._lastTime=0}var n;r(i,e);i.prototype.start=function(){var e=this;if(this.playing){return}this.playing=true;if(this.device==null){this.device=t.AudioDevice.create(this.sampleRate,this.channels)}if(!this.device){throw new Error("No supported audio device found.")}this._lastTime=this.device.getDeviceTime();this._timer=setInterval(this.updateTime,200);return this.device.on("refill",this.refill=function(t){return e.emit("refill",t)})};i.prototype.stop=function(){if(!this.playing){return}this.playing=false;this.device.off("refill",this.refill);return clearInterval(this._timer)};i.prototype.destroy=function(){this.stop();return this.device.destroy()};i.prototype.seek=function(e){this.currentTime=e;if(this.playing){this._lastTime=this.device.getDeviceTime()}return this.emit("timeUpdate",this.currentTime)};i.prototype.updateTime=function(){var e;e=this.device.getDeviceTime();this.currentTime+=(e-this._lastTime)/this.device.sampleRate*1e3|0;this._lastTime=e;return this.emit("timeUpdate",this.currentTime)};n=[];i.register=function(e){return n.push(e)};i.create=function(e,t){var r,i,s;for(i=0,s=n.length;i<s;i++){r=n[i];if(r.supported){return new r(e,t)}}return null};return i}(t.EventEmitter);var u=function(e,t){return function(){return e.apply(t,arguments)}},n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};t.Asset=function(e){function n(e){var t=this;this.source=e;this._decode=u(this._decode,this);this.findDecoder=u(this.findDecoder,this);this.probe=u(this.probe,this);this.buffered=0;this.duration=null;this.format=null;this.metadata=null;this.active=false;this.demuxer=null;this.decoder=null;this.source.once("data",this.probe);this.source.on("error",function(e){t.emit("error",e);return t.stop()});this.source.on("progress",function(e){t.buffered=e;return t.emit("buffer",t.buffered)})}r(n,e);n.fromURL=function(e){return new t.Asset(new t.HTTPSource(e))};n.fromFile=function(e){return new t.Asset(new t.FileSource(e))};n.fromBuffer=function(e){return new t.Asset(new t.BufferSource(e))};n.prototype.start=function(e){if(this.active){return}if(e!=null){this.shouldDecode=e}if(this.shouldDecode==null){this.shouldDecode=true}this.active=true;this.source.start();if(this.decoder&&this.shouldDecode){return this._decode()}};n.prototype.stop=function(){if(!this.active){return}this.active=false;return this.source.pause()};n.prototype.get=function(e,t){var n=this;if(e!=="format"&&e!=="duration"&&e!=="metadata"){return}if(this[e]!=null){return t(this[e])}else{this.once(e,function(e){n.stop();return t(e)});return this.start()}};n.prototype.decodePacket=function(){return this.decoder.decode()};n.prototype.decodeToBuffer=function(e){var t,n,r;r=0;t=[];this.on("data",n=function(e){r+=e.length;return t.push(e)});this.once("end",function(){var i,s,o,u,a;i=new Float32Array(r);o=0;for(u=0,a=t.length;u<a;u++){s=t[u];i.set(s,o);o+=s.length}this.off("data",n);return e(i)});return this.start()};n.prototype.probe=function(e){var n,r=this;if(!this.active){return}n=t.Demuxer.find(e);if(!n){return this.emit("error","A demuxer for this container was not found.")}this.demuxer=new n(this.source,e);this.demuxer.on("format",this.findDecoder);this.demuxer.on("duration",function(e){r.duration=e;return r.emit("duration",r.duration)});this.demuxer.on("metadata",function(e){r.metadata=e;return r.emit("metadata",r.metadata)});return this.demuxer.on("error",function(e){r.emit("error",e);return r.stop()})};n.prototype.findDecoder=function(e){var n,r,i=this;this.format=e;if(!this.active){return}this.emit("format",this.format);n=t.Decoder.find(this.format.formatID);if(!n){return this.emit("error","A decoder for "+this.format.formatID+" was not found.")}this.decoder=new n(this.demuxer,this.format);if(this.format.floatingPoint){this.decoder.on("data",function(e){return i.emit("data",e)})}else{r=Math.pow(2,this.format.bitsPerChannel-1);this.decoder.on("data",function(e){var t,n,s,o,u;t=new Float32Array(e.length);for(n=o=0,u=e.length;o<u;n=++o){s=e[n];t[n]=s/r}return i.emit("data",t)})}this.decoder.on("error",function(e){i.emit("error",e);return i.stop()});this.decoder.on("end",function(){return i.emit("end")});this.emit("decodeStart");if(this.shouldDecode){return this._decode()}};n.prototype._decode=function(){while(this.decoder.decode()&&this.active){continue}if(this.active){return this.decoder.once("data",this._decode)}};return n}(t.EventEmitter);var u=function(e,t){return function(){return e.apply(t,arguments)}},n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};t.Player=function(e){function n(e){var n=this;this.asset=e;this.startPlaying=u(this.startPlaying,this);this.playing=false;this.buffered=0;this.currentTime=0;this.duration=0;this.volume=100;this.pan=0;this.metadata={};this.filters=[new t.VolumeFilter(this,"volume"),new t.BalanceFilter(this,"pan")];this.asset.on("buffer",function(e){n.buffered=e;return n.emit("buffer",n.buffered)});this.asset.on("decodeStart",function(){n.queue=new t.Queue(n.asset);return n.queue.once("ready",n.startPlaying)});this.asset.on("format",function(e){n.format=e;return n.emit("format",n.format)});this.asset.on("metadata",function(e){n.metadata=e;return n.emit("metadata",n.metadata)});this.asset.on("duration",function(e){n.duration=e;return n.emit("duration",n.duration)});this.asset.on("error",function(e){return n.emit("error",e)})}r(n,e);n.fromURL=function(e){return new t.Player(t.Asset.fromURL(e))};n.fromFile=function(e){return new t.Player(t.Asset.fromFile(e))};n.fromBuffer=function(e){return new t.Player(t.Asset.fromBuffer(e))};n.prototype.preload=function(){if(!this.asset){return}this.startedPreloading=true;return this.asset.start(false)};n.prototype.play=function(){var e;if(this.playing){return}if(!this.startedPreloading){this.preload()}this.playing=true;return(e=this.device)!=null?e.start():void 0};n.prototype.pause=function(){var e;if(!this.playing){return}this.playing=false;return(e=this.device)!=null?e.stop():void 0};n.prototype.togglePlayback=function(){if(this.playing){return this.pause()}else{return this.play()}};n.prototype.stop=function(){var e;this.pause();this.asset.stop();return(e=this.device)!=null?e.destroy():void 0};n.prototype.seek=function(e){var t,n=this;if((t=this.device)!=null){t.stop()}this.queue.once("ready",function(){var e,t;if((e=n.device)!=null){e.seek(n.currentTime)}if(n.playing){return(t=n.device)!=null?t.start():void 0}});e=e/1e3*this.format.sampleRate;e=this.asset.decoder.seek(e);this.currentTime=e/this.format.sampleRate*1e3|0;this.queue.reset();return this.currentTime};n.prototype.startPlaying=function(){var e,n,r=this;e=this.queue.read();n=0;this.device=new t.AudioDevice(this.format.sampleRate,this.format.channelsPerFrame);this.device.on("timeUpdate",function(e){r.currentTime=e;return r.emit("progress",r.currentTime)});this.refill=function(t){var i,s,o,u,a,f,l,c;if(!r.playing){return}if(!e){e=r.queue.read();n=0}i=0;while(e&&i<t.length){u=Math.min(e.length-n,t.length-i);for(o=a=0;a<u;o=a+=1){t[i++]=e[n++]}if(n===e.length){e=r.queue.read();n=0}}c=r.filters;for(f=0,l=c.length;f<l;f++){s=c[f];s.process(t)}if(!e){if(r.queue.ended){r.currentTime=r.duration;r.emit("progress",r.currentTime);r.emit("end");r.stop()}else{r.device.stop()}}};this.device.on("refill",this.refill);if(this.playing){this.device.start()}return this.emit("ready")};return n}(t.EventEmitter);t.Filter=function(){function e(e,t){if(e&&t){Object.defineProperty(this,"value",{get:function(){return e[t]}})}}e.prototype.process=function(e){};return e}();var s,n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};t.VolumeFilter=function(e){function t(){s=t.__super__.constructor.apply(this,arguments);return s}r(t,e);t.prototype.process=function(e){var t,n,r,i;if(this.value>=100){return}n=Math.max(0,Math.min(100,this.value))/100;for(t=r=0,i=e.length;r<i;t=r+=1){e[t]*=n}};return t}(t.Filter);var s,n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};t.BalanceFilter=function(e){function t(){s=t.__super__.constructor.apply(this,arguments);return s}r(t,e);t.prototype.process=function(e){var t,n,r,i;if(this.value===0){return}n=Math.max(-50,Math.min(50,this.value));for(t=r=0,i=e.length;r<i;t=r+=2){e[t]*=Math.min(1,(50-n)/50);e[t+1]*=Math.min(1,(50+n)/50)}};return t}(t.Filter);var a,s,n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};a=function(e){function n(){s=n.__super__.constructor.apply(this,arguments);return s}r(n,e);t.Demuxer.register(n);n.probe=function(e){return e.peekString(0,4)==="caff"};n.prototype.readChunk=function(){var e,t,n,r,i,s,o,u,a,f,c,h,p,d;if(!this.format&&this.stream.available(64)){if(this.stream.readString(4)!=="caff"){return this.emit("error","Invalid CAF, does not begin with 'caff'")}this.stream.advance(4);if(this.stream.readString(4)!=="desc"){return this.emit("error","Invalid CAF, 'caff' is not followed by 'desc'")}if(!(this.stream.readUInt32()===0&&this.stream.readUInt32()===32)){return this.emit("error","Invalid 'desc' size, should be 32")}this.format={};this.format.sampleRate=this.stream.readFloat64();this.format.formatID=this.stream.readString(4);i=this.stream.readUInt32();if(this.format.formatID==="lpcm"){this.format.floatingPoint=Boolean(i&1);this.format.littleEndian=Boolean(i&2)}this.format.bytesPerPacket=this.stream.readUInt32();this.format.framesPerPacket=this.stream.readUInt32();this.format.channelsPerFrame=this.stream.readUInt32();this.format.bitsPerChannel=this.stream.readUInt32();this.emit("format",this.format)}while(this.stream.available(1)){if(!this.headerCache){this.headerCache={type:this.stream.readString(4),oversize:this.stream.readUInt32()!==0,size:this.stream.readUInt32()};if(this.headerCache.oversize){return this.emit("error","Holy Shit, an oversized file, not supported in JS")}}switch(this.headerCache.type){case"kuki":if(this.stream.available(this.headerCache.size)){if(this.format.formatID==="aac "){a=this.stream.offset+this.headerCache.size;if(n=l.readEsds(this.stream)){this.emit("cookie",n)}this.stream.seek(a)}else{e=this.stream.readBuffer(this.headerCache.size);this.emit("cookie",e)}this.headerCache=null}break;case"pakt":if(this.stream.available(this.headerCache.size)){if(this.stream.readUInt32()!==0){return this.emit("error","Sizes greater than 32 bits are not supported.")}this.numPackets=this.stream.readUInt32();if(this.stream.readUInt32()!==0){return this.emit("error","Sizes greater than 32 bits are not supported.")}this.numFrames=this.stream.readUInt32();this.primingFrames=this.stream.readUInt32();this.remainderFrames=this.stream.readUInt32();this.emit("duration",this.numFrames/this.format.sampleRate*1e3|0);this.sentDuration=true;t=0;f=0;for(s=h=0,d=this.numPackets;h<d;s=h+=1){this.addSeekPoint(t,f);t+=this.format.bytesPerPacket||l.readDescrLen(this.stream);f+=this.format.framesPerPacket||l.readDescrLen(this.stream)}this.headerCache=null}break;case"info":r=this.stream.readUInt32();u={};for(s=p=0;0<=r?p<r:p>r;s=0<=r?++p:--p){o=this.stream.readString(null);c=this.stream.readString(null);u[o]=c}this.emit("metadata",u);this.headerCache=null;break;case"data":if(!this.sentFirstDataChunk){this.stream.advance(4);this.headerCache.size-=4;if(this.format.bytesPerPacket!==0&&!this.sentDuration){this.numFrames=this.headerCache.size/this.format.bytesPerPacket;this.emit("duration",this.numFrames/this.format.sampleRate*1e3|0)}this.sentFirstDataChunk=true}e=this.stream.readSingleBuffer(this.headerCache.size);this.headerCache.size-=e.length;this.emit("data",e);if(this.headerCache.size<=0){this.headerCache=null}break;default:if(this.stream.available(this.headerCache.size)){this.stream.advance(this.headerCache.size);this.headerCache=null}}}};return n}(t.Demuxer);var l,s,n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e},i=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++){if(t in this&&this[t]===e)return t}return-1};l=function(e){function m(){s=m.__super__.constructor.apply(this,arguments);return s}var n,o,u,a,f,l,c,h,p,d,v;r(m,e);t.Demuxer.register(m);o=["M4A ","M4P ","M4B ","M4V ","isom","mp42","qt  "];m.probe=function(e){var t;return e.peekString(4,4)==="ftyp"&&(t=e.peekString(8,4),i.call(o,t)>=0)};m.prototype.init=function(){this.atoms=[];this.offsets=[];this.track=null;return this.tracks=[]};f={};c={};a=function(e,t){var n,r,i,s,o;n=[];o=e.split(".").slice(0,-1);for(i=0,s=o.length;i<s;i++){r=o[i];n.push(r);c[n.join(".")]=true}if(f[e]==null){f[e]={}}return f[e].fn=t};u=function(e,t){if(f[e]==null){f[e]={}}return f[e].after=t};m.prototype.readChunk=function(){var e,t,n;this["break"]=false;while(this.stream.available(1)&&!this["break"]){if(!this.readHeaders){if(!this.stream.available(8)){return}this.len=this.stream.readUInt32()-8;this.type=this.stream.readString(4);if(this.len===0){continue}this.atoms.push(this.type);this.offsets.push(this.stream.offset+this.len);this.readHeaders=true}t=this.atoms.join(".");e=f[t];if(e!=null?e.fn:void 0){if(!(this.stream.available(this.len)||t==="mdat")){return}e.fn.call(this);if(t in c){this.readHeaders=false}}else if(t in c){this.readHeaders=false}else{if(!this.stream.available(this.len)){return}this.stream.advance(this.len)}while(this.stream.offset>=this.offsets[this.offsets.length-1]){e=f[this.atoms.join(".")];if(e!=null?e.after:void 0){e.after.call(this)}n=this.atoms.pop();this.offsets.pop();this.readHeaders=false}}};a("ftyp",function(){var e;if(e=this.stream.readString(4),i.call(o,e)<0){return this.emit("error","Not a valid M4A file.")}return this.stream.advance(this.len-4)});a("moov.trak",function(){this.track={};return this.tracks.push(this.track)});a("moov.trak.tkhd",function(){this.stream.advance(4);this.stream.advance(8);this.track.id=this.stream.readUInt32();return this.stream.advance(this.len-16)});a("moov.trak.mdia.hdlr",function(){this.stream.advance(4);this.stream.advance(4);this.track.type=this.stream.readString(4);this.stream.advance(12);return this.stream.advance(this.len-24)});a("moov.trak.mdia.mdhd",function(){this.stream.advance(4);this.stream.advance(8);this.track.timeScale=this.stream.readUInt32();this.track.duration=this.stream.readUInt32();return this.stream.advance(4)});n={ulaw:8,alaw:8,in24:24,in32:32,fl32:32,fl64:64};a("moov.trak.mdia.minf.stbl.stsd",function(){var e,t,r,i,s;this.stream.advance(4);t=this.stream.readUInt32();if(this.track.type!=="soun"){return this.stream.advance(this.len-8)}if(t!==1){return this.emit("error","Only expecting one entry in sample description atom!")}this.stream.advance(4);e=this.track.format={};e.formatID=this.stream.readString(4);this.stream.advance(6);this.stream.advance(2);r=this.stream.readUInt16();this.stream.advance(6);e.channelsPerFrame=this.stream.readUInt16();e.bitsPerChannel=this.stream.readUInt16();this.stream.advance(4);e.sampleRate=this.stream.readUInt16();this.stream.advance(2);if(r===1){e.framesPerPacket=this.stream.readUInt32();this.stream.advance(4);e.bytesPerFrame=this.stream.readUInt32();this.stream.advance(4)}else if(r!==0){this.emit("error","Unknown version in stsd atom")}if(n[e.formatID]!=null){e.bitsPerChannel=n[e.formatID]}e.floatingPoint=(i=e.formatID)==="fl32"||i==="fl64";e.littleEndian=e.formatID==="sowt"&&e.bitsPerChannel>8;if((s=e.formatID)==="twos"||s==="sowt"||s==="in24"||s==="in32"||s==="fl32"||s==="fl64"||s==="raw "||s==="NONE"){return e.formatID="lpcm"}});a("moov.trak.mdia.minf.stbl.stsd.alac",function(){this.stream.advance(4);return this.track.cookie=this.stream.readBuffer(this.len-4)});a("moov.trak.mdia.minf.stbl.stsd.esds",function(){var e;e=this.stream.offset+this.len;this.track.cookie=m.readEsds(this.stream);return this.stream.seek(e)});a("moov.trak.mdia.minf.stbl.stsd.wave.enda",function(){return this.track.format.littleEndian=!!this.stream.readUInt16()});m.readDescrLen=function(e){var t,n,r;r=0;n=4;while(n--){t=e.readUInt8();r=r<<7|t&127;if(!(t&128)){break}}return r};m.readEsds=function(e){var t,n,r,i;e.advance(4);i=e.readUInt8();r=m.readDescrLen(e);if(i===3){e.advance(2);n=e.readUInt8();if(n&128){e.advance(2)}if(n&64){e.advance(e.readUInt8())}if(n&32){e.advance(2)}}else{e.advance(2)}i=e.readUInt8();r=m.readDescrLen(e);if(i===4){t=e.readUInt8();e.advance(1);e.advance(3);e.advance(4);e.advance(4);i=e.readUInt8();r=m.readDescrLen(e);if(i===5){return e.readBuffer(r)}}return null};a("moov.trak.mdia.minf.stbl.stts",function(){var e,t,n;this.stream.advance(4);e=this.stream.readUInt32();this.track.stts=[];for(t=n=0;n<e;t=n+=1){this.track.stts[t]={count:this.stream.readUInt32(),duration:this.stream.readUInt32()}}return this.setupSeekPoints()});a("moov.trak.mdia.minf.stbl.stsc",function(){var e,t,n;this.stream.advance(4);e=this.stream.readUInt32();this.track.stsc=[];for(t=n=0;n<e;t=n+=1){this.track.stsc[t]={first:this.stream.readUInt32(),count:this.stream.readUInt32(),id:this.stream.readUInt32()}}return this.setupSeekPoints()});a("moov.trak.mdia.minf.stbl.stsz",function(){var e,t,n;this.stream.advance(4);this.track.sampleSize=this.stream.readUInt32();e=this.stream.readUInt32();if(this.track.sampleSize===0&&e>0){this.track.sampleSizes=[];for(t=n=0;n<e;t=n+=1){this.track.sampleSizes[t]=this.stream.readUInt32()}}return this.setupSeekPoints()});a("moov.trak.mdia.minf.stbl.stco",function(){var e,t,n;this.stream.advance(4);e=this.stream.readUInt32();this.track.chunkOffsets=[];for(t=n=0;n<e;t=n+=1){this.track.chunkOffsets[t]=this.stream.readUInt32()}return this.setupSeekPoints()});a("moov.trak.tref.chap",function(){var e,t,n;e=this.len>>2;this.track.chapterTracks=[];for(t=n=0;n<e;t=n+=1){this.track.chapterTracks[t]=this.stream.readUInt32()}});m.prototype.setupSeekPoints=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v;if(!(this.track.chunkOffsets!=null&&this.track.stsc!=null&&this.track.sampleSize!=null&&this.track.stts!=null)){return}o=0;u=0;u=0;a=0;i=0;n=0;f=0;this.track.seekPoints=[];p=this.track.chunkOffsets;v=[];for(e=l=0,h=p.length;l<h;e=++l){r=p[e];for(t=c=0,d=this.track.stsc[o].count;c<d;t=c+=1){this.track.seekPoints.push({offset:n,position:r,timestamp:f});s=this.track.sampleSize||this.track.sampleSizes[i++];n+=s;r+=s;f+=this.track.stts[u].duration;if(u+1<this.track.stts.length&&++a===this.track.stts[u].count){a=0;u++}}if(o+1<this.track.stsc.length&&e+1===this.track.stsc[o+1].first){v.push(o++)}else{v.push(void 0)}}return v};u("moov",function(){var e,t,n,r;if(this.mdatOffset!=null){this.stream.seek(this.mdatOffset-8)}r=this.tracks;for(t=0,n=r.length;t<n;t++){e=r[t];if(!(e.type==="soun")){continue}this.track=e;break}if(this.track.type!=="soun"){this.track=null;return this.emit("error","No audio tracks in m4a file.")}this.emit("format",this.track.format);this.emit("duration",this.track.duration/this.track.timeScale*1e3|0);if(this.track.cookie){this.emit("cookie",this.track.cookie)}return this.seekPoints=this.track.seekPoints});a("mdat",function(){var e,t,n,r,i,s,o,u;if(!this.startedData){if(this.mdatOffset==null){this.mdatOffset=this.stream.offset}if(this.tracks.length===0){e=Math.min(this.stream.remainingBytes(),this.len);this.stream.advance(e);this.len-=e;return}this.chunkIndex=0;this.stscIndex=0;this.sampleIndex=0;this.tailOffset=0;this.tailSamples=0;this.startedData=true}if(!this.readChapters){this.readChapters=this.parseChapters();if(this["break"]=!this.readChapters){return}this.stream.seek(this.mdatOffset)}i=this.track.chunkOffsets[this.chunkIndex]+this.tailOffset;n=0;if(!this.stream.available(i-this.stream.offset)){this["break"]=true;return}this.stream.seek(i);while(this.chunkIndex<this.track.chunkOffsets.length){r=this.track.stsc[this.stscIndex].count-this.tailSamples;t=0;for(s=u=0;u<r;s=u+=1){o=this.track.sampleSize||this.track.sampleSizes[this.sampleIndex];if(!this.stream.available(n+o)){break}n+=o;t+=o;this.sampleIndex++}if(s<r){this.tailOffset+=t;this.tailSamples+=s;break}else{this.chunkIndex++;this.tailOffset=0;this.tailSamples=0;if(this.stscIndex+1<this.track.stsc.length&&this.chunkIndex+1===this.track.stsc[this.stscIndex+1].first){this.stscIndex++}if(i+n!==this.track.chunkOffsets[this.chunkIndex]){break}}}if(n>0){this.emit("data",this.stream.readBuffer(n));return this["break"]=this.chunkIndex===this.track.chunkOffsets.length}else{return this["break"]=true}});m.prototype.parseChapters=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h;if(!(((f=this.track.chapterTracks)!=null?f.length:void 0)>0)){return true}t=this.track.chapterTracks[0];l=this.tracks;for(u=0,a=l.length;u<a;u++){o=l[u];if(o.id===t){break}}if(o.id!==t){this.emit("error","Chapter track does not exist.")}if(this.chapters==null){this.chapters=[]}while(this.chapters.length<o.seekPoints.length){i=o.seekPoints[this.chapters.length];if(!this.stream.available(i.position-this.stream.offset+32)){return false}this.stream.seek(i.position);n=this.stream.readUInt16();s=null;if(!this.stream.available(n)){return false}if(n>2){e=this.stream.peekUInt16();if(e===65279||e===65534){s=this.stream.readString(n,"utf16-bom")}}if(s==null){s=this.stream.readString(n,"utf8")}r=(c=(h=o.seekPoints[this.chapters.length+1])!=null?h.timestamp:void 0)!=null?c:o.duration;this.chapters.push({title:s,timestamp:i.timestamp/o.timeScale*1e3|0,duration:(r-i.timestamp)/o.timeScale*1e3|0})}this.emit("chapters",this.chapters);return true};a("moov.udta.meta",function(){this.metadata={};return this.stream.advance(4)});u("moov.udta.meta",function(){return this.emit("metadata",this.metadata)});d=function(e,t,n){return a("moov.udta.meta.ilst."+e+".data",function(){this.stream.advance(8);this.len-=8;return n.call(this,t)})};v=function(e){return this.metadata[e]=this.stream.readString(this.len,"utf8")};d("©alb","album",v);d("©arg","arranger",v);d("©art","artist",v);d("©ART","artist",v);d("aART","albumArtist",v);d("catg","category",v);d("©com","composer",v);d("©cpy","copyright",v);d("cprt","copyright",v);d("©cmt","comments",v);d("©day","releaseDate",v);d("desc","description",v);d("©gen","genre",v);d("©grp","grouping",v);d("©isr","ISRC",v);d("keyw","keywords",v);d("©lab","recordLabel",v);d("ldes","longDescription",v);d("©lyr","lyrics",v);d("©nam","title",v);d("©phg","recordingCopyright",v);d("©prd","producer",v);d("©prf","performers",v);d("purd","purchaseDate",v);d("purl","podcastURL",v);d("©swf","songwriter",v);d("©too","encoder",v);d("©wrt","composer",v);d("covr","coverArt",function(e){return this.metadata[e]=this.stream.readBuffer(this.len)});p=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychadelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Capella","Euro-House","Dance Hall"];d("gnre","genre",function(e){return this.metadata[e]=p[this.stream.readUInt16()-1]});d("tmpo","tempo",function(e){return this.metadata[e]=this.stream.readUInt16()});d("rtng","rating",function(e){var t;t=this.stream.readUInt8();return this.metadata[e]=t===2?"Clean":t!==0?"Explicit":"None"});h=function(e){this.stream.advance(2);this.metadata[e]=this.stream.readUInt16()+" of "+this.stream.readUInt16();return this.stream.advance(this.len-6)};d("disk","diskNumber",h);d("trkn","trackNumber",h);l=function(e){return this.metadata[e]=this.stream.readUInt8()===1};d("cpil","compilation",l);d("pcst","podcast",l);d("pgap","gapless",l);return m}(t.Demuxer);var c,s,n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};c=function(e){function n(){s=n.__super__.constructor.apply(this,arguments);return s}r(n,e);t.Demuxer.register(n);n.probe=function(e){var t;return e.peekString(0,4)==="FORM"&&((t=e.peekString(8,4))==="AIFF"||t==="AIFC")};n.prototype.readChunk=function(){var e,t,n,r;if(!this.readStart&&this.stream.available(12)){if(this.stream.readString(4)!=="FORM"){return this.emit("error","Invalid AIFF.")}this.fileSize=this.stream.readUInt32();this.fileType=this.stream.readString(4);this.readStart=true;if((r=this.fileType)!=="AIFF"&&r!=="AIFC"){return this.emit("error","Invalid AIFF.")}}while(this.stream.available(1)){if(!this.readHeaders&&this.stream.available(8)){this.type=this.stream.readString(4);this.len=this.stream.readUInt32()}switch(this.type){case"COMM":if(!this.stream.available(this.len)){return}this.format={formatID:"lpcm",channelsPerFrame:this.stream.readUInt16(),sampleCount:this.stream.readUInt32(),bitsPerChannel:this.stream.readUInt16(),sampleRate:this.stream.readFloat80(),framesPerPacket:1,littleEndian:false,floatingPoint:false};this.format.bytesPerPacket=this.format.bitsPerChannel/8*this.format.channelsPerFrame;if(this.fileType==="AIFC"){t=this.stream.readString(4);this.format.littleEndian=t==="sowt"&&this.format.bitsPerChannel>8;this.format.floatingPoint=t==="fl32"||t==="fl64";if(t==="twos"||t==="sowt"||t==="fl32"||t==="fl64"||t==="NONE"){t="lpcm"}this.format.formatID=t;this.len-=4}this.stream.advance(this.len-18);this.emit("format",this.format);this.emit("duration",this.format.sampleCount/this.format.sampleRate*1e3|0);break;case"SSND":if(!(this.readSSNDHeader&&this.stream.available(4))){n=this.stream.readUInt32();this.stream.advance(4);this.stream.advance(n);this.readSSNDHeader=true}e=this.stream.readSingleBuffer(this.len);this.len-=e.length;this.readHeaders=this.len>0;this.emit("data",e);break;default:if(!this.stream.available(this.len)){return}this.stream.advance(this.len)}if(this.type!=="SSND"){this.readHeaders=false}}};return n}(t.Demuxer);var h,s,n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};h=function(e){function i(){s=i.__super__.constructor.apply(this,arguments);return s}var n;r(i,e);t.Demuxer.register(i);i.probe=function(e){return e.peekString(0,4)==="RIFF"&&e.peekString(8,4)==="WAVE"};n={1:"lpcm",3:"lpcm",6:"alaw",7:"ulaw"};i.prototype.readChunk=function(){var e,t,r;if(!this.readStart&&this.stream.available(12)){if(this.stream.readString(4)!=="RIFF"){return this.emit("error","Invalid WAV file.")}this.fileSize=this.stream.readUInt32(true);this.readStart=true;if(this.stream.readString(4)!=="WAVE"){return this.emit("error","Invalid WAV file.")}}while(this.stream.available(1)){if(!this.readHeaders&&this.stream.available(8)){this.type=this.stream.readString(4);this.len=this.stream.readUInt32(true)}switch(this.type){case"fmt ":r=this.stream.readUInt16(true);if(!(r in n)){return this.emit("error","Unsupported format in WAV file.")}this.format={formatID:n[r],floatingPoint:r===3,littleEndian:n[r]==="lpcm",channelsPerFrame:this.stream.readUInt16(true),sampleRate:this.stream.readUInt32(true),framesPerPacket:1};this.stream.advance(4);this.stream.advance(2);this.format.bitsPerChannel=this.stream.readUInt16(true);this.format.bytesPerPacket=this.format.bitsPerChannel/8*this.format.channelsPerFrame;this.emit("format",this.format);this.stream.advance(this.len-16);break;case"data":if(!this.sentDuration){t=this.format.bitsPerChannel/8;this.emit("duration",this.len/t/this.format.channelsPerFrame/this.format.sampleRate*1e3|0);this.sentDuration=true}e=this.stream.readSingleBuffer(this.len);this.len-=e.length;this.readHeaders=this.len>0;this.emit("data",e);break;default:if(!this.stream.available(this.len)){return}this.stream.advance(this.len)}if(this.type!=="data"){this.readHeaders=false}}};return i}(t.Demuxer);var p,s,n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};p=function(e){function o(){s=o.__super__.constructor.apply(this,arguments);return s}var n,i;r(o,e);t.Demuxer.register(o);o.probe=function(e){return e.peekString(0,4)===".snd"};n=[8,8,16,24,32,32,64];n[26]=8;i={1:"ulaw",27:"alaw"};o.prototype.readChunk=function(){var e,t,r,s;if(!this.readHeader&&this.stream.available(24)){if(this.stream.readString(4)!==".snd"){return this.emit("error","Invalid AU file.")}s=this.stream.readUInt32();t=this.stream.readUInt32();r=this.stream.readUInt32();this.format={formatID:i[r]||"lpcm",littleEndian:false,floatingPoint:r===6||r===7,bitsPerChannel:n[r-1],sampleRate:this.stream.readUInt32(),channelsPerFrame:this.stream.readUInt32(),framesPerPacket:1};if(this.format.bitsPerChannel==null){return this.emit("error","Unsupported encoding in AU file.")}this.format.bytesPerPacket=this.format.bitsPerChannel/8*this.format.channelsPerFrame;if(t!==4294967295){e=this.format.bitsPerChannel/8;this.emit("duration",t/e/this.format.channelsPerFrame/this.format.sampleRate*1e3|0)}this.emit("format",this.format);this.readHeader=true}if(this.readHeader){while(this.stream.available(1)){this.emit("data",this.stream.readSingleBuffer(this.stream.remainingBytes()))}}};return o}(t.Demuxer);var d,s,u=function(e,t){return function(){return e.apply(t,arguments)}},n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};d=function(e){function n(){this.readChunk=u(this.readChunk,this);s=n.__super__.constructor.apply(this,arguments);return s}r(n,e);t.Decoder.register("lpcm",n);n.prototype.readChunk=function(){var e,t,n,r,i,s,o,u,a,f,l,c;s=this.stream;n=this.format.littleEndian;e=Math.min(4096,s.remainingBytes());i=e/(this.format.bitsPerChannel/8)|0;if(e<this.format.bitsPerChannel/8){return null}if(this.format.floatingPoint){switch(this.format.bitsPerChannel){case 32:r=new Float32Array(i);for(t=o=0;o<i;t=o+=1){r[t]=s.readFloat32(n)}break;case 64:r=new Float64Array(i);for(t=u=0;u<i;t=u+=1){r[t]=s.readFloat64(n)}break;default:throw new Error("Unsupported bit depth.")}}else{switch(this.format.bitsPerChannel){case 8:r=new Int8Array(i);for(t=a=0;a<i;t=a+=1){r[t]=s.readInt8()}break;case 16:r=new Int16Array(i);for(t=f=0;f<i;t=f+=1){r[t]=s.readInt16(n)}break;case 24:r=new Int32Array(i);for(t=l=0;l<i;t=l+=1){r[t]=s.readInt24(n)}break;case 32:r=new Int32Array(i);for(t=c=0;c<i;t=c+=1){r[t]=s.readInt32(n)}break;default:throw new Error("Unsupported bit depth.")}}return r};return n}(t.Decoder);var v,s,u=function(e,t){return function(){return e.apply(t,arguments)}},n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};v=function(e){function l(){this.readChunk=u(this.readChunk,this);s=l.__super__.constructor.apply(this,arguments);return s}var n,i,o,a,f;r(l,e);t.Decoder.register("ulaw",l);t.Decoder.register("alaw",l);f=128;i=15;a=4;o=112;n=132;l.prototype.init=function(){var e,t,r,s,u,l,c;this.format.bitsPerChannel=16;this.table=s=new Int16Array(256);if(this.format.formatID==="ulaw"){for(e=l=0;l<256;e=++l){u=~e;r=((u&i)<<3)+n;r<<=(u&o)>>>a;s[e]=u&f?n-r:r-n}}else{for(e=c=0;c<256;e=++c){u=e^85;r=u&i;t=(u&o)>>>a;if(t){r=r+r+1+32<<t+2}else{r=r+r+1<<3}s[e]=u&f?r:-r}}};l.prototype.readChunk=function(){var e,t,n,r,i,s;r=this.stream,i=this.table;n=Math.min(4096,this.stream.remainingBytes());if(n===0){return}t=new Int16Array(n);for(e=s=0;s<n;e=s+=1){t[e]=i[r.readUInt8()]}return t};return l}(t.Decoder);var n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};t.HTTPSource=function(e){function n(e){this.url=e;this.chunkSize=1<<20;this.inflight=false;this.reset()}r(n,e);n.prototype.start=function(){var e=this;if(this.length){if(!this.inflight){return this.loop()}}this.inflight=true;this.xhr=new XMLHttpRequest;this.xhr.onload=function(t){e.length=parseInt(e.xhr.getResponseHeader("Content-Length"));e.inflight=false;return e.loop()};this.xhr.onerror=function(t){e.pause();return e.emit("error",t)};this.xhr.onabort=function(t){return e.inflight=false};this.xhr.open("HEAD",this.url,true);return this.xhr.send(null)};n.prototype.loop=function(){var e,n=this;if(this.inflight||!this.length){return this.emit("error","Something is wrong in HTTPSource.loop")}this.inflight=true;this.xhr=new XMLHttpRequest;this.xhr.onload=function(e){var r,i,s,o,u,a;if(n.xhr.response){r=new Uint8Array(n.xhr.response)}else{o=n.xhr.responseText;r=new Uint8Array(o.length);for(s=u=0,a=o.length;0<=a?u<a:u>a;s=0<=a?++u:--u){r[s]=o.charCodeAt(s)&255}}i=new t.Buffer(r);n.offset+=i.length;n.emit("data",i);if(n.offset>=n.length){n.emit("end")}n.inflight=false;if(!(n.offset>=n.length)){return n.loop()}};this.xhr.onprogress=function(e){return n.emit("progress",(n.offset+e.loaded)/n.length*100)};this.xhr.onerror=function(e){n.emit("error",e);return n.pause()};this.xhr.onabort=function(e){return n.inflight=false};this.xhr.open("GET",this.url,true);this.xhr.responseType="arraybuffer";e=Math.min(this.offset+this.chunkSize,this.length);this.xhr.setRequestHeader("Range","bytes="+this.offset+"-"+e);this.xhr.overrideMimeType("text/plain; charset=x-user-defined");return this.xhr.send(null)};n.prototype.pause=function(){var e;this.inflight=false;return(e=this.xhr)!=null?e.abort():void 0};n.prototype.reset=function(){this.pause();return this.offset=0};return n}(t.EventEmitter);var n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};t.FileSource=function(e){function n(e){this.file=e;if(typeof FileReader==="undefined"||FileReader===null){return this.emit("error","This browser does not have FileReader support.")}this.offset=0;this.length=this.file.size;this.chunkSize=1<<20;this.file[this.slice="slice"]||this.file[this.slice="webkitSlice"]||this.file[this.slice="mozSlice"]}r(n,e);n.prototype.start=function(){var e=this;if(this.reader){if(!this.active){return this.loop()}}this.reader=new FileReader;this.active=true;this.reader.onload=function(n){var r;r=new t.Buffer(new Uint8Array(n.target.result));e.offset+=r.length;e.emit("data",r);e.active=false;if(e.offset<e.length){return e.loop()}};this.reader.onloadend=function(){if(e.offset===e.length){e.emit("end");return e.reader=null}};this.reader.onerror=function(t){return e.emit("error",t)};this.reader.onprogress=function(t){return e.emit("progress",(e.offset+t.loaded)/e.length*100)};return this.loop()};n.prototype.loop=function(){var e,t;this.active=true;t=Math.min(this.offset+this.chunkSize,this.length);e=this.file[this.slice](this.offset,t);return this.reader.readAsArrayBuffer(e)};n.prototype.pause=function(){var e;this.active=false;return(e=this.reader)!=null?e.abort():void 0};n.prototype.reset=function(){this.pause();return this.offset=0};return n}(t.EventEmitter);m.prototype.initialize=function(){if(this.fromSampleRate>0&&this.toSampleRate>0&&this.channels>0){if(this.fromSampleRate==this.toSampleRate){this.resampler=this.bypassResampler;this.ratioWeight=1}else{if(this.fromSampleRate<this.toSampleRate){this.compileLinearInterpolationFunction();this.lastWeight=1}else{this.compileMultiTapFunction();this.tailExists=false;this.lastWeight=0}this.ratioWeight=this.fromSampleRate/this.toSampleRate;this.initializeBuffers()}}else{throw new Error("Invalid settings specified for the resampler.")}};m.prototype.compileLinearInterpolationFunction=function(){var e="var bufferLength = buffer.length;  var outLength = this.outputBufferSize;  if ((bufferLength % "+this.channels+") == 0) {    if (bufferLength > 0) {     var ratioWeight = this.ratioWeight;     var weight = this.lastWeight;     var firstWeight = 0;      var secondWeight = 0;     var sourceOffset = 0;     var outputOffset = 0;     var outputBuffer = this.outputBuffer;     for (; weight < 1; weight += ratioWeight) {       secondWeight = weight % 1;        firstWeight = 1 - secondWeight;";for(var t=0;t<this.channels;++t){e+="outputBuffer[outputOffset++] = (this.lastOutput["+t+"] * firstWeight) + (buffer["+t+"] * secondWeight);"}e+="}      weight -= 1;      for (bufferLength -= "+this.channels+", sourceOffset = Math.floor(weight) * "+this.channels+"; outputOffset < outLength && sourceOffset < bufferLength;) {        secondWeight = weight % 1;        firstWeight = 1 - secondWeight;";for(var t=0;t<this.channels;++t){e+="outputBuffer[outputOffset++] = (buffer[sourceOffset"+(t>0?" + "+t:"")+"] * firstWeight) + (buffer[sourceOffset + "+(this.channels+t)+"] * secondWeight);"}e+="weight += ratioWeight;        sourceOffset = Math.floor(weight) * "+this.channels+";      }";for(var t=0;t<this.channels;++t){e+="this.lastOutput["+t+"] = buffer[sourceOffset++];"}e+='this.lastWeight = weight % 1;     return this.bufferSlice(outputOffset);    }   else {      return (this.noReturn) ? 0 : [];    } } else {    throw(new Error("Buffer was of incorrect sample length.")); }';this.resampler=Function("buffer",e)};m.prototype.compileMultiTapFunction=function(){var e="var bufferLength = buffer.length; var outLength = this.outputBufferSize;  if ((bufferLength % "+this.channels+") == 0) {    if (bufferLength > 0) {     var ratioWeight = this.ratioWeight;     var weight = 0;";for(var t=0;t<this.channels;++t){e+="var output"+t+" = 0;"}e+="var actualPosition = 0;     var amountToNext = 0;     var alreadyProcessedTail = !this.tailExists;      this.tailExists = false;      var outputBuffer = this.outputBuffer;     var outputOffset = 0;     var currentPosition = 0;      do {        if (alreadyProcessedTail) {         weight = ratioWeight;";for(t=0;t<this.channels;++t){e+="output"+t+" = 0;"}e+="}       else {          weight = this.lastWeight;";for(t=0;t<this.channels;++t){e+="output"+t+" = this.lastOutput["+t+"];"}e+="alreadyProcessedTail = true;       }       while (weight > 0 && actualPosition < bufferLength) {         amountToNext = 1 + actualPosition - currentPosition;          if (weight >= amountToNext) {";for(t=0;t<this.channels;++t){e+="output"+t+" += buffer[actualPosition++] * amountToNext;"}e+="currentPosition = actualPosition;            weight -= amountToNext;         }         else {";for(t=0;t<this.channels;++t){e+="output"+t+" += buffer[actualPosition"+(t>0?" + "+t:"")+"] * weight;"}e+="currentPosition += weight;            weight = 0;           break;          }       }       if (weight == 0) {";for(t=0;t<this.channels;++t){e+="outputBuffer[outputOffset++] = output"+t+" / ratioWeight;"}e+="}       else {          this.lastWeight = weight;";for(t=0;t<this.channels;++t){e+="this.lastOutput["+t+"] = output"+t+";"}e+='this.tailExists = true;          break;        }     } while (actualPosition < bufferLength && outputOffset < outLength);      return this.bufferSlice(outputOffset);    }   else {      return (this.noReturn) ? 0 : [];    } } else {    throw(new Error("Buffer was of incorrect sample length.")); }';this.resampler=Function("buffer",e)};m.prototype.bypassResampler=function(e){if(this.noReturn){this.outputBuffer=e;return e.length}else{return e}};m.prototype.bufferSlice=function(e){if(this.noReturn){return e}else{try{return this.outputBuffer.subarray(0,e)}catch(t){try{this.outputBuffer.length=e;return this.outputBuffer}catch(t){return this.outputBuffer.slice(0,e)}}}};m.prototype.initializeBuffers=function(){try{this.outputBuffer=new Float32Array(this.outputBufferSize);this.lastOutput=new Float32Array(this.channels)}catch(e){this.outputBuffer=[];this.lastOutput=[]}};var g,u=function(e,t){return function(){return e.apply(t,arguments)}},n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};g=function(n){function a(e,t){this.sampleRate=e;this.channels=t;this.refill=u(this.refill,this);this.context=o!=null?o:o=new i;this.deviceSampleRate=this.context.sampleRate;this.bufferSize=Math.ceil(4096/(this.deviceSampleRate/this.sampleRate)*this.channels);this.bufferSize+=this.bufferSize%this.channels;if(this.deviceSampleRate!==this.sampleRate){this.resampler=new m(this.sampleRate,this.deviceSampleRate,this.channels,4096*this.channels)}this.node=this.context[s](4096,this.channels,this.channels);this.node.onaudioprocess=this.refill;this.node.connect(this.context.destination)}var i,s,o;r(a,n);t.AudioDevice.register(a);i=e.AudioContext||e.webkitAudioContext;a.supported=i&&(typeof i.prototype[s="createScriptProcessor"]==="function"||typeof i.prototype[s="createJavaScriptNode"]==="function");o=null;a.prototype.refill=function(e){var t,n,r,i,s,o,u,a,f,l;o=e.outputBuffer;t=o.numberOfChannels;n=new Array(t);for(i=u=0;u<t;i=u+=1){n[i]=o.getChannelData(i)}r=new Float32Array(this.bufferSize);this.emit("refill",r);if(this.resampler){r=this.resampler.resampler(r)}for(i=a=0,l=o.length;a<l;i=a+=1){for(s=f=0;f<t;s=f+=1){n[s][i]=r[i*t+s]}}};a.prototype.destroy=function(){return this.node.disconnect(0)};a.prototype.getDeviceTime=function(){return this.context.currentTime*this.sampleRate};return a}(t.EventEmitter);var y,u=function(e,t){return function(){return e.apply(t,arguments)}},n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var r in t){if(n.call(t,r))e[r]=t[r]}i.prototype=t.prototype;e.prototype=new i;e.__super__=t.prototype;return e};y=function(e){function s(e,t){this.sampleRate=e;this.channels=t;this.refill=u(this.refill,this);this.audio=new Audio;this.audio.mozSetup(this.channels,this.sampleRate);this.writePosition=0;this.prebufferSize=this.sampleRate/2;this.tail=null;this.timer=n(this.refill,100)}var n,i;r(s,e);t.AudioDevice.register(s);s.supported=typeof Audio!=="undefined"&&Audio!==null&&"mozWriteAudio"in new Audio;s.prototype.refill=function(){var e,t,n,r;if(this.tail){r=this.audio.mozWriteAudio(this.tail);this.writePosition+=r;if(this.writePosition<this.tail.length){this.tail=this.tail.subarray(r)}else{this.tail=null}}n=this.audio.mozCurrentSampleOffset();e=n+this.prebufferSize-this.writePosition;if(e>0){t=new Float32Array(e);this.emit("refill",t);r=this.audio.mozWriteAudio(t);if(r<t.length){this.tail=t.subarray(r)}this.writePosition+=r}};s.prototype.destroy=function(){return i(this.timer)};s.prototype.getDeviceTime=function(){return this.audio.mozCurrentSampleOffset()/this.channels};n=function(e,n){var r,i;r=t.Buffer.makeBlobURL("setInterval(function() { postMessage('ping'); }, "+n+");");if(r==null){return setInterval(e,n)}i=new Worker(r);i.onmessage=e;i.url=r;return i};i=function(e){if(e.terminate){e.terminate();return URL.revokeObjectURL(e.url)}else{return clearInterval(e)}};return s}(t.EventEmitter);const b=["latin1","utf16-bom","utf16-be","utf8"];var w=t.Base.extend({constructor:function(e,t){this.header=e;this.stream=t;this.offset=0},read:function(){if(!this.data){this.data={};var e;while(e=this.readFrame()){if(e.key in this.data){if(!Array.isArray(this.data[e.key]))this.data[e.key]=[this.data[e.key]];this.data[e.key].push(e.value)}else{this.data[e.key]=e.value}}}return this.data},readFrame:function(){if(this.offset>=this.header.length)return null;var e=this.readHeader();var t=e.identifier;if(e.identifier.charCodeAt(0)===0){this.offset+=this.header.length+1;return null}if(!this.frameTypes[t]){for(var n in this.map){if(this.map[n].indexOf(t)!==-1){t=n;break}}}if(this.frameTypes[t]){var r=this.decodeFrame(e,this.frameTypes[t]),i=Object.keys(r);if(i.length===1)r=r[i[0]];var s={value:r}}else{var s={value:this.stream.readBuffer(Math.min(e.length,this.header.length-this.offset))}}s.key=this.names[e.identifier]?this.names[e.identifier]:e.identifier;if(s.key==="coverArt")s.value=s.value.data;this.offset+=10+e.length;return s},decodeFrame:function(e,t){var n=this.stream,r=n.offset;var i=0,s={};var o=Object.keys(t).length,u=0;for(var a in t){var f=t[a];var l=e.length-(n.offset-r);u++;switch(a){case"encoding":i=n.readUInt8();continue;case"language":s.language=n.readString(3);continue}switch(f){case"latin1":s[a]=n.readString(u===o?l:null,"latin1");break;case"string":s[a]=n.readString(u===o?l:null,b[i]);break;case"binary":s[a]=n.readBuffer(l);break;case"int16":s[a]=n.readInt16();break;case"int8":s[a]=n.readInt8();break;case"int24":s[a]=n.readInt24();break;case"int32":s[a]=n.readInt32();break;case"int32+":s[a]=n.readInt32();if(l>4)throw new Error("Seriously dude? Stop playing this song and get a life!");break;case"date":var c=n.readString(8);s[a]=new Date(c.slice(0,4),c.slice(4,6)-1,c.slice(6,8));break;case"frame_id":s[a]=n.readString(4);break;default:throw new Error("Unknown key type "+f)}}var l=e.length-(n.offset-r);if(l>0)n.advance(l);return s}});var E=w.extend({readHeader:function(){var e=this.stream.readString(4);var t=0;if(this.header.major===4){for(var n=0;n<4;n++)t=(t<<7)+(this.stream.readUInt8()&127)}else{t=this.stream.readUInt32()}return{identifier:e,length:t,flags:this.stream.readUInt16()}},map:{text:["TIT1","TIT2","TIT3","TALB","TOAL","TRCK","TPOS","TSST","TSRC","TPE1","TPE2","TPE3","TPE4","TOPE","TEXT","TOLY","TCOM","TMCL","TIPL","TENC","TBPM","TLEN","TKEY","TLAN","TCON","TFLT","TMED","TMOO","TCOP","TPRO","TPUB","TOWN","TRSN","TRSO","TOFN","TDLY","TDEN","TDOR","TDRC","TDRL","TDTG","TSSE","TSOA","TSOP","TSOT","TDAT","TIME","TORY","TRDA","TSIZ","TYER","TCMP","TSO2","TSOC"],url:["WCOM","WCOP","WOAF","WOAR","WOAS","WORS","WPAY","WPUB"]},frameTypes:{text:{encoding:1,value:"string"},url:{value:"latin1"},TXXX:{encoding:1,description:"string",value:"string"},WXXX:{encoding:1,description:"string",value:"latin1"},USLT:{encoding:1,language:1,description:"string",value:"string"},COMM:{encoding:1,language:1,description:"string",value:"string"},APIC:{encoding:1,mime:"latin1",type:"int8",description:"string",data:"binary"},UFID:{owner:"latin1",identifier:"binary"},MCDI:{value:"binary"},PRIV:{owner:"latin1",value:"binary"},GEOB:{encoding:1,mime:"latin1",filename:"string",description:"string",data:"binary"},PCNT:{value:"int32+"},POPM:{email:"latin1",rating:"int8",counter:"int32+"},AENC:{owner:"latin1",previewStart:"int16",previewLength:"int16",encryptionInfo:"binary"},ETCO:{format:"int8",data:"binary"},MLLT:{framesBetweenReference:"int16",bytesBetweenReference:"int24",millisecondsBetweenReference:"int24",bitsForBytesDeviation:"int8",bitsForMillisecondsDev:"int8",data:"binary"},SYTC:{format:"int8",tempoData:"binary"},SYLT:{encoding:1,language:1,format:"int8",contentType:"int8",description:"string",data:"binary"},RVA2:{identification:"latin1",data:"binary"},EQU2:{interpolationMethod:"int8",identification:"latin1",data:"binary"},RVRB:{left:"int16",right:"int16",bouncesLeft:"int8",bouncesRight:"int8",feedbackLL:"int8",feedbackLR:"int8",feedbackRR:"int8",feedbackRL:"int8",premixLR:"int8",premixRL:"int8"},RBUF:{size:"int24",flag:"int8",offset:"int32"},LINK:{identifier:"frame_id",url:"latin1",data:"binary"},POSS:{format:"int8",position:"binary"},USER:{encoding:1,language:1,value:"string"},OWNE:{encoding:1,price:"latin1",purchaseDate:"date",seller:"string"},COMR:{encoding:1,price:"latin1",validUntil:"date",contactURL:"latin1",receivedAs:"int8",seller:"string",description:"string",logoMime:"latin1",logo:"binary"},ENCR:{owner:"latin1",methodSymbol:"int8",data:"binary"},GRID:{owner:"latin1",groupSymbol:"int8",data:"binary"},SIGN:{groupSymbol:"int8",signature:"binary"},SEEK:{value:"int32"},ASPI:{dataStart:"int32",dataLength:"int32",numPoints:"int16",bitsPerPoint:"int8",data:"binary"},IPLS:{encoding:1,value:"string"},RVAD:{adjustment:"int8",bits:"int8",data:"binary"},EQUA:{adjustmentBits:"int8",data:"binary"}},names:{TIT1:"grouping",TIT2:"title",TIT3:"subtitle",TALB:"album",TOAL:"originalAlbumTitle",TRCK:"trackNumber",TPOS:"diskNumber",TSST:"setSubtitle",TSRC:"ISRC",TPE1:"artist",TPE2:"albumArtist",TPE3:"conductor",TPE4:"modifiedBy",TOPE:"originalArtist",TEXT:"lyricist",TOLY:"originalLyricist",TCOM:"composer",TMCL:"musicianCreditsList",TIPL:"involvedPeopleList",TENC:"encodedBy",TBPM:"tempo",TLEN:"length",TKEY:"initialKey",TLAN:"language",TCON:"genre",TFLT:"fileType",TMED:"mediaType",TMOO:"mood",TCOP:"copyright",TPRO:"producedNotice",TPUB:"publisher",TOWN:"fileOwner",TRSN:"internetRadioStationName",TRSO:"internetRadioStationOwner",TOFN:"originalFilename",TDLY:"playlistDelay",TDEN:"encodingTime",TDOR:"originalReleaseTime",TDRC:"recordingTime",TDRL:"releaseTime",TDTG:"taggingTime",TSSE:"encodedWith",TSOA:"albumSortOrder",TSOP:"performerSortOrder",TSOT:"titleSortOrder",TXXX:"userText",USLT:"lyrics",APIC:"coverArt",UFID:"uniqueIdentifier",MCDI:"CDIdentifier",COMM:"comments",WCOM:"commercialInformation",WCOP:"copyrightInformation",WOAF:"officialAudioFileWebpage",WOAR:"officialArtistWebpage",WOAS:"officialAudioSourceWebpage",WORS:"officialInternetRadioStationHomepage",WPAY:"payment",WPUB:"officialPublisherWebpage",WXXX:"url",PRIV:"private",GEOB:"generalEncapsulatedObject",PCNT:"playCount",POPM:"rating",AENC:"audioEncryption",ETCO:"eventTimingCodes",MLLT:"MPEGLocationLookupTable",SYTC:"synchronisedTempoCodes",SYLT:"synchronisedLyrics",RVA2:"volumeAdjustment",EQU2:"equalization",RVRB:"reverb",RBUF:"recommendedBufferSize",LINK:"link",POSS:"positionSynchronisation",USER:"termsOfUse",OWNE:"ownership",COMR:"commercial",ENCR:"encryption",GRID:"groupIdentifier",SIGN:"signature",SEEK:"seek",ASPI:"audioSeekPointIndex",TDAT:"date",TIME:"time",TORY:"originalReleaseYear",TRDA:"recordingDates",TSIZ:"size",TYER:"year",IPLS:"involvedPeopleList",RVAD:"volumeAdjustment",EQUA:"equalization",TCMP:"compilation",TSO2:"albumArtistSortOrder",TSOC:"composerSortOrder"}});var S=E.extend({readHeader:function(){var e=this.stream.readString(3);if(this.frameReplacements[e]&&!this.frameTypes[e])this.frameTypes[e]=this.frameReplacements[e];return{identifier:this.replacements[e]||e,length:this.stream.readUInt24()}},replacements:{UFI:"UFID",TT1:"TIT1",TT2:"TIT2",TT3:"TIT3",TP1:"TPE1",TP2:"TPE2",TP3:"TPE3",TP4:"TPE4",TCM:"TCOM",TXT:"TEXT",TLA:"TLAN",TCO:"TCON",TAL:"TALB",TPA:"TPOS",TRK:"TRCK",TRC:"TSRC",TYE:"TYER",TDA:"TDAT",TIM:"TIME",TRD:"TRDA",TMT:"TMED",TFT:"TFLT",TBP:"TBPM",TCR:"TCOP",TPB:"TPUB",TEN:"TENC",TSS:"TSSE",TOF:"TOFN",TLE:"TLEN",TSI:"TSIZ",TDY:"TDLY",TKE:"TKEY",TOT:"TOAL",TOA:"TOPE",TOL:"TOLY",TOR:"TORY",TXX:"TXXX",WAF:"WOAF",WAR:"WOAR",WAS:"WOAS",WCM:"WCOM",WCP:"WCOP",WPB:"WPUB",WXX:"WXXX",IPL:"IPLS",MCI:"MCDI",ETC:"ETCO",MLL:"MLLT",STC:"SYTC",ULT:"USLT",SLT:"SYLT",COM:"COMM",RVA:"RVAD",EQU:"EQUA",REV:"RVRB",GEO:"GEOB",CNT:"PCNT",POP:"POPM",BUF:"RBUF",CRA:"AENC",LNK:"LINK",TST:"TSOT",TSP:"TSOP",TSA:"TSOA",TCP:"TCMP",TS2:"TSO2",TSC:"TSOC"},frameReplacements:{PIC:{encoding:1,format:"int24",type:"int8",description:"string",data:"binary"},CRM:{owner:"latin1",description:"latin1",data:"binary"}}});var x=t.Demuxer.extend(function(){t.Demuxer.register(this);this.probe=function(e){var n=e.offset;var r=x.getID3v2Header(e);if(r)e.advance(10+r.length);var i=new T(new t.Bitstream(e));var s=null;try{s=D.decode(i)}catch(o){}e.seek(n);return!!s};this.getID3v2Header=function(e){if(e.peekString(0,3)=="ID3"){e=t.Stream.fromBuffer(e.peekBuffer(0,10));e.advance(3);var n=e.readUInt8();var r=e.readUInt8();var i=e.readUInt8();var s=e.readBuffer(4).data;var o=s[0]<<21|s[1]<<14|s[2]<<7|s[3];return{version:"2."+n+"."+r,major:n,minor:r,flags:i,length:o}}return null};const e=[[32,17],[17,9]];this.prototype.parseDuration=function(t){var n=this.stream;var r;var i=n.offset;if(!t||t.layer!==3)return false;n.advance(e[t.flags&k.LSF_EXT?1:0][t.nchannels()===1?1:0]);var s=n.readString(4);if(s==="Xing"||s==="Info"){var o=n.readUInt32();if(o&1)r=n.readUInt32();if(o&2)var u=n.readUInt32();if(o&4&&r&&u){for(var a=0;a<100;a++){var f=n.readUInt8();var l=f/256*u|0;var c=a/100*r*t.nbsamples()*32|0;this.addSeekPoint(l,c)}}if(o&8)n.advance(4)}else{n.seek(i+4+32);s=n.readString(4);if(s=="VBRI"&&n.readUInt16()===1){n.advance(4);n.advance(4);r=n.readUInt32();var h=n.readUInt16();var p=n.readUInt16();var d=n.readUInt16();var v=n.readUInt16();var m="readUInt"+d*8;var l=0;for(var a=0;a<h;a++){this.addSeekPoint(l,v*a);l+=n[m]()}}}if(!r)return false;this.emit("duration",r*t.nbsamples()*32/t.samplerate*1e3|0);return true};this.prototype.readChunk=function(){var e=this.stream;if(!this.sentInfo){var n=x.getID3v2Header(e);if(n){e.advance(10);if(n.major>2){var r=new E(n,e)}else{var r=new S(n,e)}this.emit("metadata",r.read())}var i=e.offset;var s=new T(new t.Bitstream(e));var o=D.decode(s);if(!o)return this.emit("error","Could not find first frame.");this.emit("format",{formatID:"mp3",sampleRate:o.samplerate,channelsPerFrame:o.nchannels(),bitrate:o.bitrate,floatingPoint:true});var u=this.parseDuration(o);e.advance(i-e.offset);this.dataSize=0;if(!u){this.on("end",function(){this.emit("duration",this.dataSize*8/o.bitrate*1e3|0)})}this.sentInfo=true}while(e.available(1)){var a=e.readSingleBuffer(e.remainingBytes());this.dataSize+=a.length;this.emit("data",a)}}});T.prototype.getU8=function(e){var t=this.stream.stream;return t.peekUInt8(e-t.offset)};T.prototype.nextByte=function(){var e=this.stream;return e.bitPosition===0?e.stream.offset:e.stream.offset+1};T.prototype.doSync=function(){var e=this.stream.stream;this.align();while(this.available(16)&&!(e.peekUInt8(0)===255&&(e.peekUInt8(1)&224)===224)){this.advance(8)}if(!this.available(M))return false;return true};T.prototype.reset=function(e){this.seek(e*8);this.next_frame=e;this.sync=true};const N=[[0,32e3,64e3,96e3,128e3,16e4,192e3,224e3,256e3,288e3,32e4,352e3,384e3,416e3,448e3],[0,32e3,48e3,56e3,64e3,8e4,96e3,112e3,128e3,16e4,192e3,224e3,256e3,32e4,384e3],[0,32e3,4e4,48e3,56e3,64e3,8e4,96e3,112e3,128e3,16e4,192e3,224e3,256e3,32e4],[0,32e3,48e3,56e3,64e3,8e4,96e3,112e3,128e3,144e3,16e4,176e3,192e3,224e3,256e3],[0,8e3,16e3,24e3,32e3,4e4,48e3,56e3,64e3,8e4,96e3,112e3,128e3,144e3,16e4]];const C=[44100,48e3,32e3];const k={NPRIVATE_III:7,INCOMPLETE:8,PROTECTION:16,COPYRIGHT:32,ORIGINAL:64,PADDING:128,I_STEREO:256,MS_STEREO:512,FREEFORMAT:1024,LSF_EXT:4096,MC_EXT:8192,MPEG_2_5_EXT:16384};const L={HEADER:256,III:31};const A={SINGLE_CHANNEL:0,DUAL_CHANNEL:1,JOINT_STEREO:2,STEREO:3};const O={NONE:0,_50_15_US:1,CCITT_J_17:3,RESERVED:2};const M=8;const _=511+2048+M;D.prototype.copy=function(){var e=new D;var t=Object.keys(this);for(var n in t){e[n]=this[n]}return e};D.prototype.nchannels=function(){return this.mode===0?1:2};D.prototype.nbsamples=function(){return this.layer===1?12:this.layer===3&&this.flags&k.LSF_EXT?18:36};D.prototype.framesize=function(){if(this.bitrate===0)return null;var e=this.flags&k.PADDING?1:0;switch(this.layer){case 1:var t=this.bitrate*12/this.samplerate|0;return(t+e)*4;case 2:var t=this.bitrate*144/this.samplerate|0;return t+e;case 3:default:var n=this.flags&k.LSF_EXT?1:0;var t=this.bitrate*144/(this.samplerate<<n)|0;return t+e}};D.prototype.decode=function(e){this.flags=0;this.private_bits=0;e.advance(11);if(e.read(1)===0)this.flags|=k.MPEG_2_5_EXT;if(e.read(1)===0){this.flags|=k.LSF_EXT}else if(this.flags&k.MPEG_2_5_EXT){throw new t.UnderflowError}this.layer=4-e.read(2);if(this.layer===4)throw new Error("Invalid layer");if(e.read(1)===0)this.flags|=k.PROTECTION;var n=e.read(4);if(n===15)throw new Error("Invalid bitrate");if(this.flags&k.LSF_EXT){this.bitrate=N[3+(this.layer>>1)][n]}else{this.bitrate=N[this.layer-1][n]}n=e.read(2);if(n===3)throw new Error("Invalid sampling frequency");this.samplerate=C[n];if(this.flags&k.LSF_EXT){this.samplerate/=2;if(this.flags&k.MPEG_2_5_EXT)this.samplerate/=2}if(e.read(1))this.flags|=k.PADDING;if(e.read(1))this.private_bits|=L.HEADER;this.mode=3-e.read(2);this.mode_extension=e.read(2);if(e.read(1))this.flags|=k.COPYRIGHT;if(e.read(1))this.flags|=k.ORIGINAL;this.emphasis=e.read(2);if(this.flags&k.PROTECTION)this.crc_target=e.read(16)};D.decode=function(e){var n=e.next_frame;var r=true;var i=null;while(r){r=false;if(e.sync){if(!e.available(M)){e.next_frame=n;throw new t.UnderflowError}else if(!(e.getU8(n)===255&&(e.getU8(n+1)&224)===224)){e.this_frame=n;e.next_frame=n+1;throw new t.UnderflowError}}else{e.seek(n*8);if(!e.doSync())throw new t.UnderflowError;n=e.nextByte()}e.this_frame=n;e.next_frame=n+1;e.seek(e.this_frame*8);i=new D;i.decode(e);if(i.bitrate===0){if(e.freerate===0||!e.sync||i.layer===3&&e.freerate>64e4)D.free_bitrate(e,i);i.bitrate=e.freerate;i.flags|=k.FREEFORMAT}var s=i.flags&k.PADDING?1:0;if(i.layer===1){var o=((12*i.bitrate/i.samplerate<<0)+s)*4}else{var u=i.layer===3&&i.flags&k.LSF_EXT?72:144;var o=(u*i.bitrate/i.samplerate<<0)+s}if(!e.available(o+M)){e.next_frame=e.this_frame;throw new t.UnderflowError}e.next_frame=e.this_frame+o;if(!e.sync){n=e.next_frame;if(!(e.getU8(n)===255&&(e.getU8(n+1)&224)===224)){n=e.next_frame=e.this_frame+1;r=true;continue}e.sync=true}}i.flags|=k.INCOMPLETE;return i};D.free_bitrate=function(e,n){var r=n.flags&k.PADDING?1:0,i=n.layer===3&&n.flags&k.LSF_EXT?72:144;var s=e.offset();var o=0;while(e.doSync()){var u=n.copy();var a=e.copy();if(u.decode(a)&&u.layer===n.layer&&u.samplerate===n.samplerate){var f=e.nextByte()-e.this_frame;if(n.layer===1){o=n.samplerate*(f-4*r+4)/48/1e3|0}else{o=n.samplerate*(f-r+1)/i/1e3|0}if(o>=8)break}e.advance(8)}e.seek(s);if(o<8||n.layer===3&&o>640)throw new t.UnderflowError;e.freerate=o*1e3};P.layers=[];P.prototype.decode=function(e){if(!this.header||!(this.header.flags&k.INCOMPLETE))this.header=D.decode(e);this.header.flags&=~k.INCOMPLETE;var t=this.decoders[this.header.layer-1];if(!t){var n=P.layers[this.header.layer];if(!n)throw new Error("Layer "+this.header.layer+" is not supported.");t=this.decoders[this.header.layer-1]=new n}t.decode(e,this)};const j=.998795456;const F=.995184727;const I=.98917651;const q=.98078528;const R=.970031253;const U=.956940336;const z=.941544065;const W=.923879533;const X=.903989293;const V=.881921264;const $=.85772861;const J=.831469612;const K=.803207531;const Q=.773010453;const G=.740951125;const Y=.707106781;const Z=.671558955;const et=.634393284;const tt=.595699304;const nt=.555570233;const rt=.514102744;const it=.471396737;const st=.427555093;const ot=.382683432;const ut=.336889853;const at=.290284677;const ft=.24298018;const lt=.195090322;const ct=.146730474;const ht=.09801714;const pt=.049067674;B.dct32=function(e,t,n,r){var i,s,o,u,a,f,l,c;var h,p,d,v,m,g,y,b;var w,E,S,x,T,N,C,k;var L,A,O,M,_,D,P,H;var B,dt,vt,mt,gt,yt,bt,wt;var Et,St,xt,Tt,Nt,Ct,kt,Lt;var At,Ot,Mt,_t,Dt,Pt,Ht,Bt;var jt,Ft,It,qt,Rt,Ut,zt,Wt;var Xt,Vt,$t,Jt,Kt,Qt,Gt,Yt;var Zt,en,tn,nn,rn,sn,on,un;var an,fn,ln,cn,hn,pn,dn,vn;var mn,gn,yn,bn,wn,En,Sn,xn;var Tn,Nn,Cn,kn,Ln,An,On,Mn;var _n,Dn,Pn,Hn,Bn,jn,Fn,In;var qn,Rn,Un,zn,Wn,Xn,Vn,$n;var Jn,Kn,Qn,Gn,Yn,Zn,er,tr;var nr,rr,ir,sr,or,ur,ar,fr;var lr,cr,hr,pr,dr,vr,mr,gr;var yr,br,wr,Er,Sr,xr,Tr,Nr;var Cr,kr,Lr,Ar,Or,Mr,_r,Dr;var Pr,Hr,Br,jr,Fr,Ir,qr,Rr;var Ur,zr,Wr,Xr,Vr,$r,Jr,Kr;var Qr;i=e[0]+e[31];w=(e[0]-e[31])*j;s=e[15]+e[16];E=(e[15]-e[16])*pt;St=w+E;qt=(w-E)*F;dt=i+s;Mt=(i-s)*F;o=e[7]+e[24];S=(e[7]-e[24])*G;u=e[8]+e[23];x=(e[8]-e[23])*Z;xt=S+x;Rt=(S-x)*ht;vt=o+u;_t=(o-u)*ht;a=e[3]+e[28];T=(e[3]-e[28])*z;f=e[12]+e[19];N=(e[12]-e[19])*ut;Tt=T+N;Ut=(T-N)*Q;mt=a+f;Dt=(a-f)*Q;l=e[4]+e[27];C=(e[4]-e[27])*X;c=e[11]+e[20];k=(e[11]-e[20])*st;Nt=C+k;zt=(C-k)*et;gt=l+c;Pt=(l-c)*et;h=e[1]+e[30];L=(e[1]-e[30])*I;p=e[14]+e[17];A=(e[14]-e[17])*ct;Ct=L+A;Wt=(L-A)*U;yt=h+p;Ht=(h-p)*U;d=e[6]+e[25];O=(e[6]-e[25])*K;v=e[9]+e[22];M=(e[9]-e[22])*tt;kt=O+M;Xt=(O-M)*at;bt=d+v;Bt=(d-v)*at;m=e[2]+e[29];_=(e[2]-e[29])*R;g=e[13]+e[18];D=(e[13]-e[18])*ft;Lt=_+D;Vt=(_-D)*V;wt=m+g;jt=(m-g)*V;y=e[5]+e[26];P=(e[5]-e[26])*$;b=e[10]+e[21];H=(e[10]-e[21])*rt;At=P+H;$t=(P-H)*it;Et=y+b;Ft=(y-b)*it;Qt=dt+vt;gn=(dt-vt)*q;Gt=mt+gt;yn=(mt-gt)*lt;Yt=yt+bt;bn=(yt-bt)*J;Zt=wt+Et;wn=(wt-Et)*nt;en=St+xt;Sn=(St-xt)*q;tn=Tt+Nt;xn=(Tt-Nt)*lt;nn=Ct+kt;Tn=(Ct-kt)*J;rn=Lt+At;Nn=(Lt-At)*nt;on=Mt+_t;Ln=(Mt-_t)*q;un=Dt+Pt;An=(Dt-Pt)*lt;an=Ht+Bt;On=(Ht-Bt)*J;fn=jt+Ft;Mn=(jt-Ft)*nt;cn=qt+Rt;Pn=(qt-Rt)*q;hn=Ut+zt;Hn=(Ut-zt)*lt;pn=Wt+Xt;Bn=(Wt-Xt)*J;dn=Vt+$t;jn=(Vt-$t)*nt;Rn=Qt+Gt;Un=Yt+Zt;r[15][t]=Rn+Un;n[0][t]=(Rn-Un)*Y;zn=en+tn;Wn=nn+rn;B=zn+Wn;r[14][t]=B;Vn=on+un;$n=an+fn;It=Vn+$n;r[13][t]=It;Kn=cn+hn;Qn=pn+dn;Jt=Kn+Qn;Ot=Jt*2-B;r[12][t]=Ot;Zn=gn+yn;er=bn+wn;En=Zn+er;r[11][t]=En;nr=Sn+xn;rr=Tn+Nn;Cn=nr+rr;Kt=Cn*2-Ot;r[10][t]=Kt;or=Ln+An;ur=On+Mn;_n=or+ur;ln=_n*2-It;r[9][t]=ln;lr=Pn+Hn;cr=Bn+jn;Fn=lr+cr;vn=Fn*2-Jt;sn=vn*2-Kt;r[8][t]=sn;vr=(Qt-Gt)*W;mr=(Yt-Zt)*ot;gr=vr+mr;r[7][t]=gr;n[8][t]=(vr-mr)*Y*2-gr;yr=(en-tn)*W;br=(nn-rn)*ot;wr=yr+br;mn=wr*2-sn;r[6][t]=mn;Sr=(on-un)*W;xr=(an-fn)*ot;Tr=Sr+xr;Dn=Tr*2-ln;r[5][t]=Dn;Cr=(cn-hn)*W;kr=(pn-dn)*ot;Lr=Cr+kr;In=Lr*2-vn;kn=In*2-mn;r[4][t]=kn;Mr=(gn-yn)*W;_r=(bn-wn)*ot;Dr=Mr+_r;tr=Dr*2-En;r[3][t]=tr;Pr=(Zn-er)*Y*2-tr;n[4][t]=Pr;n[12][t]=((Mr-_r)*Y*2-Dr)*2-Pr;Hr=(Sn-xn)*W;Br=(Tn-Nn)*ot;jr=Hr+Br;ir=jr*2-Cn;qn=ir*2-kn;r[2][t]=qn;Fr=(nr-rr)*Y*2-ir;qr=(Ln-An)*W;Rr=(On-Mn)*ot;Ur=qr+Rr;ar=Ur*2-_n;Jn=ar*2-Dn;r[1][t]=Jn;fr=(Vn-$n)*Y*2-Jn;n[2][t]=fr;zr=(or-ur)*Y*2-ar;Nr=zr*2-fr;n[6][t]=Nr;Wr=((Sr-xr)*Y*2-Tr)*2-Nr;n[10][t]=Wr;n[14][t]=(((qr-Rr)*Y*2-Ur)*2-zr)*2-Wr;Xr=(Pn-Hn)*W;Vr=(Bn-jn)*ot;$r=Xr+Vr;hr=$r*2-Fn;Gn=hr*2-In;pr=(Kn-Qn)*Y*2-Gn;Xn=Gn*2-qn;r[0][t]=Xn;Yn=(zn-Wn)*Y*2-Xn;n[1][t]=Yn;sr=pr*2-Yn;n[3][t]=sr;dr=Fr*2-sr;n[5][t]=dr;Jr=(lr-cr)*Y*2-hr;Ar=Jr*2-pr;Er=Ar*2-dr;n[7][t]=Er;Or=((yr-br)*Y*2-wr)*2-Er;n[9][t]=Or;Kr=((Cr-kr)*Y*2-Lr)*2-Ar;Ir=Kr*2-Or;n[11][t]=Ir;Qr=(((Hr-Br)*Y*2-jr)*2-Fr)*2-Ir;n[13][t]=Qr;n[15][t]=((((Xr-Vr)*Y*2-$r)*2-Jr)*2-Kr)*2-Qr};const dt=[[0,-442505e-9,.003250122,-.007003784,.031082153,-.07862854,.100311279,-.572036743,1.144989014,.572036743,.100311279,.07862854,.031082153,.007003784,.003250122,442505e-9,0,-442505e-9,.003250122,-.007003784,.031082153,-.07862854,.100311279,-.572036743,1.144989014,.572036743,.100311279,.07862854,.031082153,.007003784,.003250122,442505e-9],[-15259e-9,-473022e-9,.003326416,-.007919312,.030517578,-.084182739,.090927124,-.600219727,1.144287109,.543823242,.108856201,.073059082,.031478882,.006118774,.003173828,396729e-9,-15259e-9,-473022e-9,.003326416,-.007919312,.030517578,-.084182739,.090927124,-.600219727,1.144287109,.543823242,.108856201,.073059082,.031478882,.006118774,.003173828,396729e-9],[-15259e-9,-534058e-9,.003387451,-.008865356,.029785156,-.089706421,.080688477,-.628295898,1.142211914,.515609741,.116577148,.067520142,.031738281,.0052948,.003082275,366211e-9,-15259e-9,-534058e-9,.003387451,-.008865356,.029785156,-.089706421,.080688477,-.628295898,1.142211914,.515609741,.116577148,.067520142,.031738281,.0052948,.003082275,366211e-9],[-15259e-9,-579834e-9,.003433228,-.009841919,.028884888,-.095169067,.069595337,-.656219482,1.138763428,.487472534,.123474121,.06199646,.031845093,.004486084,.002990723,320435e-9,-15259e-9,-579834e-9,.003433228,-.009841919,.028884888,-.095169067,.069595337,-.656219482,1.138763428,.487472534,.123474121,.06199646,.031845093,.004486084,.002990723,320435e-9],[-15259e-9,-62561e-8,.003463745,-.010848999,.027801514,-.100540161,.057617187,-.683914185,1.133926392,.459472656,.129577637,.056533813,.031814575,.003723145,.00289917,289917e-9,-15259e-9,-62561e-8,.003463745,-.010848999,.027801514,-.100540161,.057617187,-.683914185,1.133926392,.459472656,.129577637,.056533813,.031814575,.003723145,.00289917,289917e-9],[-15259e-9,-686646e-9,.003479004,-.011886597,.026535034,-.105819702,.044784546,-.71131897,1.127746582,.431655884,.134887695,.051132202,.031661987,.003005981,.002792358,259399e-9,-15259e-9,-686646e-9,.003479004,-.011886597,.026535034,-.105819702,.044784546,-.71131897,1.127746582,.431655884,.134887695,.051132202,.031661987,.003005981,.002792358,259399e-9],[-15259e-9,-747681e-9,.003479004,-.012939453,.025085449,-.110946655,.031082153,-.738372803,1.120223999,.404083252,.139450073,.045837402,.031387329,.002334595,.002685547,244141e-9,-15259e-9,-747681e-9,.003479004,-.012939453,.025085449,-.110946655,.031082153,-.738372803,1.120223999,.404083252,.139450073,.045837402,.031387329,.002334595,.002685547,244141e-9],[-30518e-9,-808716e-9,.003463745,-.014022827,.023422241,-.115921021,.01651001,-.765029907,1.111373901,.376800537,.143264771,.040634155,.031005859,.001693726,.002578735,213623e-9,-30518e-9,-808716e-9,.003463745,-.014022827,.023422241,-.115921021,.01651001,-.765029907,1.111373901,.376800537,.143264771,.040634155,.031005859,.001693726,.002578735,213623e-9],[-30518e-9,-88501e-8,.003417969,-.01512146,.021575928,-.120697021,.001068115,-.791213989,1.101211548,.349868774,.146362305,.035552979,.030532837,.001098633,.002456665,198364e-9,-30518e-9,-88501e-8,.003417969,-.01512146,.021575928,-.120697021,.001068115,-.791213989,1.101211548,.349868774,.146362305,.035552979,.030532837,.001098633,.002456665,198364e-9],[-30518e-9,-961304e-9,.003372192,-.016235352,.01953125,-.125259399,-.015228271,-.816864014,1.089782715,.323318481,.148773193,.030609131,.029937744,549316e-9,.002349854,167847e-9,-30518e-9,-961304e-9,.003372192,-.016235352,.01953125,-.125259399,-.015228271,-.816864014,1.089782715,.323318481,.148773193,.030609131,.029937744,549316e-9,.002349854,167847e-9],[-30518e-9,-.001037598,.00328064,-.017349243,.01725769,-.129562378,-.03237915,-.841949463,1.07711792,.297210693,.150497437,.025817871,.029281616,30518e-9,.002243042,152588e-9,-30518e-9,-.001037598,.00328064,-.017349243,.01725769,-.129562378,-.03237915,-.841949463,1.07711792,.297210693,.150497437,.025817871,.029281616,30518e-9,.002243042,152588e-9],[-45776e-9,-.001113892,.003173828,-.018463135,.014801025,-.133590698,-.050354004,-.866363525,1.063217163,.271591187,.151596069,.021179199,.028533936,-442505e-9,.002120972,137329e-9,-45776e-9,-.001113892,.003173828,-.018463135,.014801025,-.133590698,-.050354004,-.866363525,1.063217163,.271591187,.151596069,.021179199,.028533936,-442505e-9,.002120972,137329e-9],[-45776e-9,-.001205444,.003051758,-.019577026,.012115479,-.137298584,-.069168091,-.890090942,1.048156738,.246505737,.152069092,.016708374,.02772522,-869751e-9,.00201416,12207e-8,-45776e-9,-.001205444,.003051758,-.019577026,.012115479,-.137298584,-.069168091,-.890090942,1.048156738,.246505737,.152069092,.016708374,.02772522,-869751e-9,.00201416,12207e-8],[-61035e-9,-.001296997,.002883911,-.020690918,.009231567,-.140670776,-.088775635,-.91305542,1.031936646,.221984863,.15196228,.012420654,.02684021,-.001266479,.001907349,106812e-9,-61035e-9,-.001296997,.002883911,-.020690918,.009231567,-.140670776,-.088775635,-.91305542,1.031936646,.221984863,.15196228,.012420654,.02684021,-.001266479,.001907349,106812e-9],[-61035e-9,-.00138855,.002700806,-.021789551,.006134033,-.143676758,-.109161377,-.935195923,1.01461792,.198059082,.151306152,.00831604,.025909424,-.001617432,.001785278,106812e-9,-61035e-9,-.00138855,.002700806,-.021789551,.006134033,-.143676758,-.109161377,-.935195923,1.01461792,.198059082,.151306152,.00831604,.025909424,-.001617432,.001785278,106812e-9],[-76294e-9,-.001480103,.002487183,-.022857666,.002822876,-.146255493,-.130310059,-.956481934,.996246338,.174789429,.150115967,.004394531,.024932861,-.001937866,.001693726,91553e-9,-76294e-9,-.001480103,.002487183,-.022857666,.002822876,-.146255493,-.130310059,-.956481934,.996246338,.174789429,.150115967,.004394531,.024932861,-.001937866,.001693726,91553e-9],[-76294e-9,-.001586914,.002227783,-.023910522,-686646e-9,-.148422241,-.152206421,-.976852417,.976852417,.152206421,.148422241,686646e-9,.023910522,-.002227783,.001586914,76294e-9,-76294e-9,-.001586914,.002227783,-.023910522,-686646e-9,-.148422241,-.152206421,-.976852417,.976852417,.152206421,.148422241,686646e-9,.023910522,-.002227783,.001586914,76294e-9]];B.prototype.full=function(e,t,n){var r,i,s,o;for(var u=0;u<t;++u){var a=e.sbsample[u];var f=this.filter[u];var l=this.phase;var c=this.pcm.samples[u];var h=0;var p=0;for(var d=0;d<n;++d){B.dct32(a[d],l>>1,f[0][l&1],f[1][l&1]);var v=l&~1;var m=l-1&15|1;var g=f[0][l&1];var y=f[0][~l&1];var b=f[1][~l&1];var w=0;var E=0;var S=0;r=0;o=dt[r];_fx=y[E];_fe=g[w];s=_fx[0]*o[m+0];s+=_fx[1]*o[m+14];s+=_fx[2]*o[m+12];s+=_fx[3]*o[m+10];s+=_fx[4]*o[m+8];s+=_fx[5]*o[m+6];s+=_fx[6]*o[m+4];s+=_fx[7]*o[m+2];s=-s;s+=_fe[0]*o[v+0];s+=_fe[1]*o[v+14];s+=_fe[2]*o[v+12];s+=_fe[3]*o[v+10];s+=_fe[4]*o[v+8];s+=_fe[5]*o[v+6];s+=_fe[6]*o[v+4];s+=_fe[7]*o[v+2];c[h++]=s;p=h+30;for(var x=1;x<16;++x){++w;++r;o=dt[r];_fo=b[S];_fe=g[w];s=_fo[0]*o[m+0];s+=_fo[1]*o[m+14];s+=_fo[2]*o[m+12];s+=_fo[3]*o[m+10];s+=_fo[4]*o[m+8];s+=_fo[5]*o[m+6];s+=_fo[6]*o[m+4];s+=_fo[7]*o[m+2];s=-s;s+=_fe[7]*o[v+2];s+=_fe[6]*o[v+4];s+=_fe[5]*o[v+6];s+=_fe[4]*o[v+8];s+=_fe[3]*o[v+10];s+=_fe[2]*o[v+12];s+=_fe[1]*o[v+14];s+=_fe[0]*o[v+0];c[h++]=s;s=_fe[0]*o[-v+31-16];s+=_fe[1]*o[-v+31-14];s+=_fe[2]*o[-v+31-12];s+=_fe[3]*o[-v+31-10];s+=_fe[4]*o[-v+31-8];s+=_fe[5]*o[-v+31-6];s+=_fe[6]*o[-v+31-4];s+=_fe[7]*o[-v+31-2];s+=_fo[7]*o[-m+31-2];s+=_fo[6]*o[-m+31-4];s+=_fo[5]*o[-m+31-6];s+=_fo[4]*o[-m+31-8];s+=_fo[3]*o[-m+31-10];s+=_fo[2]*o[-m+31-12];s+=_fo[1]*o[-m+31-14];s+=_fo[0]*o[-m+31-16];c[p--]=s;++S}++r;o=dt[r];_fo=b[S];s=_fo[0]*o[m+0];s+=_fo[1]*o[m+14];s+=_fo[2]*o[m+12];s+=_fo[3]*o[m+10];s+=_fo[4]*o[m+8];s+=_fo[5]*o[m+6];s+=_fo[6]*o[m+4];s+=_fo[7]*o[m+2];c[h]=-s;h+=16;l=(l+1)%16}}};B.prototype.frame=function(e){var t=e.header.nchannels();var n=e.header.nbsamples();this.pcm.samplerate=e.header.samplerate;this.pcm.channels=t;this.pcm.length=32*n;this.full(e,t,n);this.phase=(this.phase+n)%16};const vt=new Float32Array([2,1.587401051968,1.259921049895,1,.793700525984,.629960524947,.5,.396850262992,.314980262474,.25,.198425131496,.157490131237,.125,.099212565748,.078745065618,.0625,.049606282874,.039372532809,.03125,.024803141437,.019686266405,.015625,.012401570719,.009843133202,.0078125,.006200785359,.004921566601,.00390625,.00310039268,.002460783301,.001953125,.00155019634,.00123039165,.0009765625,.00077509817,.000615195825,.00048828125,.000387549085,.000307597913,.000244140625,.000193774542,.000153798956,.000122070313,96887271e-12,76899478e-12,61035156e-12,48443636e-12,38449739e-12,30517578e-12,24221818e-12,1922487e-11,15258789e-12,12110909e-12,9612435e-12,7629395e-12,6055454e-12,4806217e-12,3814697e-12,3027727e-12,2403109e-12,1907349e-12,1513864e-12,1201554e-12,0]);const mt=new Uint8Array([4,4,4,4,4,4,6,6,6,8,10,12,16,18,22,28,34,40,46,54,54,192]);const gt=new Uint8Array([4,4,4,4,4,4,6,6,8,8,10,12,16,20,24,28,34,42,50,54,76,158]);const yt=new Uint8Array([4,4,4,4,4,4,6,6,8,10,12,16,20,24,30,38,46,56,68,84,102,26]);const bt=new Uint8Array([4,4,4,4,4,4,4,4,4,4,4,4,6,6,6,6,6,6,10,10,10,12,12,12,14,14,14,16,16,16,20,20,20,26,26,26,66,66,66]);const wt=new Uint8Array([4,4,4,4,4,4,4,4,4,4,4,4,6,6,6,8,8,8,10,10,10,12,12,12,14,14,14,18,18,18,22,22,22,30,30,30,56,56,56]);const Et=new Uint8Array([4,4,4,4,4,4,4,4,4,4,4,4,6,6,6,8,8,8,12,12,12,16,16,16,20,20,20,26,26,26,34,34,34,42,42,42,12,12,12]);const St=new Uint8Array([4,4,4,4,4,4,6,6,4,4,4,6,6,6,6,6,6,10,10,10,12,12,12,14,14,14,16,16,16,20,20,20,26,26,26,66,66,66]);const xt=new Uint8Array([4,4,4,4,4,4,6,6,4,4,4,6,6,6,8,8,8,10,10,10,12,12,12,14,14,14,18,18,18,22,22,22,30,30,30,56,56,56]);const Tt=new Uint8Array([4,4,4,4,4,4,6,6,4,4,4,6,6,6,8,8,8,12,12,12,16,16,16,20,20,20,26,26,26,34,34,34,42,42,42,12,12,12]);const Nt=new Uint8Array([6,6,6,6,6,6,8,10,12,14,16,18,22,26,32,38,46,54,62,70,76,36]);const Ct=new Uint8Array([6,6,6,6,6,6,8,10,12,14,16,20,24,28,32,38,46,52,60,68,58,54]);const kt=Ct;const Lt=new Uint8Array([4,4,4,4,4,4,4,4,4,6,6,6,8,8,8,10,10,10,12,12,12,14,14,14,18,18,18,24,24,24,32,32,32,44,44,44,12,12,12]);const At=new Uint8Array([4,4,4,4,4,4,4,4,4,6,6,6,6,6,6,8,8,8,10,10,10,14,14,14,18,18,18,26,26,26,32,32,32,42,42,42,18,18,18]);const Ot=new Uint8Array([4,4,4,4,4,4,4,4,4,6,6,6,8,8,8,10,10,10,12,12,12,14,14,14,18,18,18,24,24,24,30,30,30,40,40,40,18,18,18]);const Mt=new Uint8Array([6,6,6,6,6,6,6,6,6,8,8,8,10,10,10,12,12,12,14,14,14,18,18,18,24,24,24,32,32,32,44,44,44,12,12,12]);const _t=new Uint8Array([6,6,6,6,6,6,6,6,6,6,6,6,8,8,8,10,10,10,14,14,14,18,18,18,26,26,26,32,32,32,42,42,42,18,18,18]);const Dt=new Uint8Array([6,6,6,6,6,6,6,6,6,8,8,8,10,10,10,12,12,12,14,14,14,18,18,18,24,24,24,30,30,30,40,40,40,18,18,18]);const Pt=kt;const Ht=Pt;const Bt=new Uint8Array([12,12,12,12,12,12,16,20,24,28,32,40,48,56,64,76,90,2,2,2,2,2]);const jt=Ot;const Ft=jt;const It=new Uint8Array([8,8,8,8,8,8,8,8,8,12,12,12,16,16,16,20,20,20,24,24,24,28,28,28,36,36,36,2,2,2,2,2,2,2,2,2,26,26,26]);const qt=Dt;const Rt=qt;const Ut=new Uint8Array([12,12,12,4,4,4,8,8,8,12,12,12,16,16,16,20,20,20,24,24,24,28,28,28,36,36,36,2,2,2,2,2,2,2,2,2,26,26,26]);const zt=[{l:mt,s:bt,m:St},{l:gt,s:wt,m:xt},{l:yt,s:Et,m:Tt},{l:Nt,s:Lt,m:Mt},{l:Ct,s:At,m:_t},{l:kt,s:Ot,m:Dt},{l:Pt,s:jt,m:qt},{l:Ht,s:Ft,m:Rt},{l:Bt,s:It,m:Ut}];const Wt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0]);const Xt=new Float32Array([.59460355750136,.70710678118655,.84089641525371,1,1.18920711500272,1.4142135623731,1.68179283050743]);const Vt=new Float32Array([+.857492926,+.881741997,+.949628649,+.983314592,+.995517816,+.999160558,+.999899195,+.999993155]);const $t=new Float32Array([-.514495755,-.471731969,-.313377454,-.1819132,-.094574193,-.040965583,-.014198569,-.003699975]);const Jt=1;const Kt=2;const Qt=4;const Gt=8;const Yt=1;const Zt=2;const en=new Float32Array([.043619387,.130526192,.216439614,.3007058,.382683432,.461748613,.537299608,.608761429,.675590208,.737277337,.79335334,.843391446,.887010833,.923879533,.953716951,.976296007,.991444861,.999048222,.999048222,.991444861,.976296007,.953716951,.923879533,.887010833,.843391446,.79335334,.737277337,.675590208,.608761429,.537299608,.461748613,.382683432,.3007058,.216439614,.130526192,.043619387]);const tn=new Float32Array([.130526192,.382683432,.608761429,.79335334,.923879533,.991444861,.991444861,.923879533,.79335334,.608761429,.382683432,.130526192]);const nn=new Float32Array([0,.211324865,.366025404,.5,.633974596,.788675135,1]);const rn=[new Float32Array([.840896415,.707106781,.594603558,.5,.420448208,.353553391,.297301779,.25,.210224104,.176776695,.148650889,.125,.105112052,.088388348,.074325445]),new Float32Array([.707106781,.5,.353553391,.25,.176776695,.125,.088388348,.0625,.044194174,.03125,.022097087,.015625,.011048543,.0078125,.005524272])];const sn=[{slen1:0,slen2:0},{slen1:0,slen2:1},{slen1:0,slen2:2},{slen1:0,slen2:3},{slen1:3,slen2:0},{slen1:1,slen2:1},{slen1:1,slen2:2},{slen1:1,slen2:3},{slen1:2,slen2:1},{slen1:2,slen2:2},{slen1:2,slen2:3},{slen1:3,slen2:1},{slen1:3,slen2:2},{slen1:3,slen2:3},{slen1:4,slen2:2},{slen1:4,slen2:3}];const on=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];P.layers[1]=un;const an=new Float32Array([1.33333333333333,1.14285714285714,1.06666666666667,1.03225806451613,1.01587301587302,1.00787401574803,1.00392156862745,1.00195694716243,1.00097751710655,1.00048851978505,1.0002442002442,1.00012208521548,1.00006103888177,1.00003051850948]);un.prototype.decode=function(e,t){var n=t.header;var r=n.nchannels();var i=32;if(n.mode===A.JOINT_STEREO){n.flags|=k.I_STEREO;i=4+n.mode_extension*4}if(n.flags&k.PROTECTION){}var s=this.allocation;for(var o=0;o<i;o++){for(var u=0;u<r;u++){var a=e.read(4);if(a===15)throw new Error("forbidden bit allocation value");s[u][o]=a?a+1:0}}for(var o=i;o<32;o++){var a=e.read(4);if(a===15)throw new Error("forbidden bit allocation value");s[0][o]=s[1][o]=a?a+1:0}var f=this.scalefactor;for(var o=0;o<32;o++){for(var u=0;u<r;u++){if(s[u][o]){f[u][o]=e.read(6)}}}for(var l=0;l<12;l++){for(var o=0;o<i;o++){for(var u=0;u<r;u++){var a=s[u][o];t.sbsample[u][l][o]=a?this.sample(e,a)*vt[f[u][o]]:0}}for(var o=i;o<32;o++){var a=s[0][o];if(a){var c=this.sample(e,a);for(var u=0;u<r;u++){t.sbsample[u][l][o]=c*vt[f[u][o]]}}else{for(var u=0;u<r;u++){t.sbsample[u][l][o]=0}}}}};un.prototype.sample=function(e,t){var n=e.read(t);n^=1<<t-1;n|=-(n&1<<t-1);n/=1<<t-1;n+=1>>t-1;return n*an[t-2]};P.layers[2]=fn;const ln=[{sblimit:27,offsets:[7,7,7,6,6,6,6,6,6,6,6,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0]},{sblimit:30,offsets:[7,7,7,6,6,6,6,6,6,6,6,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0]},{sblimit:8,offsets:[5,5,2,2,2,2,2,2]},{sblimit:12,offsets:[5,5,2,2,2,2,2,2,2,2,2,2]},{sblimit:30,offsets:[4,4,4,4,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}];const cn=[{nbal:2,offset:0},{nbal:2,offset:3},{nbal:3,offset:3},{nbal:3,offset:1},{nbal:4,offset:2},{nbal:4,offset:3},{nbal:4,offset:4},{nbal:4,offset:5}];const hn=[[0,1,16],[0,1,2,3,4,5,16],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],[0,1,3,4,5,6,7,8,9,10,11,12,13,14,15],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,16],[0,2,4,5,6,7,8,9,10,11,12,13,14,15,16]];const pn=[{nlevels:3,group:2,bits:5,C:1.33333333333,D:.5},{nlevels:5,group:3,bits:7,C:1.6,D:.5},{nlevels:7,group:0,bits:3,C:1.14285714286,D:.25},{nlevels:9,group:4,bits:10,C:1.77777777777,D:.5},{nlevels:15,group:0,bits:4,C:1.06666666666,D:.125},{nlevels:31,group:0,bits:5,C:1.03225806452,D:.0625},{nlevels:63,group:0,bits:6,C:1.01587301587,D:.03125},{nlevels:127,group:0,bits:7,C:1.00787401575,D:.015625},{nlevels:255,group:0,bits:8,C:1.00392156863,D:.0078125},{nlevels:511,group:0,bits:9,C:1.00195694716,D:.00390625},{nlevels:1023,group:0,bits:10,C:1.00097751711,D:.001953125},{nlevels:2047,group:0,bits:11,C:1.00048851979,D:.0009765625},{nlevels:4095,group:0,bits:12,C:1.00024420024,D:.00048828125},{nlevels:8191,group:0,bits:13,C:1.00012208522,D:.00024414063},{nlevels:16383,group:0,bits:14,C:1.00006103888,D:.00012207031},{nlevels:32767,group:0,bits:15,C:1.00003051851,D:6103516e-11},{nlevels:65535,group:0,bits:16,C:1.00001525902,D:3051758e-11}];fn.prototype.decode=function(e,t){var n=t.header;var r=n.nchannels();var i;if(n.flags&k.LSF_EXT){i=4}else if(n.flags&k.FREEFORMAT){i=n.samplerate===48e3?0:1}else{var s=n.bitrate;if(r===2){s/=2}else{if(s>192e3)throw new Error("bad bitrate/mode combination")}if(s<=48e3)i=n.samplerate===32e3?3:2;else if(s<=8e4)i=0;else i=n.samplerate===48e3?0:1}var o=ln[i].sblimit;var u=ln[i].offsets;var a=32;if(n.mode===A.JOINT_STEREO){n.flags|=k.I_STEREO;a=4+n.mode_extension*4}if(a>o)a=o;var f=this.allocation;for(var l=0;l<a;l++){var c=cn[u[l]].nbal;for(var h=0;h<r;h++)f[h][l]=e.read(c)}for(var l=a;l<o;l++){var c=cn[u[l]].nbal;f[0][l]=f[1][l]=e.read(c)}var p=this.scfsi;for(var l=0;l<o;l++){for(var h=0;h<r;h++){if(f[h][l])p[h][l]=e.read(2)}}if(n.flags&k.PROTECTION){}var d=this.scalefactor;for(var l=0;l<o;l++){for(var h=0;h<r;h++){if(f[h][l]){d[h][l][0]=e.read(6);switch(p[h][l]){case 2:d[h][l][2]=d[h][l][1]=d[h][l][0];break;case 0:d[h][l][1]=e.read(6);case 1:case 3:d[h][l][2]=e.read(6)}if(p[h][l]&1)d[h][l][1]=d[h][l][p[h][l]-1]}}}for(var v=0;v<12;v++){for(var l=0;l<a;l++){for(var h=0;h<r;h++){if(i=f[h][l]){i=hn[cn[u[l]].offset][i-1];this.decodeSamples(e,pn[i]);var m=vt[d[h][l][v>>2]];for(var g=0;g<3;g++){t.sbsample[h][3*v+g][l]=this.samples[g]*m}}else{for(var g=0;g<3;g++){t.sbsample[h][3*v+g][l]=0}}}}for(var l=a;l<o;l++){if(i=f[0][l]){i=hn[cn[u[l]].offset][i-1];this.decodeSamples(e,pn[i]);for(var h=0;h<r;h++){var m=vt[d[h][l][v>>2]];for(var g=0;g<3;g++){t.sbsample[h][3*v+g][l]=this.samples[g]*m}}}else{for(var h=0;h<r;h++){for(var g=0;g<3;g++){t.sbsample[h][3*v+g][l]=0}}}}for(var h=0;h<r;h++){for(var g=0;g<3;g++){for(var l=o;l<32;l++){t.sbsample[h][3*v+g][l]=0}}}}};fn.prototype.decodeSamples=function(e,t){var n=this.samples;var r=t.group;if(r){var i=e.read(t.bits);var s=t.nlevels;for(var o=0;o<3;o++){n[o]=i%s;i=i/s|0}}else{r=t.bits;for(var o=0;o<3;o++){n[o]=e.read(r)}}for(var o=0;o<3;o++){var u=n[o]^1<<r-1;u|=-(u&1<<r-1);u/=1<<r-1;n[o]=(u+t.D)*t.C}};var dn=function(e,t){return{"final":0,ptr:{bits:t,offset:e}}};var vn=function(e,t,n,r,i){return{"final":1,value:{v:e,w:t,x:n,y:r}}};const mn=[dn(16,2),dn(20,2),dn(24,1),dn(26,1),vn(0,0,1,0,4),vn(0,0,0,1,4),vn(0,1,0,0,4),vn(1,0,0,0,4),vn(0,0,0,0,1),vn(0,0,0,0,1),vn(0,0,0,0,1),vn(0,0,0,0,1),vn(0,0,0,0,1),vn(0,0,0,0,1),vn(0,0,0,0,1),vn(0,0,0,0,1),vn(1,0,1,1,2),vn(1,1,1,1,2),vn(1,1,0,1,2),vn(1,1,1,0,2),vn(0,1,1,1,2),vn(0,1,0,1,2),vn(1,0,0,1,1),vn(1,0,0,1,1),vn(0,1,1,0,1),vn(0,0,1,1,1),vn(1,0,1,0,1),vn(1,1,0,0,1)];const gn=[vn(1,1,1,1,4),vn(1,1,1,0,4),vn(1,1,0,1,4),vn(1,1,0,0,4),vn(1,0,1,1,4),vn(1,0,1,0,4),vn(1,0,0,1,4),vn(1,0,0,0,4),vn(0,1,1,1,4),vn(0,1,1,0,4),vn(0,1,0,1,4),vn(0,1,0,0,4),vn(0,0,1,1,4),vn(0,0,1,0,4),vn(0,0,0,1,4),vn(0,0,0,0,4)];var yn=function(e,t,n){return{"final":1,value:{x:e,y:t,hlen:n}}};const bn=[yn(0,0,0)];const wn=[yn(1,1,3),yn(0,1,3),yn(1,0,2),yn(1,0,2),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1)];const En=[dn(8,3),yn(1,1,3),yn(0,1,3),yn(1,0,3),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(2,2,3),yn(0,2,3),yn(1,2,2),yn(1,2,2),yn(2,1,2),yn(2,1,2),yn(2,0,2),yn(2,0,2)];const Sn=[dn(8,3),yn(1,0,3),yn(1,1,2),yn(1,1,2),yn(0,1,2),yn(0,1,2),yn(0,0,2),yn(0,0,2),yn(2,2,3),yn(0,2,3),yn(1,2,2),yn(1,2,2),yn(2,1,2),yn(2,1,2),yn(2,0,2),yn(2,0,2)];const xn=[dn(8,4),yn(1,1,3),yn(0,1,3),yn(1,0,3),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),dn(24,1),yn(3,2,4),yn(3,1,3),yn(3,1,3),yn(1,3,4),yn(0,3,4),yn(3,0,4),yn(2,2,4),yn(1,2,3),yn(1,2,3),yn(2,1,3),yn(2,1,3),yn(0,2,3),yn(0,2,3),yn(2,0,3),yn(2,0,3),yn(3,3,1),yn(2,3,1)];const Tn=[dn(16,3),dn(24,1),dn(26,1),yn(1,2,4),yn(2,1,4),yn(2,0,4),yn(0,1,3),yn(0,1,3),yn(1,1,2),yn(1,1,2),yn(1,1,2),yn(1,1,2),yn(1,0,3),yn(1,0,3),yn(0,0,3),yn(0,0,3),yn(3,3,3),yn(0,3,3),yn(2,3,2),yn(2,3,2),yn(3,2,2),yn(3,2,2),yn(3,0,2),yn(3,0,2),yn(1,3,1),yn(3,1,1),yn(2,2,1),yn(0,2,1)];const Nn=[dn(16,4),dn(32,4),dn(48,2),yn(1,1,4),yn(0,1,3),yn(0,1,3),yn(1,0,3),yn(1,0,3),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),dn(52,2),dn(56,1),dn(58,1),yn(1,5,4),yn(5,1,4),dn(60,1),yn(5,0,4),dn(62,1),yn(2,4,4),yn(4,2,4),yn(1,4,3),yn(1,4,3),yn(4,1,3),yn(4,1,3),yn(4,0,3),yn(4,0,3),yn(0,4,4),yn(2,3,4),yn(3,2,4),yn(0,3,4),yn(1,3,3),yn(1,3,3),yn(3,1,3),yn(3,1,3),yn(3,0,3),yn(3,0,3),yn(2,2,3),yn(2,2,3),yn(1,2,2),yn(1,2,2),yn(1,2,2),yn(1,2,2),yn(2,1,1),yn(2,1,1),yn(0,2,2),yn(2,0,2),yn(5,5,2),yn(4,5,2),yn(5,4,2),yn(5,3,2),yn(3,5,1),yn(4,4,1),yn(2,5,1),yn(5,2,1),yn(0,5,1),yn(3,4,1),yn(4,3,1),yn(3,3,1)];const Cn=[dn(16,4),dn(32,4),yn(1,2,4),yn(2,1,4),yn(1,1,2),yn(1,1,2),yn(1,1,2),yn(1,1,2),yn(0,1,3),yn(0,1,3),yn(1,0,3),yn(1,0,3),yn(0,0,2),yn(0,0,2),yn(0,0,2),yn(0,0,2),dn(48,3),dn(56,2),dn(60,1),yn(1,5,4),yn(5,1,4),dn(62,1),dn(64,1),yn(2,4,4),yn(4,2,4),yn(1,4,4),yn(4,1,3),yn(4,1,3),yn(0,4,4),yn(4,0,4),yn(2,3,4),yn(3,2,4),yn(1,3,4),yn(3,1,4),yn(0,3,4),yn(3,0,4),yn(2,2,2),yn(2,2,2),yn(2,2,2),yn(2,2,2),yn(0,2,2),yn(0,2,2),yn(0,2,2),yn(0,2,2),yn(2,0,2),yn(2,0,2),yn(2,0,2),yn(2,0,2),yn(5,5,3),yn(5,4,3),yn(4,5,2),yn(4,5,2),yn(5,3,1),yn(5,3,1),yn(5,3,1),yn(5,3,1),yn(3,5,2),yn(4,4,2),yn(2,5,1),yn(2,5,1),yn(5,2,1),yn(0,5,1),yn(3,4,1),yn(4,3,1),yn(5,0,1),yn(3,3,1)];const kn=[dn(16,4),dn(32,3),dn(40,2),dn(44,2),dn(48,1),yn(1,2,4),yn(2,1,4),yn(2,0,4),yn(1,1,3),yn(1,1,3),yn(0,1,3),yn(0,1,3),yn(1,0,3),yn(1,0,3),yn(0,0,3),yn(0,0,3),dn(50,1),yn(3,5,4),yn(5,3,4),dn(52,1),yn(4,4,4),yn(2,5,4),yn(5,2,4),yn(1,5,4),yn(5,1,3),yn(5,1,3),yn(3,4,3),yn(3,4,3),yn(4,3,3),yn(4,3,3),yn(5,0,4),yn(0,4,4),yn(2,4,3),yn(4,2,3),yn(3,3,3),yn(4,0,3),yn(1,4,2),yn(1,4,2),yn(4,1,2),yn(4,1,2),yn(2,3,2),yn(3,2,2),yn(1,3,1),yn(1,3,1),yn(3,1,1),yn(3,1,1),yn(0,3,2),yn(3,0,2),yn(2,2,1),yn(0,2,1),yn(5,5,1),yn(4,5,1),yn(5,4,1),yn(0,5,1)];const Ln=[dn(16,4),dn(32,4),dn(48,2),yn(1,1,4),yn(0,1,3),yn(0,1,3),yn(1,0,3),yn(1,0,3),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),dn(52,3),dn(60,2),dn(64,3),dn(72,1),dn(74,2),dn(78,2),dn(82,2),yn(1,7,4),yn(7,1,4),dn(86,1),dn(88,2),dn(92,2),yn(1,6,4),yn(6,1,4),yn(6,0,4),dn(96,1),dn(98,1),dn(100,1),yn(1,4,4),yn(4,1,4),yn(4,0,4),yn(2,3,4),yn(3,2,4),yn(0,3,4),yn(1,3,3),yn(1,3,3),yn(3,1,3),yn(3,1,3),yn(3,0,3),yn(3,0,3),yn(2,2,3),yn(2,2,3),yn(1,2,2),yn(2,1,2),yn(0,2,2),yn(2,0,2),yn(7,7,3),yn(6,7,3),yn(7,6,3),yn(5,7,3),yn(7,5,3),yn(6,6,3),yn(4,7,2),yn(4,7,2),yn(7,4,2),yn(5,6,2),yn(6,5,2),yn(3,7,2),yn(7,3,2),yn(7,3,2),yn(4,6,2),yn(4,6,2),yn(5,5,3),yn(5,4,3),yn(6,3,2),yn(6,3,2),yn(2,7,1),yn(7,2,1),yn(6,4,2),yn(0,7,2),yn(7,0,1),yn(7,0,1),yn(6,2,1),yn(6,2,1),yn(4,5,2),yn(3,5,2),yn(0,6,1),yn(0,6,1),yn(5,3,2),yn(4,4,2),yn(3,6,1),yn(2,6,1),yn(2,5,2),yn(5,2,2),yn(1,5,1),yn(1,5,1),yn(5,1,1),yn(5,1,1),yn(3,4,2),yn(4,3,2),yn(0,5,1),yn(5,0,1),yn(2,4,1),yn(4,2,1),yn(3,3,1),yn(0,4,1)];const An=[dn(16,4),dn(32,4),dn(48,4),dn(64,3),yn(1,2,4),dn(72,1),yn(1,1,3),yn(1,1,3),yn(0,1,3),yn(0,1,3),yn(1,0,3),yn(1,0,3),yn(0,0,2),yn(0,0,2),yn(0,0,2),yn(0,0,2),dn(74,2),dn(78,3),dn(86,2),dn(90,1),dn(92,2),yn(2,7,4),yn(7,2,4),dn(96,1),yn(7,1,3),yn(7,1,3),yn(1,7,4),yn(7,0,4),yn(3,6,4),yn(6,3,4),yn(6,0,4),dn(98,1),dn(100,1),yn(1,5,4),yn(6,2,3),yn(6,2,3),yn(2,6,4),yn(0,6,4),yn(1,6,3),yn(1,6,3),yn(6,1,3),yn(6,1,3),yn(5,1,4),yn(3,4,4),yn(5,0,4),dn(102,1),yn(2,4,4),yn(4,2,4),yn(1,4,4),yn(4,1,4),yn(0,4,4),yn(4,0,4),yn(2,3,3),yn(2,3,3),yn(3,2,3),yn(3,2,3),yn(1,3,2),yn(1,3,2),yn(1,3,2),yn(1,3,2),yn(3,1,2),yn(3,1,2),yn(3,1,2),yn(3,1,2),yn(0,3,3),yn(3,0,3),yn(2,2,2),yn(2,2,2),yn(2,1,1),yn(2,1,1),yn(2,1,1),yn(2,1,1),yn(0,2,1),yn(2,0,1),yn(7,7,2),yn(6,7,2),yn(7,6,2),yn(7,5,2),yn(6,6,2),yn(6,6,2),yn(4,7,2),yn(4,7,2),yn(7,4,2),yn(7,4,2),yn(5,7,3),yn(5,5,3),yn(5,6,2),yn(6,5,2),yn(3,7,1),yn(3,7,1),yn(7,3,1),yn(4,6,1),yn(4,5,2),yn(5,4,2),yn(3,5,2),yn(5,3,2),yn(6,4,1),yn(0,7,1),yn(4,4,1),yn(2,5,1),yn(5,2,1),yn(0,5,1),yn(4,3,1),yn(3,3,1)];const On=[dn(16,4),dn(32,4),dn(48,4),dn(64,2),dn(68,3),dn(76,1),yn(1,2,4),yn(2,1,4),dn(78,1),yn(0,0,4),yn(1,1,3),yn(1,1,3),yn(0,1,3),yn(0,1,3),yn(1,0,3),yn(1,0,3),dn(80,2),dn(84,1),dn(86,1),dn(88,1),yn(5,6,4),yn(3,7,4),dn(90,1),yn(2,7,4),yn(7,2,4),yn(4,6,4),yn(6,4,4),yn(1,7,4),yn(7,1,4),dn(92,1),yn(3,6,4),yn(6,3,4),yn(4,5,4),yn(5,4,4),yn(4,4,4),dn(94,1),yn(2,6,3),yn(2,6,3),yn(6,2,3),yn(6,2,3),yn(6,1,3),yn(6,1,3),yn(1,6,4),yn(6,0,4),yn(3,5,4),yn(5,3,4),yn(2,5,4),yn(5,2,4),yn(1,5,3),yn(1,5,3),yn(5,1,3),yn(5,1,3),yn(3,4,3),yn(3,4,3),yn(4,3,3),yn(4,3,3),yn(5,0,4),yn(0,4,4),yn(2,4,3),yn(2,4,3),yn(4,2,3),yn(4,2,3),yn(1,4,3),yn(1,4,3),yn(3,3,2),yn(4,1,2),yn(2,3,2),yn(3,2,2),yn(4,0,3),yn(0,3,3),yn(3,0,2),yn(3,0,2),yn(1,3,1),yn(1,3,1),yn(1,3,1),yn(1,3,1),yn(3,1,1),yn(2,2,1),yn(0,2,1),yn(2,0,1),yn(7,7,2),yn(6,7,2),yn(7,6,1),yn(7,6,1),yn(5,7,1),yn(7,5,1),yn(6,6,1),yn(4,7,1),yn(7,4,1),yn(6,5,1),yn(7,3,1),yn(5,5,1),yn(0,7,1),yn(7,0,1),yn(0,6,1),yn(0,5,1)];const Mn=[dn(16,4),dn(32,4),dn(48,4),dn(64,2),yn(1,1,4),yn(0,1,4),yn(1,0,3),yn(1,0,3),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),dn(68,4),dn(84,4),dn(100,4),dn(116,4),dn(132,4),dn(148,4),dn(164,3),dn(172,3),dn(180,3),dn(188,3),dn(196,3),dn(204,3),dn(212,1),dn(214,2),dn(218,3),dn(226,1),dn(228,2),dn(232,2),dn(236,2),dn(240,2),yn(8,1,4),dn(244,1),dn(246,1),dn(248,1),dn(250,2),dn(254,1),yn(1,5,4),yn(5,1,4),dn(256,1),dn(258,1),dn(260,1),yn(1,4,4),yn(4,1,3),yn(4,1,3),yn(0,4,4),yn(4,0,4),yn(2,3,4),yn(3,2,4),yn(1,3,3),yn(1,3,3),yn(3,1,3),yn(3,1,3),yn(0,3,3),yn(0,3,3),yn(3,0,3),yn(3,0,3),yn(2,2,3),yn(2,2,3),yn(1,2,2),yn(2,1,2),yn(0,2,2),yn(2,0,2),dn(262,4),dn(278,4),dn(294,4),dn(310,3),dn(318,2),dn(322,2),dn(326,3),dn(334,2),dn(338,1),dn(340,2),dn(344,2),dn(348,2),dn(352,2),dn(356,2),yn(1,15,4),yn(15,1,4),yn(15,0,4),dn(360,1),dn(362,1),dn(364,1),yn(14,2,4),dn(366,1),yn(1,14,4),yn(14,1,4),dn(368,1),dn(370,1),dn(372,1),dn(374,1),dn(376,1),dn(378,1),yn(12,6,4),yn(3,13,4),dn(380,1),yn(2,13,4),yn(13,2,4),yn(1,13,4),yn(11,7,4),dn(382,1),dn(384,1),yn(12,3,4),dn(386,1),yn(4,11,4),yn(13,1,3),yn(13,1,3),yn(0,13,4),yn(13,0,4),yn(8,10,4),yn(10,8,4),yn(4,12,4),yn(12,4,4),yn(6,11,4),yn(11,6,4),yn(3,12,3),yn(3,12,3),yn(2,12,3),yn(2,12,3),yn(12,2,3),yn(12,2,3),yn(5,11,3),yn(5,11,3),yn(11,5,4),yn(8,9,4),yn(1,12,3),yn(1,12,3),yn(12,1,3),yn(12,1,3),yn(9,8,4),yn(0,12,4),yn(12,0,3),yn(12,0,3),yn(11,4,4),yn(6,10,4),yn(10,6,4),yn(7,9,4),yn(3,11,3),yn(3,11,3),yn(11,3,3),yn(11,3,3),yn(8,8,4),yn(5,10,4),yn(2,11,3),yn(2,11,3),yn(10,5,4),yn(6,9,4),yn(10,4,3),yn(10,4,3),yn(7,8,4),yn(8,7,4),yn(9,4,3),yn(9,4,3),yn(7,7,4),yn(7,6,4),yn(11,2,2),yn(11,2,2),yn(11,2,2),yn(11,2,2),yn(1,11,2),yn(1,11,2),yn(11,1,2),yn(11,1,2),yn(0,11,3),yn(11,0,3),yn(9,6,3),yn(4,10,3),yn(3,10,3),yn(10,3,3),yn(5,9,3),yn(9,5,3),yn(2,10,2),yn(2,10,2),yn(10,2,2),yn(10,2,2),yn(1,10,2),yn(1,10,2),yn(10,1,2),yn(10,1,2),yn(0,10,3),yn(6,8,3),yn(10,0,2),yn(10,0,2),yn(8,6,3),yn(4,9,3),yn(9,3,2),yn(9,3,2),yn(3,9,3),yn(5,8,3),yn(8,5,3),yn(6,7,3),yn(2,9,2),yn(2,9,2),yn(9,2,2),yn(9,2,2),yn(5,7,3),yn(7,5,3),yn(3,8,2),yn(3,8,2),yn(8,3,2),yn(8,3,2),yn(6,6,3),yn(4,7,3),yn(7,4,3),yn(5,6,3),yn(6,5,3),yn(7,3,3),yn(1,9,1),yn(9,1,1),yn(0,9,2),yn(9,0,2),yn(4,8,2),yn(8,4,2),yn(7,2,2),yn(7,2,2),yn(4,6,3),yn(6,4,3),yn(2,8,1),yn(2,8,1),yn(2,8,1),yn(2,8,1),yn(8,2,1),yn(1,8,1),yn(3,7,2),yn(2,7,2),yn(1,7,1),yn(1,7,1),yn(7,1,1),yn(7,1,1),yn(5,5,2),yn(0,7,2),yn(7,0,2),yn(3,6,2),yn(6,3,2),yn(4,5,2),yn(5,4,2),yn(2,6,2),yn(6,2,2),yn(3,5,2),yn(0,8,1),yn(8,0,1),yn(1,6,1),yn(6,1,1),yn(0,6,1),yn(6,0,1),yn(5,3,2),yn(4,4,2),yn(2,5,1),yn(2,5,1),yn(5,2,1),yn(0,5,1),yn(3,4,1),yn(4,3,1),yn(5,0,1),yn(2,4,1),yn(4,2,1),yn(3,3,1),dn(388,3),yn(15,15,4),yn(14,15,4),yn(13,15,4),yn(14,14,4),yn(12,15,4),yn(13,14,4),yn(11,15,4),yn(15,11,4),yn(12,14,4),yn(13,12,4),dn(396,1),yn(14,12,3),yn(14,12,3),yn(13,13,3),yn(13,13,3),yn(15,10,4),yn(12,13,4),yn(11,14,3),yn(11,14,3),yn(14,11,3),yn(14,11,3),yn(9,15,3),yn(9,15,3),yn(15,9,3),yn(15,9,3),yn(14,10,3),yn(14,10,3),yn(11,13,3),yn(11,13,3),yn(13,11,3),yn(13,11,3),yn(8,15,3),yn(8,15,3),yn(15,8,3),yn(15,8,3),yn(12,12,3),yn(12,12,3),yn(10,14,4),yn(9,14,4),yn(8,14,3),yn(8,14,3),yn(7,15,4),yn(7,14,4),yn(15,7,2),yn(15,7,2),yn(15,7,2),yn(15,7,2),yn(13,10,2),yn(13,10,2),yn(10,13,3),yn(11,12,3),yn(12,11,3),yn(15,6,3),yn(6,15,2),yn(6,15,2),yn(14,8,2),yn(5,15,2),yn(9,13,2),yn(13,9,2),yn(15,5,2),yn(14,7,2),yn(10,12,2),yn(11,11,2),yn(4,15,2),yn(4,15,2),yn(15,4,2),yn(15,4,2),yn(12,10,3),yn(14,6,3),yn(15,3,2),yn(15,3,2),yn(3,15,1),yn(3,15,1),yn(8,13,2),yn(13,8,2),yn(2,15,1),yn(15,2,1),yn(6,14,2),yn(9,12,2),yn(0,15,1),yn(0,15,1),yn(12,9,2),yn(5,14,2),yn(10,11,1),yn(10,11,1),yn(7,13,2),yn(13,7,2),yn(4,14,1),yn(4,14,1),yn(12,8,2),yn(13,6,2),yn(3,14,1),yn(3,14,1),yn(11,9,1),yn(11,9,1),yn(9,11,2),yn(10,10,2),yn(11,10,1),yn(14,5,1),yn(14,4,1),yn(8,12,1),yn(6,13,1),yn(14,3,1),yn(2,14,1),yn(0,14,1),yn(14,0,1),yn(5,13,1),yn(13,5,1),yn(7,12,1),yn(12,7,1),yn(4,13,1),yn(8,11,1),yn(11,8,1),yn(13,4,1),yn(9,10,1),yn(10,9,1),yn(6,12,1),yn(13,3,1),yn(7,11,1),yn(5,12,1),yn(12,5,1),yn(9,9,1),yn(7,10,1),yn(10,7,1),yn(9,7,1),yn(15,14,3),yn(15,12,3),yn(15,13,2),yn(15,13,2),yn(14,13,1),yn(14,13,1),yn(14,13,1),yn(14,13,1),yn(10,15,1),yn(14,9,1)];const _n=[dn(16,4),dn(32,4),dn(48,4),dn(64,4),dn(80,4),dn(96,3),dn(104,3),dn(112,2),dn(116,1),dn(118,1),yn(1,1,3),yn(1,1,3),yn(0,1,4),yn(1,0,4),yn(0,0,3),yn(0,0,3),dn(120,4),dn(136,4),dn(152,4),dn(168,4),dn(184,4),dn(200,3),dn(208,3),dn(216,4),dn(232,3),dn(240,3),dn(248,3),dn(256,3),dn(264,2),dn(268,3),dn(276,3),dn(284,2),dn(288,2),dn(292,2),dn(296,2),dn(300,2),dn(304,2),dn(308,2),dn(312,2),dn(316,2),dn(320,1),dn(322,1),dn(324,1),dn(326,2),dn(330,1),dn(332,1),dn(334,2),dn(338,1),dn(340,1),dn(342,1),yn(9,1,4),dn(344,1),dn(346,1),dn(348,1),dn(350,1),dn(352,1),yn(2,8,4),yn(8,2,4),yn(1,8,4),yn(8,1,4),dn(354,1),dn(356,1),dn(358,1),dn(360,1),yn(2,7,4),yn(7,2,4),yn(6,4,4),yn(1,7,4),yn(5,5,4),yn(7,1,4),dn(362,1),yn(3,6,4),yn(6,3,4),yn(4,5,4),yn(5,4,4),yn(2,6,4),yn(6,2,4),yn(1,6,4),dn(364,1),yn(3,5,4),yn(6,1,3),yn(6,1,3),yn(5,3,4),yn(4,4,4),yn(2,5,3),yn(2,5,3),yn(5,2,3),yn(5,2,3),yn(1,5,3),yn(1,5,3),yn(5,1,3),yn(5,1,3),yn(0,5,4),yn(5,0,4),yn(3,4,3),yn(3,4,3),yn(4,3,3),yn(2,4,3),yn(4,2,3),yn(3,3,3),yn(4,1,2),yn(4,1,2),yn(1,4,3),yn(0,4,3),yn(2,3,2),yn(2,3,2),yn(3,2,2),yn(3,2,2),yn(4,0,3),yn(0,3,3),yn(1,3,2),yn(1,3,2),yn(3,1,2),yn(3,0,2),yn(2,2,1),yn(2,2,1),yn(1,2,1),yn(2,1,1),yn(0,2,1),yn(2,0,1),dn(366,1),dn(368,1),yn(14,14,4),dn(370,1),dn(372,1),dn(374,1),yn(15,11,4),dn(376,1),yn(13,13,4),yn(10,15,4),yn(15,10,4),yn(11,14,4),yn(14,11,4),yn(12,13,4),yn(13,12,4),yn(9,15,4),yn(15,9,4),yn(14,10,4),yn(11,13,4),yn(13,11,4),yn(8,15,4),yn(15,8,4),yn(12,12,4),yn(9,14,4),yn(14,9,4),yn(7,15,4),yn(15,7,4),yn(10,13,4),yn(13,10,4),yn(11,12,4),yn(6,15,4),dn(378,1),yn(12,11,3),yn(12,11,3),yn(15,6,3),yn(15,6,3),yn(8,14,4),yn(14,8,4),yn(5,15,4),yn(9,13,4),yn(15,5,3),yn(15,5,3),yn(7,14,3),yn(7,14,3),yn(14,7,3),yn(14,7,3),yn(10,12,3),yn(10,12,3),yn(12,10,3),yn(12,10,3),yn(11,11,3),yn(11,11,3),yn(13,9,4),yn(8,13,4),yn(4,15,3),yn(4,15,3),yn(15,4,3),yn(15,4,3),yn(3,15,3),yn(3,15,3),yn(15,3,3),yn(15,3,3),yn(13,8,3),yn(13,8,3),yn(14,6,3),yn(14,6,3),yn(2,15,3),yn(2,15,3),yn(15,2,3),yn(15,2,3),yn(6,14,4),yn(15,0,4),yn(1,15,3),yn(1,15,3),yn(15,1,3),yn(15,1,3),yn(9,12,3),yn(9,12,3),yn(12,9,3),yn(12,9,3),yn(5,14,3),yn(10,11,3),yn(11,10,3),yn(14,5,3),yn(7,13,3),yn(13,7,3),yn(4,14,3),yn(14,4,3),yn(8,12,3),yn(12,8,3),yn(3,14,3),yn(6,13,3),yn(13,6,3),yn(14,3,3),yn(9,11,3),yn(11,9,3),yn(2,14,3),yn(2,14,3),yn(10,10,3),yn(10,10,3),yn(14,2,3),yn(14,2,3),yn(1,14,3),yn(1,14,3),yn(14,1,3),yn(14,1,3),yn(0,14,4),yn(14,0,4),yn(5,13,3),yn(5,13,3),yn(13,5,3),yn(13,5,3),yn(7,12,3),yn(12,7,3),yn(4,13,3),yn(8,11,3),yn(13,4,2),yn(13,4,2),yn(11,8,3),yn(9,10,3),yn(10,9,3),yn(6,12,3),yn(12,6,3),yn(3,13,3),yn(13,3,2),yn(13,3,2),yn(13,2,2),yn(13,2,2),yn(2,13,3),yn(0,13,3),yn(1,13,2),yn(1,13,2),yn(7,11,2),yn(7,11,2),yn(11,7,2),yn(11,7,2),yn(13,1,2),yn(13,1,2),yn(5,12,3),yn(13,0,3),yn(12,5,2),yn(12,5,2),yn(8,10,2),yn(8,10,2),yn(10,8,2),yn(4,12,2),yn(12,4,2),yn(6,11,2),yn(11,6,2),yn(11,6,2),yn(9,9,3),yn(0,12,3),yn(3,12,2),yn(3,12,2),yn(12,3,2),yn(12,3,2),yn(7,10,2),yn(7,10,2),yn(10,7,2),yn(10,7,2),yn(10,6,2),yn(10,6,2),yn(12,0,3),yn(0,11,3),yn(12,2,1),yn(12,2,1),yn(2,12,2),yn(5,11,2),yn(11,5,2),yn(1,12,2),yn(8,9,2),yn(9,8,2),yn(12,1,2),yn(4,11,2),yn(11,4,2),yn(6,10,2),yn(3,11,2),yn(7,9,2),yn(11,3,1),yn(11,3,1),yn(9,7,2),yn(8,8,2),yn(2,11,2),yn(5,10,2),yn(11,2,1),yn(11,2,1),yn(10,5,2),yn(1,11,2),yn(11,1,1),yn(11,1,1),yn(11,0,2),yn(6,9,2),yn(9,6,2),yn(4,10,2),yn(10,4,2),yn(7,8,2),yn(8,7,2),yn(3,10,2),yn(10,3,1),yn(10,3,1),yn(5,9,1),yn(9,5,1),yn(2,10,1),yn(10,2,1),yn(1,10,1),yn(10,1,1),yn(0,10,2),yn(10,0,2),yn(6,8,1),yn(6,8,1),yn(8,6,1),yn(4,9,1),yn(9,4,1),yn(3,9,1),yn(9,3,1),yn(9,3,1),yn(7,7,2),yn(0,9,2),yn(5,8,1),yn(8,5,1),yn(2,9,1),yn(6,7,1),yn(7,6,1),yn(9,2,1),yn(1,9,1),yn(9,0,1),yn(4,8,1),yn(8,4,1),yn(5,7,1),yn(7,5,1),yn(3,8,1),yn(8,3,1),yn(6,6,1),yn(4,7,1),yn(7,4,1),yn(0,8,1),yn(8,0,1),yn(5,6,1),yn(6,5,1),yn(3,7,1),yn(7,3,1),yn(4,6,1),yn(0,7,1),yn(7,0,1),yn(0,6,1),yn(6,0,1),yn(15,15,1),yn(14,15,1),yn(15,14,1),yn(13,15,1),yn(15,13,1),yn(12,15,1),yn(15,12,1),yn(13,14,1),yn(14,13,1),yn(11,15,1),yn(12,14,1),yn(14,12,1),yn(10,14,1),yn(0,15,1)];const Dn=[dn(16,4),dn(32,4),dn(48,4),dn(64,2),yn(1,1,4),yn(0,1,4),yn(1,0,3),yn(1,0,3),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),yn(0,0,1),dn(68,3),dn(76,3),dn(84,2),yn(15,15,4),dn(88,2),dn(92,1),dn(94,4),yn(15,2,4),dn(110,1),yn(1,15,4),yn(15,1,4),dn(112,4),dn(128,4),dn(144,4),dn(160,4),dn(176,4),dn(192,4),dn(208,3),dn(216,3),dn(224,3),dn(232,3),dn(240,3),dn(248,3),dn(256,3),dn(264,2),dn(268,2),dn(272,1),dn(274,2),dn(278,2),dn(282,1),yn(5,1,4),dn(284,1),dn(286,1),dn(288,1),dn(290,1),yn(1,4,4),yn(4,1,4),dn(292,1),yn(2,3,4),yn(3,2,4),yn(1,3,3),yn(1,3,3),yn(3,1,3),yn(3,1,3),yn(0,3,4),yn(3,0,4),yn(2,2,3),yn(2,2,3),yn(1,2,2),yn(2,1,2),yn(0,2,2),yn(2,0,2),yn(14,15,3),yn(15,14,3),yn(13,15,3),yn(15,13,3),yn(12,15,3),yn(15,12,3),yn(11,15,3),yn(15,11,3),yn(10,15,2),yn(10,15,2),yn(15,10,3),yn(9,15,3),yn(15,9,3),yn(15,8,3),yn(8,15,2),yn(8,15,2),yn(7,15,2),yn(15,7,2),yn(6,15,2),yn(15,6,2),yn(5,15,2),yn(15,5,2),yn(4,15,1),yn(4,15,1),yn(15,4,1),yn(15,3,1),yn(15,0,1),yn(15,0,1),yn(15,0,1),yn(15,0,1),yn(15,0,1),yn(15,0,1),yn(15,0,1),yn(15,0,1),yn(3,15,2),yn(3,15,2),yn(3,15,2),yn(3,15,2),dn(294,4),dn(310,3),dn(318,3),dn(326,3),yn(2,15,1),yn(0,15,1),dn(334,2),dn(338,2),dn(342,2),dn(346,1),dn(348,2),dn(352,2),dn(356,1),dn(358,2),dn(362,2),dn(366,2),dn(370,2),yn(14,3,4),dn(374,1),dn(376,1),dn(378,1),dn(380,1),dn(382,1),dn(384,1),dn(386,1),yn(0,13,4),dn(388,1),dn(390,1),dn(392,1),yn(3,12,4),dn(394,1),yn(1,12,4),yn(12,0,4),dn(396,1),yn(14,2,3),yn(14,2,3),yn(2,14,4),yn(1,14,4),yn(13,3,4),yn(2,13,4),yn(13,2,4),yn(13,1,4),yn(3,11,4),dn(398,1),yn(1,13,3),yn(1,13,3),yn(12,4,4),yn(6,11,4),yn(12,3,4),yn(10,7,4),yn(2,12,3),yn(2,12,3),yn(12,2,4),yn(11,5,4),yn(12,1,4),yn(0,12,4),yn(4,11,4),yn(11,4,4),yn(6,10,4),yn(10,6,4),yn(11,3,3),yn(11,3,3),yn(5,10,4),yn(10,5,4),yn(2,11,3),yn(2,11,3),yn(11,2,3),yn(11,2,3),yn(1,11,3),yn(1,11,3),yn(11,1,3),yn(11,1,3),yn(0,11,4),yn(11,0,4),yn(6,9,4),yn(9,6,4),yn(4,10,4),yn(10,4,4),yn(7,8,4),yn(8,7,4),yn(10,3,3),yn(10,3,3),yn(3,10,4),yn(5,9,4),yn(2,10,3),yn(2,10,3),yn(9,5,4),yn(6,8,4),yn(10,1,3),yn(10,1,3),yn(8,6,4),yn(7,7,4),yn(9,4,3),yn(9,4,3),yn(4,9,4),yn(5,7,4),yn(6,7,3),yn(6,7,3),yn(10,2,2),yn(10,2,2),yn(10,2,2),yn(10,2,2),yn(1,10,2),yn(1,10,2),yn(0,10,3),yn(10,0,3),yn(3,9,3),yn(9,3,3),yn(5,8,3),yn(8,5,3),yn(2,9,2),yn(2,9,2),yn(9,2,2),yn(9,2,2),yn(7,6,3),yn(0,9,3),yn(1,9,2),yn(1,9,2),yn(9,1,2),yn(9,1,2),yn(9,0,3),yn(4,8,3),yn(8,4,3),yn(7,5,3),yn(3,8,3),yn(8,3,3),yn(6,6,3),yn(2,8,3),yn(8,2,2),yn(8,2,2),yn(4,7,3),yn(7,4,3),yn(1,8,2),yn(1,8,2),yn(8,1,2),yn(8,1,2),yn(8,0,2),yn(8,0,2),yn(0,8,3),yn(5,6,3),yn(3,7,2),yn(3,7,2),yn(7,3,2),yn(7,3,2),yn(6,5,3),yn(4,6,3),yn(2,7,2),yn(2,7,2),yn(7,2,2),yn(7,2,2),yn(6,4,3),yn(5,5,3),yn(0,7,2),yn(0,7,2),yn(1,7,1),yn(1,7,1),yn(1,7,1),yn(1,7,1),yn(7,1,1),yn(7,1,1),yn(7,0,2),yn(3,6,2),yn(6,3,2),yn(4,5,2),yn(5,4,2),yn(2,6,2),yn(6,2,1),yn(1,6,1),yn(6,1,1),yn(6,1,1),yn(0,6,2),yn(6,0,2),yn(5,3,1),yn(5,3,1),yn(3,5,2),yn(4,4,2),yn(2,5,1),yn(5,2,1),yn(1,5,1),yn(0,5,1),yn(3,4,1),yn(4,3,1),yn(5,0,1),yn(2,4,1),yn(4,2,1),yn(3,3,1),yn(0,4,1),yn(4,0,1),yn(12,14,4),dn(400,1),yn(13,14,3),yn(13,14,3),yn(14,9,3),yn(14,9,3),yn(14,10,4),yn(13,9,4),yn(14,14,2),yn(14,14,2),yn(14,14,2),yn(14,14,2),yn(14,13,3),yn(14,13,3),yn(14,11,3),yn(14,11,3),yn(11,14,2),yn(11,14,2),yn(12,13,2),yn(12,13,2),yn(13,12,3),yn(13,11,3),yn(10,14,2),yn(10,14,2),yn(12,12,2),yn(12,12,2),yn(10,13,3),yn(13,10,3),yn(7,14,3),yn(10,12,3),yn(12,10,2),yn(12,10,2),yn(12,9,3),yn(7,13,3),yn(5,14,2),yn(5,14,2),yn(11,13,1),yn(11,13,1),yn(11,13,1),yn(11,13,1),yn(9,14,1),yn(9,14,1),yn(11,12,2),yn(12,11,2),yn(8,14,2),yn(14,8,2),yn(9,13,2),yn(14,7,2),yn(11,11,2),yn(8,13,2),yn(13,8,2),yn(6,14,2),yn(14,6,1),yn(9,12,1),yn(10,11,2),yn(11,10,2),yn(14,5,2),yn(13,7,2),yn(4,14,1),yn(4,14,1),yn(14,4,2),yn(8,12,2),yn(12,8,1),yn(3,14,1),yn(6,13,1),yn(6,13,1),yn(13,6,2),yn(9,11,2),yn(11,9,2),yn(10,10,2),yn(14,1,1),yn(14,1,1),yn(13,4,1),yn(13,4,1),yn(11,8,2),yn(10,9,2),yn(7,11,1),yn(7,11,1),yn(11,7,2),yn(13,0,2),yn(0,14,1),yn(14,0,1),yn(5,13,1),yn(13,5,1),yn(7,12,1),yn(12,7,1),yn(4,13,1),yn(8,11,1),yn(9,10,1),yn(6,12,1),yn(12,6,1),yn(3,13,1),yn(5,12,1),yn(12,5,1),yn(8,10,1),yn(10,8,1),yn(9,9,1),yn(4,12,1),yn(11,6,1),yn(7,10,1),yn(5,11,1),yn(8,9,1),yn(9,8,1),yn(7,9,1),yn(9,7,1),yn(8,8,1),yn(14,12,1),yn(13,13,1)];const Pn=[dn(16,4),dn(32,4),dn(48,4),yn(15,15,4),dn(64,4),dn(80,4),dn(96,4),dn(112,4),dn(128,4),dn(144,4),dn(160,3),dn(168,2),yn(1,1,4),yn(0,1,4),yn(1,0,4),yn(0,0,4),yn(14,15,4),yn(15,14,4),yn(13,15,4),yn(15,13,4),yn(12,15,4),yn(15,12,4),yn(11,15,4),yn(15,11,4),yn(15,10,3),yn(15,10,3),yn(10,15,4),yn(9,15,4),yn(15,9,3),yn(15,9,3),yn(15,8,3),yn(15,8,3),yn(8,15,4),yn(7,15,4),yn(15,7,3),yn(15,7,3),yn(6,15,3),yn(6,15,3),yn(15,6,3),yn(15,6,3),yn(5,15,3),yn(5,15,3),yn(15,5,3),yn(15,5,3),yn(4,15,3),yn(4,15,3),yn(15,4,3),yn(15,4,3),yn(3,15,3),yn(3,15,3),yn(15,3,3),yn(15,3,3),yn(2,15,3),yn(2,15,3),yn(15,2,3),yn(15,2,3),yn(15,1,3),yn(15,1,3),yn(1,15,4),yn(15,0,4),dn(172,3),dn(180,3),dn(188,3),dn(196,3),dn(204,4),dn(220,3),dn(228,3),dn(236,3),dn(244,2),dn(248,2),dn(252,2),dn(256,2),dn(260,2),dn(264,2),dn(268,2),dn(272,2),dn(276,2),dn(280,3),dn(288,2),dn(292,2),dn(296,2),dn(300,3),dn(308,2),dn(312,3),dn(320,1),dn(322,2),dn(326,2),dn(330,1),dn(332,2),dn(336,1),dn(338,1),dn(340,1),dn(342,1),dn(344,1),dn(346,1),dn(348,1),dn(350,1),dn(352,1),dn(354,1),dn(356,1),dn(358,1),dn(360,1),dn(362,1),dn(364,1),dn(366,1),dn(368,1),dn(370,2),dn(374,1),dn(376,2),yn(7,3,4),dn(380,1),yn(7,2,4),yn(4,6,4),yn(6,4,4),yn(5,5,4),yn(7,1,4),yn(3,6,4),yn(6,3,4),yn(4,5,4),yn(5,4,4),yn(2,6,4),yn(6,2,4),yn(1,6,4),yn(6,1,4),dn(382,1),yn(3,5,4),yn(5,3,4),yn(4,4,4),yn(2,5,4),yn(5,2,4),yn(1,5,4),dn(384,1),yn(5,1,3),yn(5,1,3),yn(3,4,4),yn(4,3,4),yn(2,4,3),yn(2,4,3),yn(4,2,3),yn(4,2,3),yn(3,3,3),yn(3,3,3),yn(1,4,3),yn(1,4,3),yn(4,1,3),yn(4,1,3),yn(0,4,4),yn(4,0,4),yn(2,3,3),yn(2,3,3),yn(3,2,3),yn(3,2,3),yn(1,3,2),yn(1,3,2),yn(1,3,2),yn(1,3,2),yn(3,1,2),yn(3,1,2),yn(3,1,2),yn(3,1,2),yn(0,3,3),yn(3,0,3),yn(2,2,2),yn(2,2,2),yn(1,2,1),yn(1,2,1),yn(1,2,1),yn(1,2,1),yn(2,1,1),yn(2,1,1),yn(0,2,2),yn(2,0,2),yn(0,15,1),yn(0,15,1),yn(0,15,1),yn(0,15,1),yn(14,14,3),yn(13,14,3),yn(14,13,3),yn(12,14,3),yn(14,12,3),yn(13,13,3),yn(11,14,3),yn(14,11,3),yn(12,13,3),yn(13,12,3),yn(10,14,3),yn(14,10,3),yn(11,13,3),yn(13,11,3),yn(12,12,3),yn(9,14,3),yn(14,9,3),yn(10,13,3),yn(13,10,3),yn(11,12,3),yn(12,11,3),yn(8,14,3),yn(14,8,3),yn(9,13,3),yn(13,9,3),yn(7,14,3),yn(14,7,3),yn(10,12,3),yn(12,10,3),yn(12,10,3),yn(11,11,3),yn(11,11,3),yn(8,13,3),yn(8,13,3),yn(13,8,3),yn(13,8,3),yn(0,14,4),yn(14,0,4),yn(0,13,3),yn(0,13,3),yn(14,6,2),yn(14,6,2),yn(14,6,2),yn(14,6,2),yn(6,14,3),yn(9,12,3),yn(12,9,2),yn(12,9,2),yn(5,14,2),yn(5,14,2),yn(11,10,2),yn(11,10,2),yn(14,5,2),yn(14,5,2),yn(10,11,3),yn(7,13,3),yn(13,7,2),yn(13,7,2),yn(14,4,2),yn(14,4,2),yn(8,12,2),yn(8,12,2),yn(12,8,2),yn(12,8,2),yn(4,14,3),yn(2,14,3),yn(3,14,2),yn(3,14,2),yn(6,13,2),yn(13,6,2),yn(14,3,2),yn(9,11,2),yn(11,9,2),yn(10,10,2),yn(14,2,2),yn(1,14,2),yn(14,1,2),yn(5,13,2),yn(13,5,2),yn(7,12,2),yn(12,7,2),yn(4,13,2),yn(8,11,2),yn(11,8,2),yn(13,4,2),yn(9,10,2),yn(10,9,2),yn(6,12,2),yn(12,6,2),yn(3,13,2),yn(13,3,2),yn(2,13,2),yn(13,2,2),yn(1,13,2),yn(7,11,2),yn(11,7,2),yn(13,1,2),yn(5,12,2),yn(12,5,2),yn(8,10,2),yn(10,8,2),yn(9,9,2),yn(4,12,2),yn(12,4,2),yn(6,11,2),yn(6,11,2),yn(11,6,2),yn(11,6,2),yn(13,0,3),yn(0,12,3),yn(3,12,2),yn(3,12,2),yn(12,3,2),yn(7,10,2),yn(10,7,2),yn(2,12,2),yn(12,2,2),yn(5,11,2),yn(11,5,2),yn(1,12,2),yn(8,9,2),yn(9,8,2),yn(12,1,2),yn(4,11,2),yn(12,0,3),yn(0,11,3),yn(3,11,2),yn(3,11,2),yn(11,0,3),yn(0,10,3),yn(1,10,2),yn(1,10,2),yn(11,4,1),yn(11,4,1),yn(6,10,2),yn(10,6,2),yn(7,9,2),yn(7,9,2),yn(9,7,2),yn(9,7,2),yn(10,0,3),yn(0,9,3),yn(9,0,2),yn(9,0,2),yn(11,3,1),yn(8,8,1),yn(2,11,2),yn(5,10,2),yn(11,2,1),yn(11,2,1),yn(10,5,2),yn(1,11,2),yn(11,1,2),yn(6,9,2),yn(9,6,1),yn(10,4,1),yn(4,10,2),yn(7,8,2),yn(8,7,1),yn(8,7,1),yn(3,10,1),yn(10,3,1),yn(5,9,1),yn(9,5,1),yn(2,10,1),yn(10,2,1),yn(10,1,1),yn(6,8,1),yn(8,6,1),yn(7,7,1),yn(4,9,1),yn(9,4,1),yn(3,9,1),yn(9,3,1),yn(5,8,1),yn(8,5,1),yn(2,9,1),yn(6,7,1),yn(7,6,1),yn(9,2,1),yn(1,9,1),yn(9,1,1),yn(4,8,1),yn(8,4,1),yn(5,7,1),yn(7,5,1),yn(3,8,1),yn(8,3,1),yn(6,6,1),yn(2,8,1),yn(8,2,1),yn(1,8,1),yn(4,7,1),yn(7,4,1),yn(8,1,1),yn(8,1,1),yn(0,8,2),yn(8,0,2),yn(5,6,1),yn(6,5,1),yn(1,7,1),yn(1,7,1),yn(0,7,2),yn(7,0,2),yn(3,7,1),yn(2,7,1),yn(0,6,1),yn(6,0,1),yn(0,5,1),yn(5,0,1)];const Bn=[mn,gn];const jn=[new Hn(bn,0,0),new Hn(wn,0,3),new Hn(En,0,3),new Hn(Sn,0,3),null,new Hn(xn,0,3),new Hn(Tn,0,4),new Hn(Nn,0,4),new Hn(Cn,0,4),new Hn(kn,0,4),new Hn(Ln,0,4),new Hn(An,0,4),new Hn(On,0,4),new Hn(Mn,0,4),null,new Hn(_n,0,4),new Hn(Dn,1,4),new Hn(Dn,2,4),new Hn(Dn,3,4),new Hn(Dn,4,4),new Hn(Dn,6,4),new Hn(Dn,8,4),new Hn(Dn,10,4),new Hn(Dn,13,4),new Hn(Pn,4,4),new Hn(Pn,5,4),new Hn(Pn,6,4),new Hn(Pn,7,4),new Hn(Pn,8,4),new Hn(Pn,9,4),new Hn(Pn,11,4),new Hn(Pn,13,4)];var Fn=function(){function e(){this.tmp_imdct36=new Float64Array(18);this.tmp_dctIV=new Float64Array(18);this.tmp_sdctII=new Float64Array(9)}function c(e,t,n){var r,c,h,p,d,v,m,g,y,b,w,E,S;var x,T,N,C,k,L,A,O,M,_,D,P,H;var B,j,F,I,q,R,U,z;r=e[3]+e[5];c=e[3]-e[5];h=e[6]+e[2];p=e[6]-e[2];d=e[1]+e[7];v=e[1]-e[7];m=e[8]+e[0];g=e[8]-e[0];y=r+h;b=r-h;w=r-m;E=h-m;S=y+m;x=c-p;T=x+g;N=p+g;C=c-g;k=c+p;B=k*-u;j=C*-i;F=N*-a;I=T*-s;q=v*-s;R=E*-l;U=w*-f;z=b*-o;L=e[4]+d;A=2*e[4]-d;O=A+R;M=A-R;_=A+U;D=q+F;P=q-F;H=q+j;t[n+0]=L+S;t[n+2]=B-H;t[n+4]=z-O;t[n+6]=I;t[n+8]=M-U;t[n+10]=P-j;t[n+12]=S-2*L;t[n+14]=D+B;t[n+16]=_+z}e.prototype.imdct36=function(e,t){var n=this.tmp_imdct36;this.dctIV(e,n);for(var r=0;r<9;++r){t[r]=n[9+r]}for(var r=9;r<27;++r){t[r]=-n[36-(9+r)-1]}for(var r=27;r<36;++r){t[r]=-n[r-27]}};var t=[];for(r=0;r<18;r++){t[r]=2*Math.cos(Math.PI*(2*r+1)/(4*18))}e.prototype.dctIV=function(e,n){var r=this.tmp_dctIV;for(var i=0;i<18;++i){r[i]=e[i]*t[i]}this.sdctII(r,n);n[0]/=2;for(var i=1;i<18;++i){n[i]=n[i]/2-n[i-1]}};var n=[];for(var r=0;r<9;++r){n[r]=2*Math.cos(Math.PI*(2*r+1)/(2*18))}e.prototype.sdctII=function(e,t){var r=this.tmp_sdctII;for(var i=0;i<9;++i){r[i]=e[i]+e[18-i-1]}c(r,t,0);for(var i=0;i<9;++i){r[i]=(e[i]-e[18-i-1])*n[i]}c(r,t,1);for(var i=3;i<18;i+=2){t[i]-=t[i-2]}};var i=2*Math.cos(1*Math.PI/18);var s=2*Math.cos(3*Math.PI/18);var o=2*Math.cos(4*Math.PI/18);var u=2*Math.cos(5*Math.PI/18);var a=2*Math.cos(7*Math.PI/18);var f=2*Math.cos(8*Math.PI/18);var l=2*Math.cos(16*Math.PI/18);return e}();const In=[[.608761429,-.923879533,-.130526192,.991444861,-.382683432,-.79335334],[-.79335334,.382683432,.991444861,.130526192,-.923879533,-.608761429],[.382683432,-.923879533,.923879533,-.382683432,-.382683432,.923879533],[-.923879533,-.382683432,.382683432,.923879533,.923879533,.382683432],[.130526192,-.382683432,.608761429,-.79335334,.923879533,-.991444861],[-.991444861,-.923879533,-.79335334,-.608761429,-.382683432,-.130526192]];P.layers[3]=zn;zn.prototype.decode=function(e,n){var r=n.header;var i=0;var s=0;var o=r.nchannels();var u=r.flags&k.LSF_EXT?o===1?9:17:o===1?17:32;if(e.next_frame-e.nextByte()<u){e.md_len=0;throw new Error("Bad frame length")}if(r.flags&k.PROTECTION){}var a=this.sideInfo(e,o,r.flags&k.LSF_EXT);var f=a.si;var l=a.data_bitlen;var c=a.priv_bitlen;r.flags|=c;r.private_bits|=f.private_bits;var h=e.copy();h.seek(e.next_frame*8);var p=h.read(16);if((p&65510)===65506){if((p&1)===0)h.advance(16);h.advance(16);i=h.read(p&8?9:8)}var d=e.next_frame-e.nextByte();if(i>f.main_data_begin+d)i=0;var s=f.main_data_begin+d-i;var v=0;var m;if(f.main_data_begin===0){m=e.stream;e.md_len=0;v=s}else{if(f.main_data_begin>e.md_len){throw new Error("bad main_data_begin pointer")}else{var g=e.md_len;if(s>f.main_data_begin){if(e.md_len+s-f.main_data_begin>_){throw new Error("Assertion failed: (stream.md_len + md_len - si.main_data_begin <= MAD_BUFFER_MDLEN)")}v=s-f.main_data_begin;this.memcpy(e.main_data,e.md_len,e.stream.stream,e.nextByte(),v);e.md_len+=v}m=new t.Bitstream(t.Stream.fromBuffer(new t.Buffer(e.main_data)));m.advance((g-f.main_data_begin)*8)}}var y=d-v;this.decodeMainData(m,n,f,o);if(y>=i){this.memcpy(e.main_data,0,e.stream.stream,e.next_frame-i,i);e.md_len=i}else{if(s<f.main_data_begin){var b=f.main_data_begin-s;if(b+y>i)b=i-y;if(b<e.md_len){this.memcpy(e.main_data,0,e.main_data,e.md_len-b,b);e.md_len=b}}else{e.md_len=0}this.memcpy(e.main_data,e.md_len,e.stream.stream,e.next_frame-y,y);e.md_len+=y}};zn.prototype.memcpy=function(e,t,n,r,i){var s;if(n.subarray)s=n.subarray(r,r+i);else s=n.peekBuffer(r-n.offset,i).data;e.set(s,t);return e};zn.prototype.sideInfo=function(e,t,n){var r=this.si;var i=0;var s=n?t===1?1:2:t===1?5:3;r.main_data_begin=e.read(n?8:9);r.private_bits=e.read(s);var o=1;if(!n){o=2;for(var u=0;u<t;++u)r.scfsi[u]=e.read(4)}for(var a=0;a<o;a++){var f=r.gr[a];for(var u=0;u<t;u++){var l=f.ch[u];l.part2_3_length=e.read(12);l.big_values=e.read(9);l.global_gain=e.read(8);l.scalefac_compress=e.read(n?9:4);i+=l.part2_3_length;if(l.big_values>288)throw new Error("bad big_values count");l.flags=0;if(e.read(1)){l.block_type=e.read(2);if(l.block_type===0)throw new Error("reserved block_type");if(!n&&l.block_type===2&&r.scfsi[u])throw new Error("bad scalefactor selection info");l.region0_count=7;l.region1_count=36;if(e.read(1))l.flags|=Gt;else if(l.block_type===2)l.region0_count=8;for(var c=0;c<2;c++)l.table_select[c]=e.read(5);for(var c=0;c<3;c++)l.subblock_gain[c]=e.read(3)}else{l.block_type=0;for(var c=0;c<3;c++)l.table_select[c]=e.read(5);l.region0_count=e.read(4);l.region1_count=e.read(3)}l.flags|=e.read(n?2:3)}}return{si:r,data_bitlen:i,priv_bitlen:s}};zn.prototype.decodeMainData=function(e,t,n,r){var i=t.header;var s=i.samplerate;if(i.flags&k.MPEG_2_5_EXT)s*=2;var o=(s>>7&15)+(s>>15&1)-8;if(i.flags&k.MPEG_2_5_EXT)o+=3;var u=i.flags&k.LSF_EXT?1:2;var a=this.xr;for(var f=0;f<u;++f){var l=n.gr[f];var c=[];var h=0;for(var p=0;p<r;++p){var d=l.ch[p];var v;c[p]=zt[o].l;if(d.block_type===2){c[p]=d.flags&Gt?zt[o].m:zt[o].s}if(i.flags&k.LSF_EXT){v=this.scalefactors_lsf(e,d,p===0?0:n.gr[1].ch[1],i.mode_extension)}else{v=this.scalefactors(e,d,n.gr[0].ch[p],f===0?0:n.scfsi[p])}this.huffmanDecode(e,a[p],d,c[p],v)}if(i.mode===A.JOINT_STEREO&&i.mode_extension!==0)this.stereo(a,n.gr,f,i,c[0]);for(var p=0;p<r;p++){var d=l.ch[p];var m=t.sbsample[p].slice(18*f);var g,h=0,y,b;var w=this.output;if(d.block_type===2){this.reorder(a[p],d,c[p]);if(d.flags&Gt)this.aliasreduce(a[p],36)}else{this.aliasreduce(a[p],576)}if(d.block_type!==2||d.flags&Gt){var E=d.block_type;if(d.flags&Gt)E=0;for(var g=0;g<2;++g,h+=18){this.imdct_l(a[p].subarray(h,h+18),w,E);this.overlap(w,t.overlap[p][g],m,g)}}else{for(var g=0;g<2;++g,h+=18){this.imdct_s(a[p].subarray(h,h+18),w);this.overlap(w,t.overlap[p][g],m,g)}}this.freqinver(m,1);var y=576;while(y>36&&a[p][y-1]===0){--y}b=32-((576-y)/18<<0);if(d.block_type!==2){for(var g=2;g<b;++g,h+=18){this.imdct_l(a[p].subarray(h,h+18),w,d.block_type);this.overlap(w,t.overlap[p][g],m,g);if(g&1)this.freqinver(m,g)}}else{for(var g=2;g<b;++g,h+=18){this.imdct_s(a[p].subarray(h,h+18),w);this.overlap(w,t.overlap[p][g],m,g);if(g&1)this.freqinver(m,g)}}for(var g=b;g<32;++g){this.overlap_z(t.overlap[p][g],m,g);if(g&1)this.freqinver(m,g)}}}};zn.prototype.scalefactors=function(e,t,n,r){var i=e.offset();var s=sn[t.scalefac_compress].slen1;var o=sn[t.scalefac_compress].slen2;var u;if(t.block_type===2){u=0;var a=t.flags&Gt?8+3*3:6*3;while(a--)t.scalefac[u++]=e.read(s);a=6*3;while(a--)t.scalefac[u++]=e.read(o);a=1*3;while(a--)t.scalefac[u++]=0}else{if(r&8){for(var u=0;u<6;++u)t.scalefac[u]=n.scalefac[u]}else{for(var u=0;u<6;++u)t.scalefac[u]=e.read(s)}if(r&4){for(var u=6;u<11;++u)t.scalefac[u]=n.scalefac[u]}else{for(var u=6;u<11;++u)t.scalefac[u]=e.read(s)}if(r&2){for(var u=11;u<16;++u)t.scalefac[u]=n.scalefac[u]}else{for(var u=11;u<16;++u)t.scalefac[u]=e.read(o)}if(r&1){for(var u=16;u<21;++u)t.scalefac[u]=n.scalefac[u]}else{for(var u=16;u<21;++u)t.scalefac[u]=e.read(o)}t.scalefac[21]=0}return e.offset()-i};zn.prototype.scalefactors_lsf=function(e,t,n,r){var i=e.offset();var s=t.scalefac_compress;var o=t.block_type===2?t.flags&Gt?2:1:0;var u=new Int32Array(4);var a;if(!(r&Yt&&n)){if(s<400){u[0]=(s>>>4)/5;u[1]=(s>>>4)%5;u[2]=s%16>>>2;u[3]=s%4;a=on[0][o]}else if(s<500){s-=400;u[0]=(s>>>2)/5;u[1]=(s>>>2)%5;u[2]=s%4;u[3]=0;a=on[1][o]}else{s-=500;u[0]=s/3;u[1]=s%3;u[2]=0;u[3]=0;t.flags|=Qt;a=on[2][o]}var f=0;for(var l=0;l<4;l++){for(var c=0;c<a[l];c++){t.scalefac[f++]=e.read(u[l])}}while(f<39){t.scalefac[f++]=0}}else{s>>>=1;if(s<180){u[0]=s/36;u[1]=s%36/6;u[2]=s%36%6;u[3]=0;a=on[3][o]}else if(s<244){s-=180;u[0]=s%64>>>4;u[1]=s%16>>>2;u[2]=s%4;u[3]=0;a=on[4][o]}else{s-=244;u[0]=s/3;u[1]=s%3;u[2]=0;u[3]=0;a=on[5][o]}var f=0;for(var l=0;l<4;++l){var h=(1<<u[l])-1;for(var c=0;c<a[l];++c){var p=e.read(u[l]);t.scalefac[f]=p;n.scalefac[f++]=p===h?1:0}}while(f<39){t.scalefac[f]=0;n.scalefac[f++]=0}}return e.offset()-i};zn.prototype.huffmanDecode=function(e,t,n,r,i){var s=this._exponents;var o=0;var u=n.part2_3_length-i;if(u<0)throw new Error("bad audio data length");this.exponents(n,r,s);var a=e.copy();e.advance(u);var f=8-a.bitPosition;f+=32-1-24+(24-f)&~7;var l=a.read(f);u-=f;var c=0;var h=0;var p=this.reqcache;var d=c+r[o++];var v=n.region0_count+1;var m=jn[n.table_select[h]];var g=m.table;var y=m.linbits;var b=m.startbits;if(typeof g==="undefined")throw new Error("bad Huffman table select");var w=0;var E=s[w++];var S=0;var x=n.big_values;while(x--&&f+u>0){if(c===d){d+=r[o++];if(--v===0){if(h===0)v=n.region1_count+1;else v=0;m=jn[n.table_select[++h]];g=m.table;y=m.linbits;b=m.startbits;if(typeof g==="undefined")throw new Error("bad Huffman table select")}if(E!==s[w]){E=s[w];S=0}++w}if(f<21){var T=32-1-21+(21-f)&~7;l=l<<T|a.read(T);f+=T;u-=T}var N=b;var C=g[l>>f-N&(1<<N)-1];while(!C.final){f-=N;N=C.ptr.bits;C=g[C.ptr.offset+(l>>f-N&(1<<N)-1)]}f-=C.value.hlen;if(y){var k=C.value.x;var L=false;switch(k){case 0:t[c]=0;break;case 15:if(f<y+2){l=l<<16|a.read(16);f+=16;u-=16}k+=l>>f-y&(1<<y)-1;f-=y;O=this.requantize(k,E);L=true;break;default:if(S&1<<k){O=p[k]}else{S|=1<<k;O=p[k]=this.requantize(k,E)}L=true}if(L){t[c]=l&1<<f-- -1?-O:O}k=C.value.y;var A=false;switch(k){case 0:t[c+1]=0;break;case 15:if(f<y+1){l=l<<16|a.read(16);f+=16;u-=16}k+=l>>f-y&(1<<y)-1;f-=y;O=this.requantize(k,E);A=true;break;default:if(S&1<<k){O=p[k]}else{S|=1<<k;p[k]=this.requantize(k,E);O=p[k]}A=true}if(A){t[c+1]=l&1<<f-- -1?-O:O}}else{var k=C.value.x;if(k===0){t[c]=0}else{if(S&1<<k)O=p[k];else{S|=1<<k;O=p[k]=this.requantize(k,E)}t[c]=l&1<<f-- -1?-O:O}k=C.value.y;if(k===0){t[c+1]=0}else{if(S&1<<k)O=p[k];else{S|=1<<k;O=p[k]=this.requantize(k,E)}t[c+1]=l&1<<f-- -1?-O:O}}c+=2}if(f+u<0)throw new Error("Huffman data overrun");var g=Bn[n.flags&Jt];var O=this.requantize(1,E);while(f+u>0&&c<=572){if(f<10){l=l<<16|a.read(16);f+=16;u-=16}var _=g[l>>f-4&(1<<4)-1];if(!_.final){f-=4;_=g[_.ptr.offset+(l>>f-_.ptr.bits&(1<<_.ptr.bits)-1)]}f-=_.value.hlen;if(c===d){d+=r[o++];if(E!==s[w]){E=s[w];O=this.requantize(1,E)}++w}t[c]=_.value.v?l&1<<f-- -1?-O:O:0;t[c+1]=_.value.w?l&1<<f-- -1?-O:O:0;c+=2;if(c===d){d+=r[o++];if(E!==s[w]){E=s[w];O=this.requantize(1,E)}++w}t[c]=_.value.x?l&1<<f-- -1?-O:O:0;t[c+1]=_.value.y?l&1<<f-- -1?-O:O:0;c+=2;if(f+u<0){c-=4}}if(-u>M*8){throw new Error("assertion failed: (-bits_left <= BUFFER_GUARD * CHAR_BIT)")}while(c<576){t[c]=0;t[c+1]=0;c+=2}};zn.prototype.requantize=function(e,t){var n=t%4>>0;t=t/4>>0;var r=Math.pow(e,4/3);r*=Math.pow(2,t/4);if(n){r*=Math.pow(2,n/4)}if(t<0){r/=Math.pow(2,-t*(3/4))}return r};zn.prototype.exponents=function(e,t,n){var r=e.global_gain-210;var i=e.flags&Kt?2:1;if(e.block_type===2){var s=0,o=0;if(e.flags&Gt){var u=e.flags&Qt?~0:0;while(o<36){n[s]=r-(e.scalefac[s]+(Wt[s]&u)<<i);o+=t[s++]}}var a=r-8*e.subblock_gain[0];var f=r-8*e.subblock_gain[1];var l=r-8*e.subblock_gain[2];while(o<576){n[s+0]=a-(e.scalefac[s+0]<<i);n[s+1]=f-(e.scalefac[s+1]<<i);n[s+2]=l-(e.scalefac[s+2]<<i);o+=3*t[s];s+=3}}else{if(e.flags&Qt){for(var s=0;s<22;s++){n[s]=r-(e.scalefac[s]+Wt[s]<<i)}}else{for(var s=0;s<22;s++){n[s]=r-(e.scalefac[s]<<i)}}}};zn.prototype.stereo=function(e,t,n,r,i){var s=t[n];var o=this.modes;var u,a,f,l;if(s.ch[0].block_type!==s.ch[1].block_type||(s.ch[0].flags&Gt)!==(s.ch[1].flags&Gt))throw new Error("incompatible stereo block_type");for(var l=0;l<39;l++)o[l]=r.mode_extension;if(r.mode_extension&Yt){var c=s.ch[1];var h=e[1];r.flags|=k.I_STEREO;if(c.block_type===2){var p,d,v,m=new Uint32Array(3),g;p=d=v=m[0]=m[1]=m[2]=0;u=a=0;if(c.flags&Gt){while(a<36){f=i[u++];for(var l=0;l<f;++l){if(h[l]){p=u;break}}h+=f;a+=f}d=u}var g=0;while(a<576){f=i[u++];for(l=0;l<f;++l){if(h[l]){v=m[g]=u;break}}h+=f;a+=f;g=(g+1)%3}if(v)p=d;for(l=0;l<p;++l)o[l]=r.mode_extension&~Yt;g=0;for(l=d;l<v;++l){if(l<m[g])o[l]=r.mode_extension&~Yt;g=(g+1)%3}}else{var m=0;for(u=a=0;a<576;a+=f){f=i[u++];for(l=0;l<f;++l){if(h[l]){m=u;break}}h+=f}for(l=0;l<m;++l)o[l]=r.mode_extension&~Yt}if(r.flags&k.LSF_EXT){var y=t[n+1].ch[1].scalefac;var b=rn[c.scalefac_compress&1];for(u=a=0;a<576;++u,a+=f){f=i[u];if(!(o[u]&Yt))continue;if(y[u]){o[u]&=~Yt;continue}is_pos=c.scalefac[u];for(l=0;l<f;++l){var w=e[0][a+l];if(is_pos===0){e[1][a+l]=w}else{var E=w*b[(is_pos-1)/2];if(is_pos&1){e[0][a+l]=E;e[1][a+l]=w}else{e[1][a+l]=E}}}}}else{for(u=a=0;a<576;++u,a+=f){f=i[u];if(!(o[u]&Yt))continue;is_pos=c.scalefac[u];if(is_pos>=7){o[u]&=~Yt;continue}for(l=0;l<f;++l){var w=e[0][a+l];e[0][a+l]=w*nn[is_pos];e[1][a+l]=w*nn[6-is_pos]}}}}if(r.mode_extension&Zt){r.flags|=k.MS_STEREO;var S=Xt[3+ -2];for(u=a=0;a<576;++u,a+=f){f=i[u];if(o[u]!==Zt)continue;for(l=0;l<f;++l){var x=e[0][a+l];var T=e[1][a+l];e[0][a+l]=(x+T)*S;e[1][a+l]=(x-T)*S}}}};zn.prototype.aliasreduce=function(e,t){for(var n=18;n<t;n+=18){for(var r=0;r<8;++r){var i=e[n-r-1];var s=e[n+r];e[n-r-1]=i*Vt[r]-s*$t[r];e[n+r]=s*Vt[r]+i*$t[r]}}};zn.prototype.imdct_l=function(e,t,n){this.imdct.imdct36(e,t);switch(n){case 0:for(var r=0;r<36;++r)t[r]=t[r]*en[r];break;case 1:for(var r=0;r<18;++r)t[r]=t[r]*en[r];for(var r=24;r<30;++r)t[r]=t[r]*tn[r-18];for(var r=30;r<36;++r)t[r]=0;break;case 3:for(var r=0;r<6;++r)t[r]=0;for(var r=6;r<12;++r)t[r]=t[r]*tn[r-6];for(var r=18;r<36;++r)t[r]=t[r]*en[r];break}};zn.prototype.imdct_s=function(e,t){var n=0;var r;var i=0;var s=new Float64Array(36);var o,u;for(var a=0;a<3;++a){var f=0;for(var l=0;l<3;++l){u=e[i+0]*In[f][0]+e[i+1]*In[f][1]+e[i+2]*In[f][2]+e[i+3]*In[f][3]+e[i+4]*In[f][4]+e[i+5]*In[f][5];s[n+l+0]=u;s[n+5-l]=-s[n+l+0];++f;u=e[i+0]*In[f][0]+e[i+1]*In[f][1]+e[i+2]*In[f][2]+e[i+3]*In[f][3]+e[i+4]*In[f][4]+e[i+5]*In[f][5];s[n+l+6]=u;s[n+11-l]=s[n+l+6];++f}n+=12;i+=6}n=0;var r=0;for(var l=0;l<6;++l){t[l+0]=0;t[l+6]=s[n+0+0]*tn[r+0];u=s[n+0+6]*tn[r+6]+s[n+12+0]*tn[r+0];t[l+12]=u;u=s[n+12+6]*tn[r+6]+s[n+24+0]*tn[r+0];t[l+18]=u;t[l+24]=s[n+24+6]*tn[r+6];t[l+30]=0;++n;++r}};zn.prototype.overlap=function(e,t,n,r){for(var i=0;i<18;++i){n[i][r]=e[i]+t[i];t[i]=e[i+18]}};zn.prototype.freqinver=function(e,t){for(var n=1;n<18;n+=2)e[n][t]=-e[n][t]};zn.prototype.overlap_z=function(e,t,n){for(var r=0;r<18;++r){t[r][n]=e[r];e[r]=0}};zn.prototype.reorder=function(e,t,n){var r=0;var i=this.tmp;var s=new Uint32Array(3);var o=new Uint32Array(3);var u=0;if(t.flags&Gt){var u=2;var a=0;while(a<36)a+=n[r++]}for(var l=0;l<3;++l){s[l]=u;o[l]=0}f=n[r++];l=0;for(var a=18*u;a<576;++a){if(f--===0){f=n[r++]-1;l=(l+1)%3}i[s[l]][l][o[l]++]=e[a];if(o[l]===6){o[l]=0;++s[l]}}var c=this.tmp2;var h=0;for(var p=0;p<32;p++){for(var d=0;d<3;d++){for(var v=0;v<6;v++){c[h++]=i[p][d][v]}}}var m=576-18*u;for(var p=0;p<m;p++){e[18*u+p]=c[u+p]}};var Wn=t.Decoder.extend(function(){t.Decoder.register("mp3",this);this.prototype.init=function(){this.mp3_stream=new T(this.bitstream);this.frame=new P;this.synth=new B;this.seeking=false};this.prototype.readChunk=function(){var e=this.mp3_stream;var n=this.frame;var r=this.synth;if(this.seeking){while(true){try{n.decode(e);break}catch(i){if(i instanceof t.UnderflowError)throw i}}this.seeking=false}else{n.decode(e)}r.frame(n);var s=r.pcm.samples,o=r.pcm.channels,u=r.pcm.length,a=new Float32Array(u*o),f=0;for(var l=0;l<u;l++){for(var c=0;c<o;c++){a[f++]=s[c][l]}}return a};this.prototype.seek=function(e){var t;if(this.demuxer.seekPoints.length>0){e=this._super(e);t=this.stream.offset}else{t=e*this.format.bitrate/8/this.format.sampleRate}this.mp3_stream.reset(t);for(var n=0;n<4096;n++){var r=t+n;for(var i=0;i<3;i++){this.mp3_stream.reset(r);try{var s=D.decode(this.mp3_stream)}catch(o){break}var u=s.framesize();if(u==null)break;r+=u}if(i===3)break}if(i!==3)n=0;this.mp3_stream.reset(t+n);if(this.demuxer.seekPoints.length===0)e=this.stream.offset/(this.format.bitrate/8)*this.format.sampleRate;this.seeking=true;return e}});var Xn=t.Demuxer.extend(function(){t.Demuxer.register(this);this.probe=function(e){return e.peekString(0,4)==="fLaC"};const e=0,n=1,r=2,i=3,s=4,o=5,u=6,a=127,f=34;this.prototype.readChunk=function(){var n=this.stream;if(!this.readHeader&&n.available(4)){if(n.readString(4)!=="fLaC")return this.emit("error","Invalid FLAC file.");this.readHeader=true}while(n.available(1)&&!this.last){if(!this.readBlockHeaders){var r=n.readUInt8();this.last=(r&128)===128,this.type=r&127,this.size=n.readUInt24()}if(!this.foundStreamInfo&&this.type!==e)return this.emit("error","STREAMINFO must be the first block");if(!n.available(this.size))return;switch(this.type){case e:if(this.foundStreamInfo)return this.emit("error","STREAMINFO can only occur once.");if(this.size!==f)return this.emit("error","STREAMINFO size is wrong.");this.foundStreamInfo=true;var o=new t.Bitstream(n);var a={minBlockSize:o.read(16),maxBlockSize:o.read(16),minFrameSize:o.read(24),maxFrameSize:o.read(24)};this.format={formatID:"flac",sampleRate:o.read(20),channelsPerFrame:o.read(3)+1,bitsPerChannel:o.read(5)+1};this.emit("format",this.format);this.emit("cookie",a);var l=o.read(36);this.emit("duration",l/this.format.sampleRate*1e3|0);n.advance(16);this.readBlockHeaders=false;break;case i:for(var c=0;c<this.size/18;c++){if(n.peekUInt32(0)==4294967295&&n.peekUInt32(1)==4294967295){n.advance(18)}else{if(n.readUInt32()>0){this.emit("error","Seek points with sample number >UInt32 not supported")}var h=n.readUInt32();if(n.readUInt32()>0){this.emit("error","Seek points with stream offset >UInt32 not supported")}var p=n.readUInt32();n.advance(2);this.addSeekPoint(p,h)}}break;case s:this.metadata||(this.metadata={});var d=n.readUInt32(true);this.metadata.vendor=n.readString(d);var v=n.readUInt32(true);for(var m=0;m<v;m++){d=n.readUInt32(true);var g=n.readString(d,"utf8"),y=g.indexOf("=");this.metadata[g.slice(0,y).toLowerCase()]=g.slice(y+1)}break;case u:var b=n.readUInt32();if(b!==3){n.advance(this.size-4)}else{var w=n.readUInt32(),E=n.readString(w),S=n.readUInt32(),x=n.readString(S),T=n.readUInt32(),N=n.readUInt32(),C=n.readUInt32(),k=n.readUInt32(),v=n.readUInt32(),L=n.readBuffer(v);this.metadata||(this.metadata={});this.metadata.coverArt=L}break;default:n.advance(this.size);this.readBlockHeaders=false}if(this.last&&this.metadata)this.emit("metadata",this.metadata)}while(n.available(1)&&this.last){var A=n.readSingleBuffer(n.remainingBytes());this.emit("data",A)}}});var Vn=t.Decoder.extend(function(){function c(e){var t=0,n=0;while(true){n=e>>>24;if(n)break;t+=8;n=e>>>16;if(n&255)break;t+=8;n=e>>>8;if(n&255)break;t+=8;n=e;if(n&255)break;t+=8;return t}if(!(n&240))t+=4;else n>>>=4;if(n&8)return t;if(n&4)return t+1;if(n&2)return t+2;if(n&1)return t+3;return t+4}t.Decoder.register("flac",this);this.prototype.setCookie=function(e){this.cookie=e;this.decoded=[];for(var t=0;t<this.format.channelsPerFrame;t++){this.decoded[t]=new Int32Array(e.maxBlockSize)}};const e=new Int16Array([0,192,576<<0,576<<1,576<<2,576<<3,0,0,256<<0,256<<1,256<<2,256<<3,256<<4,256<<5,256<<6,256<<7]);const n=new Int32Array([0,88200,176400,192e3,8e3,16e3,22050,24e3,32e3,44100,48e3,96e3,0,0,0,0]);const r=new Int8Array([0,8,12,0,16,20,24,0]);const i=8,s=0,o=8,u=9,a=10;this.prototype.readChunk=function(){var t=this.bitstream;if(!t.available(32))return;if((t.read(15)&32767)!==32764)throw new Error("Invalid sync code");var f=t.read(1),l=t.read(4),c=t.read(4),h=t.read(4),p=t.read(3);t.advance(1);this.chMode=h;var d;if(h<i){d=h+1;this.chMode=s}else if(h<=a){d=2}else{throw new Error("Invalid channel mode")}if(d!==this.format.channelsPerFrame)throw new Error("Switching channel layout mid-stream not supported.");if(p===3||p===7)throw new Error("Invalid sample size code");this.bps=r[p];if(this.bps!==this.format.bitsPerChannel)throw new Error("Switching bits per sample mid-stream not supported.");var v,m;if(this.bps>16){v=32-this.bps;m=true}else{v=16-this.bps;m=false}var g=0;while(t.read(1)===1)g++;var y=t.read(7-g);for(;g>1;g--){t.advance(2);y=y<<6|t.read(6)}if(l===0)throw new Error("Reserved blocksize code");else if(l===6)this.blockSize=t.read(8)+1;else if(l===7)this.blockSize=t.read(16)+1;else this.blockSize=e[l];var b;if(c<12)b=n[c];else if(c===12)b=t.read(8)*1e3;else if(c===13)b=t.read(16);else if(c===14)b=t.read(16)*10;else throw new Error("Invalid sample rate code");t.advance(8);for(var w=0;w<d;w++)this.decodeSubframe(w);t.align();t.advance(16);var E=new ArrayBuffer(this.blockSize*d*this.bps/8),S=m?new Int32Array(E):new Int16Array(E),x=this.blockSize,T=this.decoded,N=0;switch(this.chMode){case s:for(var C=0;C<x;C++){for(var w=0;w<d;w++){S[N++]=T[w][C]<<v}}break;case o:for(var w=0;w<x;w++){var k=T[0][w],L=T[1][w];S[N++]=k<<v;S[N++]=k-L<<v}break;case u:for(var w=0;w<x;w++){var k=T[0][w],L=T[1][w];S[N++]=k+L<<v;S[N++]=L<<v}break;case a:for(var w=0;w<x;w++){var k=T[0][w],L=T[1][w];k-=L>>1;S[N++]=k+L<<v;S[N++]=k<<v}break}return S};this.prototype.decodeSubframe=function(e){var t=0,n=this.bitstream,r=this.blockSize,i=this.decoded;this.curr_bps=this.bps;if(e===0){if(this.chMode===u)this.curr_bps++}else{if(this.chMode===o||this.chMode===a)this.curr_bps++}if(n.read(1))throw new Error("Invalid subframe padding");var s=n.read(6);if(n.read(1)){t=1;while(!n.read(1))t++;this.curr_bps-=t}if(this.curr_bps>32)throw new Error("decorrelated bit depth > 32 ("+this.curr_bps+")");if(s===0){var f=n.read(this.curr_bps,true);for(var l=0;l<r;l++)i[e][l]=f}else if(s===1){var c=this.curr_bps;for(var l=0;l<r;l++)i[e][l]=n.read(c,true)}else if(s>=8&&s<=12){this.decode_subframe_fixed(e,s&~8)}else if(s>=32){this.decode_subframe_lpc(e,(s&~32)+1)}else{throw new Error("Invalid coding type")}if(t){for(var l=0;l<r;l++)i[e][l]<<=t}};this.prototype.decode_subframe_fixed=function(e,t){var n=this.decoded[e],r=this.bitstream,i=this.curr_bps;for(var s=0;s<t;s++)n[s]=r.read(i,true);this.decode_residuals(e,t);var o=0,u=0,a=0,f=0;if(t>0)o=n[t-1];if(t>1)u=o-n[t-2];if(t>2)a=u-n[t-2]+n[t-3];if(t>3)f=a-n[t-2]+2*n[t-3]-n[t-4];switch(t){case 0:break;case 1:case 2:case 3:case 4:var l=new Int32Array([o,u,a,f]),c=this.blockSize;for(var s=t;s<c;s++){l[t-1]+=n[s];for(var h=t-2;h>=0;h--){l[h]+=l[h+1]}n[s]=l[0]}break;default:throw new Error("Invalid Predictor Order "+t)}};this.prototype.decode_subframe_lpc=function(e,t){var n=this.bitstream,r=this.decoded[e],i=this.curr_bps,s=this.blockSize;for(var o=0;o<t;o++){r[o]=n.read(i,true)}var u=n.read(4)+1;if(u===16)throw new Error("Invalid coefficient precision");var a=n.read(5,true);if(a<0)throw new Error("Negative qlevel, maybe buggy stream");var f=new Int32Array(32);for(var o=0;o<t;o++){f[o]=n.read(u,true)}this.decode_residuals(e,t);if(this.bps>16)throw new Error("no 64-bit integers in JS, could probably use doubles though");for(var o=t;o<s-1;o+=2){var l=r[o-t],c=0,h=0,p;for(var d=t-1;d>0;d--){p=f[d];c+=p*l;l=r[o-d];h+=p*l}p=f[0];c+=p*l;l=r[o]+=c>>a;h+=p*l;r[o+1]+=h>>a}if(o<s){var v=0;for(var d=0;d<t;d++)v+=f[d]*r[o-d-1];r[o]+=v>>a}};const f=32767;this.prototype.decode_residuals=function(e,t){var n=this.bitstream,r=n.read(2);if(r>1)throw new Error("Illegal residual coding method "+r);var i=n.read(4),s=this.blockSize>>>i;if(t>s)throw new Error("Invalid predictor order "+t+" > "+s);var o=this.decoded[e],u=t,a=t;for(var l=0;l<1<<i;l++){var c=n.read(r===0?4:5);if(c===(r===0?15:31)){c=n.read(5);for(;a<s;a++)o[u++]=n.read(c,true)}else{for(;a<s;a++)o[u++]=this.golomb(c,f,0)}a=0}};const l=25;this.prototype.golomb=function(e,t,n){var r=this.bitstream,i=r.bitPosition,s=r.peek(32-i)<<i,o=0;var u=31-c(s|1);if(u-e>=32-l&&32-u<t){s>>>=u-e;s+=30-u<<e;r.advance(32+e-u);o=s}else{for(var a=0;r.read(1)===0;a++)s=r.peek(32-i)<<i;if(a<t-1){if(e)s=r.read(e);else s=0;o=s+(a<<e)}else if(a===t-1){s=r.read(n);o=s+1}else{o=-1}}return o>>1^-(o&1)}});return e.AV=t})()